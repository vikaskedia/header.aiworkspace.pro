(function(M,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(M=typeof globalThis<"u"?globalThis:M||self,r(M.AIWorkspaceHeader={},M.Vue))})(this,function(M,r){"use strict";const Ps=Symbol(),Rt="el",ma="is-",Le=(t,e,n,s,o)=>{let a=`${t}-${e}`;return n&&(a+=`-${n}`),s&&(a+=`__${s}`),o&&(a+=`--${o}`),a},xs=Symbol("namespaceContextKey"),Ns=t=>{const e=t||(r.getCurrentInstance()?r.inject(xs,r.ref(Rt)):r.ref(Rt));return r.computed(()=>r.unref(e)||Rt)},de=(t,e)=>{const n=Ns(e);return{namespace:n,b:(m="")=>Le(n.value,t,m,"",""),e:m=>m?Le(n.value,t,"",m,""):"",m:m=>m?Le(n.value,t,"","",m):"",be:(m,b)=>m&&b?Le(n.value,t,m,b,""):"",em:(m,b)=>m&&b?Le(n.value,t,"",m,b):"",bm:(m,b)=>m&&b?Le(n.value,t,m,"",b):"",bem:(m,b,y)=>m&&b&&y?Le(n.value,t,m,b,y):"",is:(m,...b)=>{const y=b.length>=1?b[0]:!0;return m&&y?`${ma}${m}`:""},cssVar:m=>{const b={};for(const y in m)m[y]&&(b[`--${n.value}-${y}`]=m[y]);return b},cssVarName:m=>`--${n.value}-${m}`,cssVarBlock:m=>{const b={};for(const y in m)m[y]&&(b[`--${n.value}-${t}-${y}`]=m[y]);return b},cssVarBlockName:m=>`--${n.value}-${t}-${m}`}};/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/process.env.NODE_ENV!=="production"&&Object.freeze({}),process.env.NODE_ENV!=="production"&&Object.freeze([]);const ft=()=>{},ya=Object.prototype.hasOwnProperty,pt=(t,e)=>ya.call(t,e),me=t=>typeof t=="function",se=t=>typeof t=="string",Je=t=>t!==null&&typeof t=="object",_a=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},ba=/-\w/g,wa=_a(t=>t.replace(ba,e=>e.slice(1).toUpperCase()));var va=typeof global=="object"&&global&&global.Object===Object&&global;const ka=va;var Sa=typeof self=="object"&&self&&self.Object===Object&&self,Ea=ka||Sa||Function("return this")();const _n=Ea;var Ca=_n.Symbol;const Ee=Ca;var $s=Object.prototype,Ta=$s.hasOwnProperty,Oa=$s.toString,gt=Ee?Ee.toStringTag:void 0;function Ia(t){var e=Ta.call(t,gt),n=t[gt];try{t[gt]=void 0;var s=!0}catch{}var o=Oa.call(t);return s&&(e?t[gt]=n:delete t[gt]),o}var Aa=Object.prototype,Pa=Aa.toString;function xa(t){return Pa.call(t)}var Na="[object Null]",$a="[object Undefined]",Rs=Ee?Ee.toStringTag:void 0;function bn(t){return t==null?t===void 0?$a:Na:Rs&&Rs in Object(t)?Ia(t):xa(t)}function wn(t){return t!=null&&typeof t=="object"}var Ra="[object Symbol]";function vn(t){return typeof t=="symbol"||wn(t)&&bn(t)==Ra}function Ba(t,e){for(var n=-1,s=t==null?0:t.length,o=Array(s);++n<s;)o[n]=e(t[n],n,t);return o}var ja=Array.isArray;const mt=ja;var La=1/0,Bs=Ee?Ee.prototype:void 0,js=Bs?Bs.toString:void 0;function Ls(t){if(typeof t=="string")return t;if(mt(t))return Ba(t,Ls)+"";if(vn(t))return js?js.call(t):"";var e=t+"";return e=="0"&&1/t==-La?"-0":e}function Bt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Da(t){return t}var Ma="[object AsyncFunction]",Ua="[object Function]",Va="[object GeneratorFunction]",Fa="[object Proxy]";function za(t){if(!Bt(t))return!1;var e=bn(t);return e==Ua||e==Va||e==Ma||e==Fa}var Wa=_n["__core-js_shared__"];const kn=Wa;var Ds=function(){var t=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ha(t){return!!Ds&&Ds in t}var Ka=Function.prototype,qa=Ka.toString;function Ga(t){if(t!=null){try{return qa.call(t)}catch{}try{return t+""}catch{}}return""}var Ja=/[\\^$.*+?()[\]{}|]/g,Ya=/^\[object .+?Constructor\]$/,Xa=Function.prototype,Za=Object.prototype,Qa=Xa.toString,ei=Za.hasOwnProperty,ti=RegExp("^"+Qa.call(ei).replace(Ja,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ni(t){if(!Bt(t)||Ha(t))return!1;var e=za(t)?ti:Ya;return e.test(Ga(t))}function si(t,e){return t==null?void 0:t[e]}function Sn(t,e){var n=si(t,e);return ni(n)?n:void 0}function ri(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var oi=800,ai=16,ii=Date.now;function li(t){var e=0,n=0;return function(){var s=ii(),o=ai-(s-n);if(n=s,o>0){if(++e>=oi)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function ci(t){return function(){return t}}var ui=function(){try{var t=Sn(Object,"defineProperty");return t({},"",{}),t}catch{}}();const jt=ui;var di=jt?function(t,e){return jt(t,"toString",{configurable:!0,enumerable:!1,value:ci(e),writable:!0})}:Da,hi=li(di);const fi=hi;var pi=9007199254740991,gi=/^(?:0|[1-9]\d*)$/;function Ms(t,e){var n=typeof t;return e=e??pi,!!e&&(n=="number"||n!="symbol"&&gi.test(t))&&t>-1&&t%1==0&&t<e}function mi(t,e,n){e=="__proto__"&&jt?jt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Us(t,e){return t===e||t!==t&&e!==e}var yi=Object.prototype,_i=yi.hasOwnProperty;function bi(t,e,n){var s=t[e];(!(_i.call(t,e)&&Us(s,n))||n===void 0&&!(e in t))&&mi(t,e,n)}var Vs=Math.max;function wi(t,e,n){return e=Vs(e===void 0?t.length-1:e,0),function(){for(var s=arguments,o=-1,a=Vs(s.length-e,0),i=Array(a);++o<a;)i[o]=s[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=s[o];return l[e]=n(i),ri(t,this,l)}}var vi=9007199254740991;function ki(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vi}var Si="[object Arguments]";function Fs(t){return wn(t)&&bn(t)==Si}var zs=Object.prototype,Ei=zs.hasOwnProperty,Ci=zs.propertyIsEnumerable,Ti=Fs(function(){return arguments}())?Fs:function(t){return wn(t)&&Ei.call(t,"callee")&&!Ci.call(t,"callee")};const Ws=Ti;var Oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ii=/^\w*$/;function Ai(t,e){if(mt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||vn(t)?!0:Ii.test(t)||!Oi.test(t)||e!=null&&t in Object(e)}var Pi=Sn(Object,"create");const yt=Pi;function xi(){this.__data__=yt?yt(null):{},this.size=0}function Ni(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $i="__lodash_hash_undefined__",Ri=Object.prototype,Bi=Ri.hasOwnProperty;function ji(t){var e=this.__data__;if(yt){var n=e[t];return n===$i?void 0:n}return Bi.call(e,t)?e[t]:void 0}var Li=Object.prototype,Di=Li.hasOwnProperty;function Mi(t){var e=this.__data__;return yt?e[t]!==void 0:Di.call(e,t)}var Ui="__lodash_hash_undefined__";function Vi(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yt&&e===void 0?Ui:e,this}function De(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}De.prototype.clear=xi,De.prototype.delete=Ni,De.prototype.get=ji,De.prototype.has=Mi,De.prototype.set=Vi;function Fi(){this.__data__=[],this.size=0}function Lt(t,e){for(var n=t.length;n--;)if(Us(t[n][0],e))return n;return-1}var zi=Array.prototype,Wi=zi.splice;function Hi(t){var e=this.__data__,n=Lt(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():Wi.call(e,n,1),--this.size,!0}function Ki(t){var e=this.__data__,n=Lt(e,t);return n<0?void 0:e[n][1]}function qi(t){return Lt(this.__data__,t)>-1}function Gi(t,e){var n=this.__data__,s=Lt(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function Ye(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Ye.prototype.clear=Fi,Ye.prototype.delete=Hi,Ye.prototype.get=Ki,Ye.prototype.has=qi,Ye.prototype.set=Gi;var Ji=Sn(_n,"Map");const Yi=Ji;function Xi(){this.size=0,this.__data__={hash:new De,map:new(Yi||Ye),string:new De}}function Zi(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Dt(t,e){var n=t.__data__;return Zi(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Qi(t){var e=Dt(this,t).delete(t);return this.size-=e?1:0,e}function el(t){return Dt(this,t).get(t)}function tl(t){return Dt(this,t).has(t)}function nl(t,e){var n=Dt(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function Me(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Me.prototype.clear=Xi,Me.prototype.delete=Qi,Me.prototype.get=el,Me.prototype.has=tl,Me.prototype.set=nl;var sl="Expected a function";function En(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(sl);var n=function(){var s=arguments,o=e?e.apply(this,s):s[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,s);return n.cache=a.set(o,i)||a,i};return n.cache=new(En.Cache||Me),n}En.Cache=Me;var rl=500;function ol(t){var e=En(t,function(s){return n.size===rl&&n.clear(),s}),n=e.cache;return e}var al=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,il=/\\(\\)?/g,ll=ol(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(al,function(n,s,o,a){e.push(o?a.replace(il,"$1"):s||n)}),e});const cl=ll;function ul(t){return t==null?"":Ls(t)}function Mt(t,e){return mt(t)?t:Ai(t,e)?[t]:cl(ul(t))}var dl=1/0;function Cn(t){if(typeof t=="string"||vn(t))return t;var e=t+"";return e=="0"&&1/t==-dl?"-0":e}function Hs(t,e){e=Mt(e,t);for(var n=0,s=e.length;t!=null&&n<s;)t=t[Cn(e[n++])];return n&&n==s?t:void 0}function hl(t,e,n){var s=t==null?void 0:Hs(t,e);return s===void 0?n:s}function fl(t,e){for(var n=-1,s=e.length,o=t.length;++n<s;)t[o+n]=e[n];return t}var Ks=Ee?Ee.isConcatSpreadable:void 0;function pl(t){return mt(t)||Ws(t)||!!(Ks&&t&&t[Ks])}function qs(t,e,n,s,o){var a=-1,i=t.length;for(n||(n=pl),o||(o=[]);++a<i;){var l=t[a];e>0&&n(l)?e>1?qs(l,e-1,n,s,o):fl(o,l):s||(o[o.length]=l)}return o}function gl(t){var e=t==null?0:t.length;return e?qs(t,1):[]}function ml(t){return fi(wi(t,void 0,gl),t+"")}function yl(t,e){return t!=null&&e in Object(t)}function _l(t,e,n){e=Mt(e,t);for(var s=-1,o=e.length,a=!1;++s<o;){var i=Cn(e[s]);if(!(a=t!=null&&n(t,i)))break;t=t[i]}return a||++s!=o?a:(o=t==null?0:t.length,!!o&&ki(o)&&Ms(i,o)&&(mt(t)||Ws(t)))}function bl(t,e){return t!=null&&_l(t,e,yl)}function Gs(t){for(var e=-1,n=t==null?0:t.length,s={};++e<n;){var o=t[e];s[o[0]]=o[1]}return s}function Js(t){return t==null}function wl(t,e,n,s){if(!Bt(t))return t;e=Mt(e,t);for(var o=-1,a=e.length,i=a-1,l=t;l!=null&&++o<a;){var c=Cn(e[o]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(o!=i){var d=l[c];u=s?s(d,c,l):void 0,u===void 0&&(u=Bt(d)?d:Ms(e[o+1])?[]:{})}bi(l,c,u),l=l[c]}return t}function vl(t,e,n){for(var s=-1,o=e.length,a={};++s<o;){var i=e[s],l=Hs(t,i);n(l,i)&&wl(a,Mt(i,t),l)}return a}function kl(t,e){return vl(t,e,function(n,s){return bl(t,s)})}var Sl=ml(function(t,e){return t==null?{}:kl(t,e)});const El=Sl,Ys=t=>t===void 0,Tn=t=>typeof t=="boolean",ye=t=>typeof t=="number",_t=t=>typeof Element>"u"?!1:t instanceof Element,Cl=t=>se(t)?!Number.isNaN(Number(t)):!1;var Tl=!1;function Ut(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function On(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}var Ol=Object.defineProperty,Il=Object.defineProperties,Al=Object.getOwnPropertyDescriptors,Xs=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,xl=Object.prototype.propertyIsEnumerable,Zs=(t,e,n)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nl=(t,e)=>{for(var n in e||(e={}))Pl.call(e,n)&&Zs(t,n,e[n]);if(Xs)for(var n of Xs(e))xl.call(e,n)&&Zs(t,n,e[n]);return t},$l=(t,e)=>Il(t,Al(e));function Rl(t,e){var n;const s=r.shallowRef();return r.watchEffect(()=>{s.value=t()},$l(Nl({},e),{flush:(n=e==null?void 0:e.flush)!=null?n:"sync"})),r.readonly(s)}var Qs;const X=typeof window<"u",Bl=t=>typeof t=="string",jl=()=>{};X&&((Qs=window==null?void 0:window.navigator)!=null&&Qs.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function In(t){return typeof t=="function"?t():r.unref(t)}function Ll(t){return t}function An(t){return r.getCurrentScope()?(r.onScopeDispose(t),!0):!1}function Dl(t,e=!0){r.getCurrentInstance()?r.onMounted(t):e?t():r.nextTick(t)}function Ml(t,e,n={}){const{immediate:s=!0}=n,o=r.ref(!1);let a=null;function i(){a&&(clearTimeout(a),a=null)}function l(){o.value=!1,i()}function c(...u){i(),o.value=!0,a=setTimeout(()=>{o.value=!1,a=null,t(...u)},In(e))}return s&&(o.value=!0,X&&c()),An(l),{isPending:r.readonly(o),start:c,stop:l}}function er(t){var e;const n=In(t);return(e=n==null?void 0:n.$el)!=null?e:n}const tr=X?window:void 0;function Vt(...t){let e,n,s,o;if(Bl(t[0])||Array.isArray(t[0])?([n,s,o]=t,e=tr):[e,n,s,o]=t,!e)return jl;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(d=>d()),a.length=0},l=(d,h,p,g)=>(d.addEventListener(h,p,g),()=>d.removeEventListener(h,p,g)),c=r.watch(()=>[er(e),In(o)],([d,h])=>{i(),d&&a.push(...n.flatMap(p=>s.map(g=>l(d,p,g,h))))},{immediate:!0,flush:"post"}),u=()=>{c(),i()};return An(u),u}function Ul(t,e=!1){const n=r.ref(),s=()=>n.value=!!t();return s(),Dl(s,e),n}const nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr="__vueuse_ssr_handlers__";nr[sr]=nr[sr]||{};var rr=Object.getOwnPropertySymbols,Vl=Object.prototype.hasOwnProperty,Fl=Object.prototype.propertyIsEnumerable,zl=(t,e)=>{var n={};for(var s in t)Vl.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&rr)for(var s of rr(t))e.indexOf(s)<0&&Fl.call(t,s)&&(n[s]=t[s]);return n};function or(t,e,n={}){const s=n,{window:o=tr}=s,a=zl(s,["window"]);let i;const l=Ul(()=>o&&"ResizeObserver"in o),c=()=>{i&&(i.disconnect(),i=void 0)},u=r.watch(()=>er(t),h=>{c(),l.value&&o&&h&&(i=new ResizeObserver(e),i.observe(h,a))},{immediate:!0,flush:"post"}),d=()=>{c(),u()};return An(d),{isSupported:l,stop:d}}var ar;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(ar||(ar={}));var Wl=Object.defineProperty,ir=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Kl=Object.prototype.propertyIsEnumerable,lr=(t,e,n)=>e in t?Wl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ql=(t,e)=>{for(var n in e||(e={}))Hl.call(e,n)&&lr(t,n,e[n]);if(ir)for(var n of ir(e))Kl.call(e,n)&&lr(t,n,e[n]);return t};ql({linear:Ll},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const cr={current:0},ur=r.ref(0),dr=2e3,hr=Symbol("elZIndexContextKey"),fr=Symbol("zIndexContextKey"),Gl=t=>{const e=r.getCurrentInstance()?r.inject(hr,cr):cr,n=t||(r.getCurrentInstance()?r.inject(fr,void 0):void 0),s=r.computed(()=>{const i=r.unref(n);return ye(i)?i:dr}),o=r.computed(()=>s.value+ur.value),a=()=>(e.current++,ur.value=e.current,o.value);return!X&&r.inject(hr),{initialZIndex:s,currentZIndex:o,nextZIndex:a}};var Jl={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Yl=t=>(e,n)=>Xl(e,n,r.unref(t)),Xl=(t,e,n)=>hl(n,t,t).replace(/\{(\w+)\}/g,(s,o)=>{var a;return`${(a=e==null?void 0:e[o])!=null?a:`{${o}}`}`}),Zl=t=>{const e=r.computed(()=>r.unref(t).name),n=r.isRef(t)?t:r.ref(t);return{lang:e,locale:n,t:Yl(t)}},pr=Symbol("localeContextKey"),Ql=t=>{const e=t||r.inject(pr,r.ref());return Zl(r.computed(()=>e.value||Jl))},gr="__epPropKey",F=t=>t,ec=t=>Je(t)&&!!t[gr],mr=(t,e)=>{if(!Je(t)||ec(t))return t;const{values:n,required:s,default:o,type:a,validator:i}=t,c={type:a,required:!!s,validator:n||i?u=>{let d=!1,h=[];if(n&&(h=Array.from(n),pt(t,"default")&&h.push(o),d||(d=h.includes(u))),i&&(d||(d=i(u))),!d&&h.length>0){const p=[...new Set(h)].map(g=>JSON.stringify(g)).join(", ");r.warn(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${p}], got value ${JSON.stringify(u)}.`)}return d}:void 0,[gr]:!0};return pt(t,"default")&&(c.default=o),c},_e=t=>Gs(Object.entries(t).map(([e,n])=>[e,mr(n,e)])),yr=["","default","small","large"],Pn=mr({type:String,values:yr,required:!1}),_r=Symbol("size"),tc=()=>{const t=r.inject(_r,{});return r.computed(()=>r.unref(t.size)||"")},nc=Symbol("emptyValuesContextKey"),sc=_e({emptyValues:Array,valueOnClear:{type:F([String,Number,Boolean,Function]),default:void 0,validator:t=>me(t)?!t():!t}}),br=t=>Object.keys(t),Ft=r.ref();function xn(t,e=void 0){const n=r.getCurrentInstance()?r.inject(Ps,Ft):Ft;return t?r.computed(()=>{var s,o;return(o=(s=n.value)==null?void 0:s[t])!=null?o:e}):n}function wr(t,e){const n=xn(),s=de(t,r.computed(()=>{var l;return((l=n.value)==null?void 0:l.namespace)||Rt})),o=Ql(r.computed(()=>{var l;return(l=n.value)==null?void 0:l.locale})),a=Gl(r.computed(()=>{var l;return((l=n.value)==null?void 0:l.zIndex)||dr})),i=r.computed(()=>{var l;return r.unref(e)||((l=n.value)==null?void 0:l.size)||""});return vr(r.computed(()=>r.unref(n)||{})),{ns:s,locale:o,zIndex:a,size:i}}const vr=(t,e,n=!1)=>{var s;const o=!!r.getCurrentInstance(),a=o?xn():void 0,i=(s=e==null?void 0:e.provide)!=null?s:o?r.provide:void 0;if(!i)return;const l=r.computed(()=>{const c=r.unref(t);return a!=null&&a.value?rc(a.value,c):c});return i(Ps,l),i(pr,r.computed(()=>l.value.locale)),i(xs,r.computed(()=>l.value.namespace)),i(fr,r.computed(()=>l.value.zIndex)),i(_r,{size:r.computed(()=>l.value.size||"")}),i(nc,r.computed(()=>({emptyValues:l.value.emptyValues,valueOnClear:l.value.valueOnClear}))),(n||!Ft.value)&&(Ft.value=l.value),l},rc=(t,e)=>{const n=[...new Set([...br(t),...br(e)])],s={};for(const o of n)s[o]=e[o]!==void 0?e[o]:t[o];return s},Nn="update:modelValue",kr="change",Sr="input";var Ce=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n};const Er=(t="")=>t.split(" ").filter(e=>!!e.trim()),Cr=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},oc=(t,e)=>{!t||!e.trim()||t.classList.add(...Er(e))},ac=(t,e)=>{!t||!e.trim()||t.classList.remove(...Er(e))},ic=(t,e)=>{var n;if(!X||!t||!e)return"";let s=wa(e);s==="float"&&(s="cssFloat");try{const o=t.style[s];if(o)return o;const a=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return a?a[s]:""}catch{return t.style[s]}};function bt(t,e="px"){if(!t)return"";if(ye(t)||Cl(t))return`${t}${e}`;if(se(t))return t}let zt;const lc=t=>{var e;if(!X)return 0;if(zt!==void 0)return zt;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const s=n.offsetWidth;n.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",n.appendChild(o);const a=o.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),zt=s-a,zt};class cc extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function uc(t,e){throw new cc(`[${t}] ${e}`)}function Mp(t,e){}const Wt=(t,e)=>{if(t.install=n=>{for(const s of[t,...Object.values(e??{})])n.component(s.name,s)},e)for(const[n,s]of Object.entries(e))t[n]=s;return t},dc=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),hc=t=>(t.install=ft,t),fc=_e({size:{type:F([Number,String])},color:{type:String}}),pc=r.defineComponent({name:"ElIcon",inheritAttrs:!1}),gc=r.defineComponent({...pc,props:fc,setup(t){const e=t,n=de("icon"),s=r.computed(()=>{const{size:o,color:a}=e;return!o&&!a?{}:{fontSize:Ys(o)?void 0:bt(o),"--color":a}});return(o,a)=>(r.openBlock(),r.createElementBlock("i",r.mergeProps({class:r.unref(n).b(),style:r.unref(s)},o.$attrs),[r.renderSlot(o.$slots,"default")],16))}});var mc=Ce(gc,[["__file","icon.vue"]]);const he=Wt(mc);/*! Element Plus Icons Vue v2.3.2 */var yc=r.defineComponent({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.59 30.59 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.59 30.59 0 0 0-42.752 0z"})]))}}),Tr=yc,_c=r.defineComponent({name:"Check",__name:"check",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),bc=_c,wc=r.defineComponent({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),r.createElementVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),vc=wc,kc=r.defineComponent({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),Or=kc,Sc=r.defineComponent({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),r.createElementVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Ir=Sc,Ec=r.defineComponent({name:"Close",__name:"close",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Cc=Ec,Tc=r.defineComponent({name:"Hide",__name:"hide",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),r.createElementVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),Oc=Tc,Ic=r.defineComponent({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),$n=Ic,Ac=r.defineComponent({name:"Loading",__name:"loading",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),Ht=Ac,Pc=r.defineComponent({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Ar=Pc,xc=r.defineComponent({name:"View",__name:"view",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Nc=xc,$c=r.defineComponent({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),Pr=$c;const Xe=F([String,Object,Function]),xr={Close:Cc,SuccessFilled:Ar,InfoFilled:$n,WarningFilled:Pr,CircleCloseFilled:Or},Kt={primary:$n,success:Ar,warning:Pr,error:Or,info:$n},Rc={validating:Ht,success:vc,error:Ir},Bc=()=>X&&/firefox/i.test(window.navigator.userAgent);let Z;const jc={height:"0",visibility:"hidden",overflow:Bc()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Lc=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"];function Dc(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),s=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),o=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Lc.map(i=>[i,e.getPropertyValue(i)]),paddingSize:s,borderSize:o,boxSizing:n}}function Nr(t,e=1,n){var s,o;Z||(Z=document.createElement("textarea"),((s=t.parentNode)!=null?s:document.body).appendChild(Z));const{paddingSize:a,borderSize:i,boxSizing:l,contextStyle:c}=Dc(t);c.forEach(([p,g])=>Z==null?void 0:Z.style.setProperty(p,g)),Object.entries(jc).forEach(([p,g])=>Z==null?void 0:Z.style.setProperty(p,g,"important")),Z.value=t.value||t.placeholder||"";let u=Z.scrollHeight;const d={};l==="border-box"?u=u+i:l==="content-box"&&(u=u-a),Z.value="";const h=Z.scrollHeight-a;if(ye(e)){let p=h*e;l==="border-box"&&(p=p+a+i),u=Math.max(p,u),d.minHeight=`${p}px`}if(ye(n)){let p=h*n;l==="border-box"&&(p=p+a+i),u=Math.min(p,u)}return d.height=`${u}px`,(o=Z.parentNode)==null||o.removeChild(Z),Z=void 0,d}const $r=t=>t,Mc=_e({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Uc=t=>El(Mc,t),Vc=_e({id:{type:String,default:void 0},size:Pn,disabled:Boolean,modelValue:{type:F([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:F([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:Xe,default:Ir},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Xe},prefixIcon:{type:Xe},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:F([Object,Array,String]),default:()=>$r({})},autofocus:Boolean,rows:{type:Number,default:2},...Uc(["ariaLabel"]),inputmode:{type:F(String),default:void 0},name:String}),Fc={[Nn]:t=>se(t),input:t=>se(t),change:t=>se(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},zc=["class","style"],Wc=/^on[A-Z]/,Hc=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,s=r.computed(()=>((n==null?void 0:n.value)||[]).concat(zc)),o=r.getCurrentInstance();return o?r.computed(()=>{var a;return Gs(Object.entries((a=o.proxy)==null?void 0:a.$attrs).filter(([i])=>!s.value.includes(i)&&!(e&&Wc.test(i))))}):r.computed(()=>({}))},Rr={prefix:Math.floor(Math.random()*1e4),current:0},Kc=Symbol("elIdInjection"),qc=()=>r.getCurrentInstance()?r.inject(Kc,Rr):Rr,Rn=t=>{const e=qc(),n=Ns();return Rl(()=>r.unref(t)||`${n.value}-id-${e.prefix}-${e.current++}`)},Bn=Symbol("formContextKey"),Br=Symbol("formItemContextKey"),jr=()=>{const t=r.inject(Bn,void 0),e=r.inject(Br,void 0);return{form:t,formItem:e}},Gc=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:s})=>{n||(n=r.ref(!1)),s||(s=r.ref(!1));const o=r.getCurrentInstance(),a=()=>{let u=o==null?void 0:o.parent;for(;u;){if(u.type.name==="ElFormItem")return!1;if(u.type.name==="ElLabelWrap")return!0;u=u.parent}return!1},i=r.ref();let l;const c=r.computed(()=>{var u;return!!(!(t.label||t.ariaLabel)&&e&&e.inputIds&&((u=e.inputIds)==null?void 0:u.length)<=1)});return r.onMounted(()=>{l=r.watch([r.toRef(t,"id"),n],([u,d])=>{const h=u??(d?void 0:Rn().value);h!==i.value&&(e!=null&&e.removeInputId&&!a()&&(i.value&&e.removeInputId(i.value),!(s!=null&&s.value)&&!d&&h&&e.addInputId(h)),i.value=h)},{immediate:!0})}),r.onUnmounted(()=>{l&&l(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:c,inputId:i}},Lr=t=>{const e=r.getCurrentInstance();return r.computed(()=>{var n,s;return(s=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:s[t]})},Dr=(t,e={})=>{const n=r.ref(void 0),s=e.prop?n:Lr("size"),o=e.global?n:tc(),a=e.form?{size:void 0}:r.inject(Bn,void 0),i=e.formItem?{size:void 0}:r.inject(Br,void 0);return r.computed(()=>s.value||r.unref(t)||(i==null?void 0:i.size)||(a==null?void 0:a.size)||o.value||"")},jn=t=>{const e=Lr("disabled"),n=r.inject(Bn,void 0);return r.computed(()=>e.value||r.unref(t)||(n==null?void 0:n.disabled)||!1)},Jc='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Yc=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,Mr=t=>Array.from(t.querySelectorAll(Jc)).filter(e=>Ln(e)&&Yc(e)),Ln=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.tabIndex<0||t.hasAttribute("disabled")||t.getAttribute("aria-disabled")==="true")return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}};function Xc(t,{disabled:e,beforeFocus:n,afterFocus:s,beforeBlur:o,afterBlur:a}={}){const i=r.getCurrentInstance(),{emit:l}=i,c=r.shallowRef(),u=r.ref(!1),d=g=>{const f=me(n)?n(g):!1;r.unref(e)||u.value||f||(u.value=!0,l("focus",g),s==null||s())},h=g=>{var f;const m=me(o)?o(g):!1;r.unref(e)||g.relatedTarget&&((f=c.value)!=null&&f.contains(g.relatedTarget))||m||(u.value=!1,l("blur",g),a==null||a())},p=g=>{var f,m;r.unref(e)||Ln(g.target)||(f=c.value)!=null&&f.contains(document.activeElement)&&c.value!==document.activeElement||(m=t.value)==null||m.focus()};return r.watch([c,()=>r.unref(e)],([g,f])=>{g&&(f?g.removeAttribute("tabindex"):g.setAttribute("tabindex","-1"))}),Vt(c,"focus",d,!0),Vt(c,"blur",h,!0),Vt(c,"click",p,!0),{isFocused:u,wrapperRef:c,handleFocus:d,handleBlur:h}}const Zc=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t);function Qc({afterComposition:t,emit:e}){const n=r.ref(!1),s=l=>{e==null||e("compositionstart",l),n.value=!0},o=l=>{var c;e==null||e("compositionupdate",l);const u=(c=l.target)==null?void 0:c.value,d=u[u.length-1]||"";n.value=!Zc(d)},a=l=>{e==null||e("compositionend",l),n.value&&(n.value=!1,r.nextTick(()=>t(l)))};return{isComposing:n,handleComposition:l=>{l.type==="compositionend"?a(l):o(l)},handleCompositionStart:s,handleCompositionUpdate:o,handleCompositionEnd:a}}function eu(t){let e;function n(){if(t.value==null)return;const{selectionStart:o,selectionEnd:a,value:i}=t.value;if(o==null||a==null)return;const l=i.slice(0,Math.max(0,o)),c=i.slice(Math.max(0,a));e={selectionStart:o,selectionEnd:a,value:i,beforeTxt:l,afterTxt:c}}function s(){if(t.value==null||e==null)return;const{value:o}=t.value,{beforeTxt:a,afterTxt:i,selectionStart:l}=e;if(a==null||i==null||l==null)return;let c=o.length;if(o.endsWith(i))c=o.length-i.length;else if(o.startsWith(a))c=a.length;else{const u=a[l-1],d=o.indexOf(u,l-1);d!==-1&&(c=d+1)}t.value.setSelectionRange(c,c)}return[n,s]}const tu="ElInput",nu=r.defineComponent({name:tu,inheritAttrs:!1}),su=r.defineComponent({...nu,props:Vc,emits:Fc,setup(t,{expose:e,emit:n}){const s=t,o=r.useAttrs(),a=Hc(),i=r.useSlots(),l=r.computed(()=>[s.type==="textarea"?m.b():f.b(),f.m(p.value),f.is("disabled",g.value),f.is("exceed",yn.value),{[f.b("group")]:i.prepend||i.append,[f.m("prefix")]:i.prefix||s.prefixIcon,[f.m("suffix")]:i.suffix||s.suffixIcon||s.clearable||s.showPassword,[f.bm("suffix","password-clear")]:x.value&&$.value,[f.b("hidden")]:s.type==="hidden"},o.class]),c=r.computed(()=>[f.e("wrapper"),f.is("focus",L.value)]),{form:u,formItem:d}=jr(),{inputId:h}=Gc(s,{formItemContext:d}),p=Dr(),g=jn(),f=de("input"),m=de("textarea"),b=r.shallowRef(),y=r.shallowRef(),k=r.ref(!1),_=r.ref(!1),O=r.ref(),N=r.shallowRef(s.inputStyle),P=r.computed(()=>b.value||y.value),{wrapperRef:I,isFocused:L,handleFocus:D,handleBlur:S}=Xc(P,{disabled:g,afterBlur(){var E;s.validateEvent&&((E=d==null?void 0:d.validate)==null||E.call(d,"blur").catch(V=>void 0))}}),w=r.computed(()=>{var E;return(E=u==null?void 0:u.statusIcon)!=null?E:!1}),C=r.computed(()=>(d==null?void 0:d.validateState)||""),z=r.computed(()=>C.value&&Rc[C.value]),ee=r.computed(()=>_.value?Nc:Oc),A=r.computed(()=>[o.style]),v=r.computed(()=>[s.inputStyle,N.value,{resize:s.resize}]),T=r.computed(()=>Js(s.modelValue)?"":String(s.modelValue)),x=r.computed(()=>s.clearable&&!g.value&&!s.readonly&&!!T.value&&(L.value||k.value)),$=r.computed(()=>s.showPassword&&!g.value&&!!T.value),W=r.computed(()=>s.showWordLimit&&!!s.maxlength&&(s.type==="text"||s.type==="textarea")&&!g.value&&!s.readonly&&!s.showPassword),ae=r.computed(()=>T.value.length),yn=r.computed(()=>!!W.value&&ae.value>Number(s.maxlength)),Is=r.computed(()=>!!i.suffix||!!s.suffixIcon||x.value||s.showPassword||W.value||!!C.value&&w.value),[B,ke]=eu(b);or(y,E=>{if(Pp(),!W.value||s.resize!=="both")return;const V=E[0],{width:ht}=V.contentRect;O.value={right:`calc(100% - ${ht+15+6}px)`}});const Se=()=>{const{type:E,autosize:V}=s;if(!(!X||E!=="textarea"||!y.value))if(V){const ht=Je(V)?V.minRows:void 0,fa=Je(V)?V.maxRows:void 0,pa=Nr(y.value,ht,fa);N.value={overflowY:"hidden",...pa},r.nextTick(()=>{y.value.offsetHeight,N.value=pa})}else N.value={minHeight:Nr(y.value).minHeight}},Pp=(E=>{let V=!1;return()=>{var ht;if(V||!s.autosize)return;((ht=y.value)==null?void 0:ht.offsetParent)===null||(E(),V=!0)}})(Se),$t=()=>{const E=P.value,V=s.formatter?s.formatter(T.value):T.value;!E||E.value===V||(E.value=V)},As=async E=>{B();let{value:V}=E.target;if(s.formatter&&s.parser&&(V=s.parser(V)),!ia.value){if(V===T.value){$t();return}n(Nn,V),n(Sr,V),await r.nextTick(),$t(),ke()}},aa=E=>{let{value:V}=E.target;s.formatter&&s.parser&&(V=s.parser(V)),n(kr,V)},{isComposing:ia,handleCompositionStart:la,handleCompositionUpdate:ca,handleCompositionEnd:ua}=Qc({emit:n,afterComposition:As}),xp=()=>{B(),_.value=!_.value,setTimeout(ke)},Np=()=>{var E;return(E=P.value)==null?void 0:E.focus()},$p=()=>{var E;return(E=P.value)==null?void 0:E.blur()},Rp=E=>{k.value=!1,n("mouseleave",E)},Bp=E=>{k.value=!0,n("mouseenter",E)},da=E=>{n("keydown",E)},jp=()=>{var E;(E=P.value)==null||E.select()},ha=()=>{n(Nn,""),n(kr,""),n("clear"),n(Sr,"")};return r.watch(()=>s.modelValue,()=>{var E;r.nextTick(()=>Se()),s.validateEvent&&((E=d==null?void 0:d.validate)==null||E.call(d,"change").catch(V=>void 0))}),r.watch(T,()=>$t()),r.watch(()=>s.type,async()=>{await r.nextTick(),$t(),Se()}),r.onMounted(()=>{!s.formatter&&s.parser,$t(),r.nextTick(Se)}),e({input:b,textarea:y,ref:P,textareaStyle:v,autosize:r.toRef(s,"autosize"),isComposing:ia,focus:Np,blur:$p,select:jp,clear:ha,resizeTextarea:Se}),(E,V)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass([r.unref(l),{[r.unref(f).bm("group","append")]:E.$slots.append,[r.unref(f).bm("group","prepend")]:E.$slots.prepend}]),style:r.normalizeStyle(r.unref(A)),onMouseenter:Bp,onMouseleave:Rp},[r.createCommentVNode(" input "),E.type!=="textarea"?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[r.createCommentVNode(" prepend slot "),E.$slots.prepend?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(r.unref(f).be("group","prepend"))},[r.renderSlot(E.$slots,"prepend")],2)):r.createCommentVNode("v-if",!0),r.createElementVNode("div",{ref_key:"wrapperRef",ref:I,class:r.normalizeClass(r.unref(c))},[r.createCommentVNode(" prefix slot "),E.$slots.prefix||E.prefixIcon?(r.openBlock(),r.createElementBlock("span",{key:0,class:r.normalizeClass(r.unref(f).e("prefix"))},[r.createElementVNode("span",{class:r.normalizeClass(r.unref(f).e("prefix-inner"))},[r.renderSlot(E.$slots,"prefix"),E.prefixIcon?(r.openBlock(),r.createBlock(r.unref(he),{key:0,class:r.normalizeClass(r.unref(f).e("icon"))},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(E.prefixIcon)))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0)],2)],2)):r.createCommentVNode("v-if",!0),r.createElementVNode("input",r.mergeProps({id:r.unref(h),ref_key:"input",ref:b,class:r.unref(f).e("inner")},r.unref(a),{name:E.name,minlength:E.minlength,maxlength:E.maxlength,type:E.showPassword?_.value?"text":"password":E.type,disabled:r.unref(g),readonly:E.readonly,autocomplete:E.autocomplete,tabindex:E.tabindex,"aria-label":E.ariaLabel,placeholder:E.placeholder,style:E.inputStyle,form:E.form,autofocus:E.autofocus,role:E.containerRole,inputmode:E.inputmode,onCompositionstart:r.unref(la),onCompositionupdate:r.unref(ca),onCompositionend:r.unref(ua),onInput:As,onChange:aa,onKeydown:da}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),r.createCommentVNode(" suffix slot "),r.unref(Is)?(r.openBlock(),r.createElementBlock("span",{key:1,class:r.normalizeClass(r.unref(f).e("suffix"))},[r.createElementVNode("span",{class:r.normalizeClass(r.unref(f).e("suffix-inner"))},[!r.unref(x)||!r.unref($)||!r.unref(W)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[r.renderSlot(E.$slots,"suffix"),E.suffixIcon?(r.openBlock(),r.createBlock(r.unref(he),{key:0,class:r.normalizeClass(r.unref(f).e("icon"))},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(E.suffixIcon)))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0)],64)):r.createCommentVNode("v-if",!0),r.unref(x)?(r.openBlock(),r.createBlock(r.unref(he),{key:1,class:r.normalizeClass([r.unref(f).e("icon"),r.unref(f).e("clear")]),onMousedown:r.withModifiers(r.unref(ft),["prevent"]),onClick:ha},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(E.clearIcon)))]),_:1},8,["class","onMousedown"])):r.createCommentVNode("v-if",!0),r.unref($)?(r.openBlock(),r.createBlock(r.unref(he),{key:2,class:r.normalizeClass([r.unref(f).e("icon"),r.unref(f).e("password")]),onClick:xp},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(ee))))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0),r.unref(W)?(r.openBlock(),r.createElementBlock("span",{key:3,class:r.normalizeClass(r.unref(f).e("count"))},[r.createElementVNode("span",{class:r.normalizeClass(r.unref(f).e("count-inner"))},r.toDisplayString(r.unref(ae))+" / "+r.toDisplayString(E.maxlength),3)],2)):r.createCommentVNode("v-if",!0),r.unref(C)&&r.unref(z)&&r.unref(w)?(r.openBlock(),r.createBlock(r.unref(he),{key:4,class:r.normalizeClass([r.unref(f).e("icon"),r.unref(f).e("validateIcon"),r.unref(f).is("loading",r.unref(C)==="validating")])},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(z))))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0)],2)],2)):r.createCommentVNode("v-if",!0)],2),r.createCommentVNode(" append slot "),E.$slots.append?(r.openBlock(),r.createElementBlock("div",{key:1,class:r.normalizeClass(r.unref(f).be("group","append"))},[r.renderSlot(E.$slots,"append")],2)):r.createCommentVNode("v-if",!0)],64)):(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createCommentVNode(" textarea "),r.createElementVNode("textarea",r.mergeProps({id:r.unref(h),ref_key:"textarea",ref:y,class:[r.unref(m).e("inner"),r.unref(f).is("focus",r.unref(L))]},r.unref(a),{minlength:E.minlength,maxlength:E.maxlength,tabindex:E.tabindex,disabled:r.unref(g),readonly:E.readonly,autocomplete:E.autocomplete,style:r.unref(v),"aria-label":E.ariaLabel,placeholder:E.placeholder,form:E.form,autofocus:E.autofocus,rows:E.rows,role:E.containerRole,onCompositionstart:r.unref(la),onCompositionupdate:r.unref(ca),onCompositionend:r.unref(ua),onInput:As,onFocus:r.unref(D),onBlur:r.unref(S),onChange:aa,onKeydown:da}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),r.unref(W)?(r.openBlock(),r.createElementBlock("span",{key:0,style:r.normalizeStyle(O.value),class:r.normalizeClass(r.unref(f).e("count"))},r.toDisplayString(r.unref(ae))+" / "+r.toDisplayString(E.maxlength),7)):r.createCommentVNode("v-if",!0)],64))],38))}});var ru=Ce(su,[["__file","input.vue"]]);const ou=Wt(ru),Dn="focus-trap.focus-after-trapped",Mn="focus-trap.focus-after-released",au="focus-trap.focusout-prevented",Ur={cancelable:!0,bubbles:!1},iu={cancelable:!0,bubbles:!1},Vr="focusAfterTrapped",Fr="focusAfterReleased",lu=Symbol("elFocusTrap"),Un=r.ref(),qt=r.ref(0),Vn=r.ref(0);let Gt=0;const zr=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},Wr=(t,e)=>{for(const n of t)if(!cu(n,e))return n},cu=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},uu=t=>{const e=zr(t),n=Wr(e,t),s=Wr(e.reverse(),t);return[n,s]},du=t=>t instanceof HTMLInputElement&&"select"in t,Te=(t,e)=>{if(t&&t.focus){const n=document.activeElement;let s=!1;_t(t)&&!Ln(t)&&!t.getAttribute("tabindex")&&(t.setAttribute("tabindex","-1"),s=!0),t.focus({preventScroll:!0}),Vn.value=window.performance.now(),t!==n&&du(t)&&e&&t.select(),_t(t)&&s&&t.removeAttribute("tabindex")}};function Hr(t,e){const n=[...t],s=t.indexOf(e);return s!==-1&&n.splice(s,1),n}const hu=()=>{let t=[];return{push:s=>{const o=t[0];o&&s!==o&&o.pause(),t=Hr(t,s),t.unshift(s)},remove:s=>{var o,a;t=Hr(t,s),(a=(o=t[0])==null?void 0:o.resume)==null||a.call(o)}}},fu=(t,e=!1)=>{const n=document.activeElement;for(const s of t)if(Te(s,e),document.activeElement!==n)return},Kr=hu(),pu=()=>qt.value>Vn.value,Jt=()=>{Un.value="pointer",qt.value=window.performance.now()},qr=()=>{Un.value="keyboard",qt.value=window.performance.now()},gu=()=>(r.onMounted(()=>{Gt===0&&(document.addEventListener("mousedown",Jt),document.addEventListener("touchstart",Jt),document.addEventListener("keydown",qr)),Gt++}),r.onBeforeUnmount(()=>{Gt--,Gt<=0&&(document.removeEventListener("mousedown",Jt),document.removeEventListener("touchstart",Jt),document.removeEventListener("keydown",qr))}),{focusReason:Un,lastUserFocusTimestamp:qt,lastAutomatedFocusTimestamp:Vn}),Yt=t=>new CustomEvent(au,{...iu,detail:t}),Xt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Ze=[];const Gr=t=>{t.code===Xt.esc&&Ze.forEach(e=>e(t))},mu=t=>{r.onMounted(()=>{Ze.length===0&&document.addEventListener("keydown",Gr),X&&Ze.push(t)}),r.onBeforeUnmount(()=>{Ze=Ze.filter(e=>e!==t),Ze.length===0&&X&&document.removeEventListener("keydown",Gr)})},yu=r.defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Vr,Fr,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=r.ref();let s,o;const{focusReason:a}=gu();mu(f=>{t.trapped&&!i.paused&&e("release-requested",f)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},l=f=>{if(!t.loop&&!t.trapped||i.paused)return;const{code:m,altKey:b,ctrlKey:y,metaKey:k,currentTarget:_,shiftKey:O}=f,{loop:N}=t,P=m===Xt.tab&&!b&&!y&&!k,I=document.activeElement;if(P&&I){const L=_,[D,S]=uu(L);if(D&&S){if(!O&&I===S){const C=Yt({focusReason:a.value});e("focusout-prevented",C),C.defaultPrevented||(f.preventDefault(),N&&Te(D,!0))}else if(O&&[D,L].includes(I)){const C=Yt({focusReason:a.value});e("focusout-prevented",C),C.defaultPrevented||(f.preventDefault(),N&&Te(S,!0))}}else if(I===L){const C=Yt({focusReason:a.value});e("focusout-prevented",C),C.defaultPrevented||f.preventDefault()}}};r.provide(lu,{focusTrapRef:n,onKeydown:l}),r.watch(()=>t.focusTrapEl,f=>{f&&(n.value=f)},{immediate:!0}),r.watch([n],([f],[m])=>{f&&(f.addEventListener("keydown",l),f.addEventListener("focusin",d),f.addEventListener("focusout",h)),m&&(m.removeEventListener("keydown",l),m.removeEventListener("focusin",d),m.removeEventListener("focusout",h))});const c=f=>{e(Vr,f)},u=f=>e(Fr,f),d=f=>{const m=r.unref(n);if(!m)return;const b=f.target,y=f.relatedTarget,k=b&&m.contains(b);t.trapped||y&&m.contains(y)||(s=y),k&&e("focusin",f),!i.paused&&t.trapped&&(k?o=b:Te(o,!0))},h=f=>{const m=r.unref(n);if(!(i.paused||!m))if(t.trapped){const b=f.relatedTarget;!Js(b)&&!m.contains(b)&&setTimeout(()=>{if(!i.paused&&t.trapped){const y=Yt({focusReason:a.value});e("focusout-prevented",y),y.defaultPrevented||Te(o,!0)}},0)}else{const b=f.target;b&&m.contains(b)||e("focusout",f)}};async function p(){await r.nextTick();const f=r.unref(n);if(f){Kr.push(i);const m=f.contains(document.activeElement)?s:document.activeElement;if(s=m,!f.contains(m)){const y=new Event(Dn,Ur);f.addEventListener(Dn,c),f.dispatchEvent(y),y.defaultPrevented||r.nextTick(()=>{let k=t.focusStartEl;se(k)||(Te(k),document.activeElement!==k&&(k="first")),k==="first"&&fu(zr(f),!0),(document.activeElement===m||k==="container")&&Te(f)})}}}function g(){const f=r.unref(n);if(f){f.removeEventListener(Dn,c);const m=new CustomEvent(Mn,{...Ur,detail:{focusReason:a.value}});f.addEventListener(Mn,u),f.dispatchEvent(m),!m.defaultPrevented&&(a.value=="keyboard"||!pu()||f.contains(document.activeElement))&&Te(s??document.body),f.removeEventListener(Mn,u),Kr.remove(i)}}return r.onMounted(()=>{t.trapped&&p(),r.watch(()=>t.trapped,f=>{f?p():g()})}),r.onBeforeUnmount(()=>{t.trapped&&g(),n.value&&(n.value.removeEventListener("keydown",l),n.value.removeEventListener("focusin",d),n.value.removeEventListener("focusout",h),n.value=void 0)}),{onKeydown:l}}});function _u(t,e,n,s,o,a){return r.renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var bu=Ce(yu,[["render",_u],["__file","focus-trap.vue"]]);const wu=_e({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:F([String,Object,Array])},offset:{type:F(Array),default:[0,0]},badgeClass:{type:String}}),vu=r.defineComponent({name:"ElBadge"}),ku=r.defineComponent({...vu,props:wu,setup(t,{expose:e}){const n=t,s=de("badge"),o=r.computed(()=>n.isDot?"":ye(n.value)&&ye(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`),a=r.computed(()=>{var i,l,c,u,d;return[{backgroundColor:n.color,marginRight:bt(-((l=(i=n.offset)==null?void 0:i[0])!=null?l:0)),marginTop:bt((u=(c=n.offset)==null?void 0:c[1])!=null?u:0)},(d=n.badgeStyle)!=null?d:{}]});return e({content:o}),(i,l)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(r.unref(s).b())},[r.renderSlot(i.$slots,"default"),r.createVNode(r.Transition,{name:`${r.unref(s).namespace.value}-zoom-in-center`,persisted:""},{default:r.withCtx(()=>[r.withDirectives(r.createElementVNode("sup",{class:r.normalizeClass([r.unref(s).e("content"),r.unref(s).em("content",i.type),r.unref(s).is("fixed",!!i.$slots.default),r.unref(s).is("dot",i.isDot),r.unref(s).is("hide-zero",!i.showZero&&n.value===0),i.badgeClass]),style:r.normalizeStyle(r.unref(a))},[r.renderSlot(i.$slots,"content",{value:r.unref(o)},()=>[r.createTextVNode(r.toDisplayString(r.unref(o)),1)])],6),[[r.vShow,!i.hidden&&(r.unref(o)||i.isDot||i.$slots.content)]])]),_:3},8,["name"])],2))}});var Su=Ce(ku,[["__file","badge.vue"]]);const Eu=Wt(Su),Jr=Symbol("buttonGroupContextKey"),Cu=({from:t,replacement:e,scope:n,version:s,ref:o,type:a="API"},i)=>{r.watch(()=>r.unref(i),l=>{},{immediate:!0})},Tu=(t,e)=>{Cu({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},r.computed(()=>t.type==="text"));const n=r.inject(Jr,void 0),s=xn("button"),{form:o}=jr(),a=Dr(r.computed(()=>n==null?void 0:n.size)),i=jn(),l=r.ref(),c=r.useSlots(),u=r.computed(()=>{var y;return t.type||(n==null?void 0:n.type)||((y=s.value)==null?void 0:y.type)||""}),d=r.computed(()=>{var y,k,_;return(_=(k=t.autoInsertSpace)!=null?k:(y=s.value)==null?void 0:y.autoInsertSpace)!=null?_:!1}),h=r.computed(()=>{var y,k,_;return(_=(k=t.plain)!=null?k:(y=s.value)==null?void 0:y.plain)!=null?_:!1}),p=r.computed(()=>{var y,k,_;return(_=(k=t.round)!=null?k:(y=s.value)==null?void 0:y.round)!=null?_:!1}),g=r.computed(()=>{var y,k,_;return(_=(k=t.text)!=null?k:(y=s.value)==null?void 0:y.text)!=null?_:!1}),f=r.computed(()=>t.tag==="button"?{ariaDisabled:i.value||t.loading,disabled:i.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),m=r.computed(()=>{var y;const k=(y=c.default)==null?void 0:y.call(c);if(d.value&&(k==null?void 0:k.length)===1){const _=k[0];if((_==null?void 0:_.type)===r.Text){const O=_.children;return/^\p{Unified_Ideograph}{2}$/u.test(O.trim())}}return!1});return{_disabled:i,_size:a,_type:u,_ref:l,_props:f,_plain:h,_round:p,_text:g,shouldAddSpace:m,handleClick:y=>{if(i.value||t.loading){y.stopPropagation();return}t.nativeType==="reset"&&(o==null||o.resetFields()),e("click",y)}}},Fn=_e({size:Pn,disabled:Boolean,type:{type:String,values:["default","primary","success","warning","info","danger","text",""],default:""},icon:{type:Xe},nativeType:{type:String,values:["button","submit","reset"],default:"button"},loading:Boolean,loadingIcon:{type:Xe,default:()=>Ht},plain:{type:Boolean,default:void 0},text:{type:Boolean,default:void 0},link:Boolean,bg:Boolean,autofocus:Boolean,round:{type:Boolean,default:void 0},circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:F([String,Object]),default:"button"}}),Ou={click:t=>t instanceof MouseEvent};function q(t,e){Iu(t)&&(t="100%");var n=Au(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Zt(t){return Math.min(1,Math.max(0,t))}function Iu(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Au(t){return typeof t=="string"&&t.indexOf("%")!==-1}function Yr(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Qt(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Ue(t){return t.length===1?"0"+t:String(t)}function Pu(t,e,n){return{r:q(t,255)*255,g:q(e,255)*255,b:q(n,255)*255}}function Xr(t,e,n){t=q(t,255),e=q(e,255),n=q(n,255);var s=Math.max(t,e,n),o=Math.min(t,e,n),a=0,i=0,l=(s+o)/2;if(s===o)i=0,a=0;else{var c=s-o;switch(i=l>.5?c/(2-s-o):c/(s+o),s){case t:a=(e-n)/c+(e<n?6:0);break;case e:a=(n-t)/c+2;break;case n:a=(t-e)/c+4;break}a/=6}return{h:a,s:i,l}}function zn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xu(t,e,n){var s,o,a;if(t=q(t,360),e=q(e,100),n=q(n,100),e===0)o=n,a=n,s=n;else{var i=n<.5?n*(1+e):n+e-n*e,l=2*n-i;s=zn(l,i,t+1/3),o=zn(l,i,t),a=zn(l,i,t-1/3)}return{r:s*255,g:o*255,b:a*255}}function Zr(t,e,n){t=q(t,255),e=q(e,255),n=q(n,255);var s=Math.max(t,e,n),o=Math.min(t,e,n),a=0,i=s,l=s-o,c=s===0?0:l/s;if(s===o)a=0;else{switch(s){case t:a=(e-n)/l+(e<n?6:0);break;case e:a=(n-t)/l+2;break;case n:a=(t-e)/l+4;break}a/=6}return{h:a,s:c,v:i}}function Nu(t,e,n){t=q(t,360)*6,e=q(e,100),n=q(n,100);var s=Math.floor(t),o=t-s,a=n*(1-e),i=n*(1-o*e),l=n*(1-(1-o)*e),c=s%6,u=[n,i,a,a,l,n][c],d=[l,n,n,i,a,a][c],h=[a,a,l,n,n,i][c];return{r:u*255,g:d*255,b:h*255}}function Qr(t,e,n,s){var o=[Ue(Math.round(t).toString(16)),Ue(Math.round(e).toString(16)),Ue(Math.round(n).toString(16))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function $u(t,e,n,s,o){var a=[Ue(Math.round(t).toString(16)),Ue(Math.round(e).toString(16)),Ue(Math.round(n).toString(16)),Ue(Ru(s))];return o&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Ru(t){return Math.round(parseFloat(t)*255).toString(16)}function eo(t){return te(t)/255}function te(t){return parseInt(t,16)}function Bu(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Wn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ju(t){var e={r:0,g:0,b:0},n=1,s=null,o=null,a=null,i=!1,l=!1;return typeof t=="string"&&(t=Mu(t)),typeof t=="object"&&(be(t.r)&&be(t.g)&&be(t.b)?(e=Pu(t.r,t.g,t.b),i=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):be(t.h)&&be(t.s)&&be(t.v)?(s=Qt(t.s),o=Qt(t.v),e=Nu(t.h,s,o),i=!0,l="hsv"):be(t.h)&&be(t.s)&&be(t.l)&&(s=Qt(t.s),a=Qt(t.l),e=xu(t.h,s,a),i=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=Yr(n),{ok:i,format:t.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Lu="[-\\+]?\\d+%?",Du="[-\\+]?\\d*\\.\\d+%?",Oe="(?:".concat(Du,")|(?:").concat(Lu,")"),Hn="[\\s|\\(]+(".concat(Oe,")[,|\\s]+(").concat(Oe,")[,|\\s]+(").concat(Oe,")\\s*\\)?"),Kn="[\\s|\\(]+(".concat(Oe,")[,|\\s]+(").concat(Oe,")[,|\\s]+(").concat(Oe,")[,|\\s]+(").concat(Oe,")\\s*\\)?"),ie={CSS_UNIT:new RegExp(Oe),rgb:new RegExp("rgb"+Hn),rgba:new RegExp("rgba"+Kn),hsl:new RegExp("hsl"+Hn),hsla:new RegExp("hsla"+Kn),hsv:new RegExp("hsv"+Hn),hsva:new RegExp("hsva"+Kn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Mu(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(Wn[t])t=Wn[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=ie.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=ie.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ie.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=ie.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ie.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=ie.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ie.hex8.exec(t),n?{r:te(n[1]),g:te(n[2]),b:te(n[3]),a:eo(n[4]),format:e?"name":"hex8"}:(n=ie.hex6.exec(t),n?{r:te(n[1]),g:te(n[2]),b:te(n[3]),format:e?"name":"hex"}:(n=ie.hex4.exec(t),n?{r:te(n[1]+n[1]),g:te(n[2]+n[2]),b:te(n[3]+n[3]),a:eo(n[4]+n[4]),format:e?"name":"hex8"}:(n=ie.hex3.exec(t),n?{r:te(n[1]+n[1]),g:te(n[2]+n[2]),b:te(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function be(t){return!!ie.CSS_UNIT.exec(String(t))}var Uu=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var s;if(e instanceof t)return e;typeof e=="number"&&(e=Bu(e)),this.originalInput=e;var o=ju(e);this.originalInput=e,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=n.format)!==null&&s!==void 0?s:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,s,o,a=e.r/255,i=e.g/255,l=e.b/255;return a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),l<=.03928?o=l/12.92:o=Math.pow((l+.055)/1.055,2.4),.2126*n+.7152*s+.0722*o},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=Yr(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=Zr(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=Zr(this.r,this.g,this.b),n=Math.round(e.h*360),s=Math.round(e.s*100),o=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(s,"%, ").concat(o,"%)"):"hsva(".concat(n,", ").concat(s,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=Xr(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=Xr(this.r,this.g,this.b),n=Math.round(e.h*360),s=Math.round(e.s*100),o=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(s,"%, ").concat(o,"%)"):"hsla(".concat(n,", ").concat(s,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),Qr(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),$u(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(s,")"):"rgba(".concat(e,", ").concat(n,", ").concat(s,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(q(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(q(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Qr(this.r,this.g,this.b,!1),n=0,s=Object.entries(Wn);n<s.length;n++){var o=s[n],a=o[0],i=o[1];if(e===i)return a}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var s=!1,o=this.a<1&&this.a>=0,a=!n&&o&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(s=this.toRgbString()),e==="prgb"&&(s=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(s=this.toHexString()),e==="hex3"&&(s=this.toHexString(!0)),e==="hex4"&&(s=this.toHex8String(!0)),e==="hex8"&&(s=this.toHex8String()),e==="name"&&(s=this.toName()),e==="hsl"&&(s=this.toHslString()),e==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Zt(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Zt(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Zt(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Zt(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),s=(n.h+e)%360;return n.h=s<0?360+s:s,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var s=this.toRgb(),o=new t(e).toRgb(),a=n/100,i={r:(o.r-s.r)*a+s.r,g:(o.g-s.g)*a+s.g,b:(o.b-s.b)*a+s.b,a:(o.a-s.a)*a+s.a};return new t(i)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var s=this.toHsl(),o=360/n,a=[this];for(s.h=(s.h-(o*e>>1)+720)%360;--e;)s.h=(s.h+o)%360,a.push(new t(s));return a},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),s=n.h,o=n.s,a=n.v,i=[],l=1/e;e--;)i.push(new t({h:s,s:o,v:a})),a=(a+l)%1;return i},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),s=new t(e).toRgb(),o=n.a+s.a*(1-n.a);return new t({r:(n.r*n.a+s.r*s.a*(1-n.a))/o,g:(n.g*n.a+s.g*s.a*(1-n.a))/o,b:(n.b*n.a+s.b*s.a*(1-n.a))/o,a:o})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),s=n.h,o=[this],a=360/e,i=1;i<e;i++)o.push(new t({h:(s+i*a)%360,s:n.s,l:n.l}));return o},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Ie(t,e=20){return t.mix("#141414",e).toString()}function Vu(t){const e=jn(),n=de("button");return r.computed(()=>{let s={},o=t.color;if(o){const a=o.match(/var\((.*?)\)/);a&&(o=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const i=new Uu(o),l=t.dark?i.tint(20).toString():Ie(i,20);if(t.plain)s=n.cssVarBlock({"bg-color":t.dark?Ie(i,90):i.tint(90).toString(),"text-color":o,"border-color":t.dark?Ie(i,50):i.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":o,"hover-border-color":o,"active-bg-color":l,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":l}),e.value&&(s[n.cssVarBlockName("disabled-bg-color")]=t.dark?Ie(i,90):i.tint(90).toString(),s[n.cssVarBlockName("disabled-text-color")]=t.dark?Ie(i,50):i.tint(50).toString(),s[n.cssVarBlockName("disabled-border-color")]=t.dark?Ie(i,80):i.tint(80).toString());else{const c=t.dark?Ie(i,30):i.tint(30).toString(),u=i.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(s=n.cssVarBlock({"bg-color":o,"text-color":u,"border-color":o,"hover-bg-color":c,"hover-text-color":u,"hover-border-color":c,"active-bg-color":l,"active-border-color":l}),e.value){const d=t.dark?Ie(i,50):i.tint(50).toString();s[n.cssVarBlockName("disabled-bg-color")]=d,s[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,s[n.cssVarBlockName("disabled-border-color")]=d}}}return s})}const Fu=r.defineComponent({name:"ElButton"}),zu=r.defineComponent({...Fu,props:Fn,emits:Ou,setup(t,{expose:e,emit:n}){const s=t,o=Vu(s),a=de("button"),{_ref:i,_size:l,_type:c,_disabled:u,_props:d,_plain:h,_round:p,_text:g,shouldAddSpace:f,handleClick:m}=Tu(s,n),b=r.computed(()=>[a.b(),a.m(c.value),a.m(l.value),a.is("disabled",u.value),a.is("loading",s.loading),a.is("plain",h.value),a.is("round",p.value),a.is("circle",s.circle),a.is("text",g.value),a.is("link",s.link),a.is("has-bg",s.bg)]);return e({ref:i,size:l,type:c,disabled:u,shouldAddSpace:f}),(y,k)=>(r.openBlock(),r.createBlock(r.resolveDynamicComponent(y.tag),r.mergeProps({ref_key:"_ref",ref:i},r.unref(d),{class:r.unref(b),style:r.unref(o),onClick:r.unref(m)}),{default:r.withCtx(()=>[y.loading?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[y.$slots.loading?r.renderSlot(y.$slots,"loading",{key:0}):(r.openBlock(),r.createBlock(r.unref(he),{key:1,class:r.normalizeClass(r.unref(a).is("loading"))},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(y.loadingIcon)))]),_:1},8,["class"]))],64)):y.icon||y.$slots.icon?(r.openBlock(),r.createBlock(r.unref(he),{key:1},{default:r.withCtx(()=>[y.icon?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(y.icon),{key:0})):r.renderSlot(y.$slots,"icon",{key:1})]),_:3})):r.createCommentVNode("v-if",!0),y.$slots.default?(r.openBlock(),r.createElementBlock("span",{key:2,class:r.normalizeClass({[r.unref(a).em("text","expand")]:r.unref(f)})},[r.renderSlot(y.$slots,"default")],2)):r.createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Wu=Ce(zu,[["__file","button.vue"]]);const Hu={size:Fn.size,type:Fn.type},Ku=r.defineComponent({name:"ElButtonGroup"}),qu=r.defineComponent({...Ku,props:Hu,setup(t){const e=t;r.provide(Jr,r.reactive({size:r.toRef(e,"size"),type:r.toRef(e,"type")}));const n=de("button");return(s,o)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(r.unref(n).b("group"))},[r.renderSlot(s.$slots,"default")],2))}});var to=Ce(qu,[["__file","button-group.vue"]]);const Gu=Wt(Wu,{ButtonGroup:to});hc(to);var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ju(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),n}var en=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(en||{});const Yu=_e({a11y:{type:Boolean,default:!0},locale:{type:F(Object)},size:Pn,button:{type:F(Object)},card:{type:F(Object)},dialog:{type:F(Object)},link:{type:F(Object)},experimentalFeatures:{type:F(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:F(Object)},zIndex:Number,namespace:{type:String,default:"el"},...sc}),G={placement:"top"};r.defineComponent({name:"ElConfigProvider",props:Yu,setup(t,{slots:e}){const n=vr(t);return r.watch(()=>t.message,s=>{var o,a;Object.assign(G,(a=(o=n==null?void 0:n.value)==null?void 0:o.message)!=null?a:{},s??{})},{immediate:!0,deep:!0}),()=>r.renderSlot(e,"default",{config:n==null?void 0:n.value})}});const no=t=>{if(!t)return{onClick:ft,onMousedown:ft,onMouseup:ft};let e=!1,n=!1;return{onClick:i=>{e&&n&&t(i),e=n=!1},onMousedown:i=>{e=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Xu=_e({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:F([String,Array,Object])},zIndex:{type:F([String,Number])}}),Zu={click:t=>t instanceof MouseEvent},Qu="overlay";var ed=r.defineComponent({name:"ElOverlay",props:Xu,emits:Zu,setup(t,{slots:e,emit:n}){const s=de(Qu),o=c=>{n("click",c)},{onClick:a,onMousedown:i,onMouseup:l}=no(t.customMaskEvent?void 0:o);return()=>t.mask?r.createVNode("div",{class:[s.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:a,onMousedown:i,onMouseup:l},[r.renderSlot(e,"default")],en.STYLE|en.CLASS|en.PROPS,["onClick","onMouseup","onMousedown"]):r.h("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[r.renderSlot(e,"default")])}});const td=ed,nd=(t,e,n,s)=>{const o={offsetX:0,offsetY:0},a=r.ref(!1),i=(p,g)=>{if(t.value){const{offsetX:f,offsetY:m}=o,b=t.value.getBoundingClientRect(),y=b.left,k=b.top,_=b.width,O=b.height,N=document.documentElement.clientWidth,P=document.documentElement.clientHeight,I=-y+f,L=-k+m,D=N-y-_+f,S=P-k-(O<P?O:0)+m;s!=null&&s.value||(p=Math.min(Math.max(p,I),D),g=Math.min(Math.max(g,L),S)),o.offsetX=p,o.offsetY=g,t.value.style.transform=`translate(${bt(p)}, ${bt(g)})`}},l=p=>{const g=p.clientX,f=p.clientY,{offsetX:m,offsetY:b}=o,y=_=>{a.value||(a.value=!0);const O=m+_.clientX-g,N=b+_.clientY-f;i(O,N)},k=()=>{a.value=!1,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",k)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",k)},c=()=>{e.value&&t.value&&(e.value.addEventListener("mousedown",l),window.addEventListener("resize",h))},u=()=>{e.value&&t.value&&(e.value.removeEventListener("mousedown",l),window.removeEventListener("resize",h))},d=()=>{o.offsetX=0,o.offsetY=0,t.value&&(t.value.style.transform="")},h=()=>{const{offsetX:p,offsetY:g}=o;i(p,g)};return r.onMounted(()=>{r.watchEffect(()=>{n.value?c():u()})}),r.onBeforeUnmount(()=>{u()}),{isDragging:a,resetPosition:d,updatePosition:h}},sd=(t,e={})=>{r.isRef(t)||uc("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||de("popup"),s=r.computed(()=>n.bm("parent","hidden"));if(!X||Cr(document.body,s.value))return;let o=0,a=!1,i="0";const l=()=>{setTimeout(()=>{typeof document>"u"||a&&document&&(document.body.style.width=i,ac(document.body,s.value))},200)};r.watch(t,c=>{if(!c){l();return}a=!Cr(document.body,s.value),a&&(i=document.body.style.width,oc(document.body,s.value)),o=lc(n.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,d=ic(document.body,"overflowY");o>0&&(u||d==="scroll")&&a&&(document.body.style.width=`calc(100% - ${o}px)`)}),r.onScopeDispose(()=>l())},rd=t=>["",...yr].includes(t),so=["primary","success","info","warning","error"],ro=["top","top-left","top-right","bottom","bottom-left","bottom-right"],Qe="top",J=$r({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,placement:void 0,zIndex:0,grouping:!1,repeatNum:1,appendTo:X?document.body:void 0}),od=_e({customClass:{type:String,default:J.customClass},dangerouslyUseHTMLString:{type:Boolean,default:J.dangerouslyUseHTMLString},duration:{type:Number,default:J.duration},icon:{type:Xe,default:J.icon},id:{type:String,default:J.id},message:{type:F([String,Object,Function]),default:J.message},onClose:{type:F(Function),default:J.onClose},showClose:{type:Boolean,default:J.showClose},type:{type:String,values:so,default:J.type},plain:{type:Boolean,default:J.plain},offset:{type:Number,default:J.offset},placement:{type:String,values:ro,default:J.placement},zIndex:{type:Number,default:J.zIndex},grouping:{type:Boolean,default:J.grouping},repeatNum:{type:Number,default:J.repeatNum}}),ad={destroy:()=>!0},le=r.shallowReactive({}),id=t=>(le[t]||(le[t]=r.shallowReactive([])),le[t]),ld=(t,e)=>{const n=le[e]||[],s=n.findIndex(i=>i.id===t),o=n[s];let a;return s>0&&(a=n[s-1]),{current:o,prev:a}},cd=(t,e)=>{const{prev:n}=ld(t,e);return n?n.vm.exposed.bottom.value:0},ud=(t,e,n)=>(le[n]||[]).findIndex(a=>a.id===t)>0?16:e,dd=r.defineComponent({name:"ElMessage"}),hd=r.defineComponent({...dd,props:od,emits:ad,setup(t,{expose:e,emit:n}){const s=t,{Close:o}=xr,a=r.ref(!1),{ns:i,zIndex:l}=wr("message"),{currentZIndex:c,nextZIndex:u}=l,d=r.ref(),h=r.ref(!1),p=r.ref(0);let g;const f=r.computed(()=>s.type?s.type==="error"?"danger":s.type:"info"),m=r.computed(()=>{const C=s.type;return{[i.bm("icon",C)]:C&&Kt[C]}}),b=r.computed(()=>s.icon||Kt[s.type]||""),y=r.computed(()=>s.placement||Qe),k=r.computed(()=>cd(s.id,y.value)),_=r.computed(()=>ud(s.id,s.offset,y.value)+k.value),O=r.computed(()=>p.value+_.value),N=r.computed(()=>y.value.includes("left")?i.is("left"):y.value.includes("right")?i.is("right"):i.is("center")),P=r.computed(()=>y.value.startsWith("top")?"top":"bottom"),I=r.computed(()=>({[P.value]:`${_.value}px`,zIndex:c.value}));function L(){s.duration!==0&&({stop:g}=Ml(()=>{S()},s.duration))}function D(){g==null||g()}function S(){h.value=!1,r.nextTick(()=>{var C;a.value||((C=s.onClose)==null||C.call(s),n("destroy"))})}function w({code:C}){C===Xt.esc&&S()}return r.onMounted(()=>{L(),u(),h.value=!0}),r.watch(()=>s.repeatNum,()=>{D(),L()}),Vt(document,"keydown",w),or(d,()=>{p.value=d.value.getBoundingClientRect().height}),e({visible:h,bottom:O,close:S}),(C,z)=>(r.openBlock(),r.createBlock(r.Transition,{name:r.unref(i).b("fade"),onBeforeEnter:ee=>a.value=!0,onBeforeLeave:C.onClose,onAfterLeave:ee=>C.$emit("destroy"),persisted:""},{default:r.withCtx(()=>[r.withDirectives(r.createElementVNode("div",{id:C.id,ref_key:"messageRef",ref:d,class:r.normalizeClass([r.unref(i).b(),{[r.unref(i).m(C.type)]:C.type},r.unref(i).is("closable",C.showClose),r.unref(i).is("plain",C.plain),r.unref(i).is("bottom",r.unref(P)==="bottom"),r.unref(N),C.customClass]),style:r.normalizeStyle(r.unref(I)),role:"alert",onMouseenter:D,onMouseleave:L},[C.repeatNum>1?(r.openBlock(),r.createBlock(r.unref(Eu),{key:0,value:C.repeatNum,type:r.unref(f),class:r.normalizeClass(r.unref(i).e("badge"))},null,8,["value","type","class"])):r.createCommentVNode("v-if",!0),r.unref(b)?(r.openBlock(),r.createBlock(r.unref(he),{key:1,class:r.normalizeClass([r.unref(i).e("icon"),r.unref(m)])},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(b))))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0),r.renderSlot(C.$slots,"default",{},()=>[C.dangerouslyUseHTMLString?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),r.createElementVNode("p",{class:r.normalizeClass(r.unref(i).e("content")),innerHTML:C.message},null,10,["innerHTML"])],2112)):(r.openBlock(),r.createElementBlock("p",{key:0,class:r.normalizeClass(r.unref(i).e("content"))},r.toDisplayString(C.message),3))]),C.showClose?(r.openBlock(),r.createBlock(r.unref(he),{key:2,class:r.normalizeClass(r.unref(i).e("closeBtn")),onClick:r.withModifiers(S,["stop"])},{default:r.withCtx(()=>[r.createVNode(r.unref(o))]),_:1},8,["class","onClick"])):r.createCommentVNode("v-if",!0)],46,["id"]),[[r.vShow,h.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var fd=Ce(hd,[["__file","message.vue"]]);let pd=1;const gd=t=>{if(!t.appendTo)t.appendTo=document.body;else if(se(t.appendTo)){let n=document.querySelector(t.appendTo);_t(n)||(n=document.body),t.appendTo=n}},md=t=>{!t.placement&&se(G.placement)&&G.placement&&(t.placement=G.placement),t.placement||(t.placement=Qe),ro.includes(t.placement)||(`${t.placement}${Qe}`,t.placement=Qe)},oo=t=>{const e=!t||se(t)||r.isVNode(t)||me(t)?{message:t}:t,n={...J,...e};return gd(n),md(n),Tn(G.grouping)&&!n.grouping&&(n.grouping=G.grouping),ye(G.duration)&&n.duration===3e3&&(n.duration=G.duration),ye(G.offset)&&n.offset===16&&(n.offset=G.offset),Tn(G.showClose)&&!n.showClose&&(n.showClose=G.showClose),Tn(G.plain)&&!n.plain&&(n.plain=G.plain),n},yd=t=>{const e=t.props.placement||Qe,n=le[e],s=n.indexOf(t);if(s===-1)return;n.splice(s,1);const{handler:o}=t;o.close()},_d=({appendTo:t,...e},n)=>{const s=`message_${pd++}`,o=e.onClose,a=document.createElement("div"),i={...e,id:s,onClose:()=>{o==null||o(),yd(d)},onDestroy:()=>{r.render(null,a)}},l=r.createVNode(fd,i,me(i.message)||r.isVNode(i.message)?{default:me(i.message)?i.message:()=>i.message}:null);l.appContext=n||Ve._context,r.render(l,a),t.appendChild(a.firstElementChild);const c=l.component,d={id:s,vnode:l,vm:c,handler:{close:()=>{c.exposed.close()}},props:l.component.props};return d},Ve=(t={},e)=>{if(!X)return{close:()=>{}};const n=oo(t),s=id(n.placement||Qe);if(n.grouping&&s.length){const a=s.find(({vnode:i})=>{var l;return((l=i.props)==null?void 0:l.message)===n.message});if(a)return a.props.repeatNum+=1,a.props.type=n.type,a.handler}if(ye(G.max)&&s.length>=G.max)return{close:()=>{}};const o=_d(n,e);return s.push(o),o.handler};so.forEach(t=>{Ve[t]=(e={},n)=>{const s=oo(e);return Ve({...s,type:t},n)}});function bd(t){for(const e in le)if(pt(le,e)){const n=[...le[e]];for(const s of n)(!t||t===s.props.type)&&s.handler.close()}}function wd(t){if(!le[t])return;[...le[t]].forEach(n=>n.handler.close())}Ve.closeAll=bd,Ve.closeAllByPlacement=wd,Ve._context=null;const tn=dc(Ve,"$message"),qn="_trap-focus-children",Fe=[],ao=t=>{if(Fe.length===0)return;const e=Fe[Fe.length-1][qn];if(e.length>0&&t.code===Xt.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,s=t.target===e[0],o=t.target===e[e.length-1];s&&n&&(t.preventDefault(),e[e.length-1].focus()),o&&!n&&(t.preventDefault(),e[0].focus())}},vd={beforeMount(t){t[qn]=Mr(t),Fe.push(t),Fe.length<=1&&document.addEventListener("keydown",ao)},updated(t){r.nextTick(()=>{t[qn]=Mr(t)})},unmounted(){Fe.shift(),Fe.length===0&&document.removeEventListener("keydown",ao)}},kd=r.defineComponent({name:"ElMessageBox",directives:{TrapFocus:vd},components:{ElButton:Gu,ElFocusTrap:bu,ElInput:ou,ElOverlay:td,ElIcon:he,...xr},inheritAttrs:!1,props:{buttonSize:{type:String,validator:rd},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:s,ns:o,size:a}=wr("message-box",r.computed(()=>t.buttonSize)),{t:i}=n,{nextZIndex:l}=s,c=r.ref(!1),u=r.reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:r.markRaw(Ht),cancelButtonLoadingIcon:r.markRaw(Ht),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),d=r.computed(()=>{const T=u.type;return{[o.bm("icon",T)]:T&&Kt[T]}}),h=Rn(),p=Rn(),g=r.computed(()=>{const T=u.type;return u.icon||T&&Kt[T]||""}),f=r.computed(()=>!!u.message),m=r.ref(),b=r.ref(),y=r.ref(),k=r.ref(),_=r.ref(),O=r.computed(()=>u.confirmButtonClass);r.watch(()=>u.inputValue,async T=>{await r.nextTick(),t.boxType==="prompt"&&T&&z()},{immediate:!0}),r.watch(()=>c.value,T=>{var x,$;T&&(t.boxType!=="prompt"&&(u.autofocus?y.value=($=(x=_.value)==null?void 0:x.$el)!=null?$:m.value:y.value=m.value),u.zIndex=l()),t.boxType==="prompt"&&(T?r.nextTick().then(()=>{var W;k.value&&k.value.$el&&(u.autofocus?y.value=(W=ee())!=null?W:m.value:y.value=m.value)}):(u.editorErrorMessage="",u.validateError=!1))});const N=r.computed(()=>t.draggable),P=r.computed(()=>t.overflow),{isDragging:I}=nd(m,b,N,P);r.onMounted(async()=>{await r.nextTick(),t.closeOnHashChange&&window.addEventListener("hashchange",L)}),r.onBeforeUnmount(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",L)});function L(){c.value&&(c.value=!1,r.nextTick(()=>{u.action&&e("action",u.action)}))}const D=()=>{t.closeOnClickModal&&C(u.distinguishCancelAndClose?"close":"cancel")},S=no(D),w=T=>{if(u.inputType!=="textarea")return T.preventDefault(),C("confirm")},C=T=>{var x;t.boxType==="prompt"&&T==="confirm"&&!z()||(u.action=T,u.beforeClose?(x=u.beforeClose)==null||x.call(u,T,u,L):L())},z=()=>{if(t.boxType==="prompt"){const T=u.inputPattern;if(T&&!T.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||i("el.messagebox.error"),u.validateError=!0,!1;const x=u.inputValidator;if(me(x)){const $=x(u.inputValue);if($===!1)return u.editorErrorMessage=u.inputErrorMessage||i("el.messagebox.error"),u.validateError=!0,!1;if(se($))return u.editorErrorMessage=$,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},ee=()=>{var T,x;const $=(T=k.value)==null?void 0:T.$refs;return(x=$==null?void 0:$.input)!=null?x:$==null?void 0:$.textarea},A=()=>{C("close")},v=()=>{t.closeOnPressEscape&&A()};return t.lockScroll&&sd(c),{...r.toRefs(u),ns:o,overlayEvent:S,visible:c,hasMessage:f,typeClass:d,contentId:h,inputId:p,btnSize:a,iconComponent:g,confirmButtonClasses:O,rootRef:m,focusStartRef:y,headerRef:b,inputRef:k,isDragging:I,confirmRef:_,doClose:L,handleClose:A,onCloseRequested:v,handleWrapperClick:D,handleInputEnter:w,handleAction:C,t:i}}});function Sd(t,e,n,s,o,a){const i=r.resolveComponent("el-icon"),l=r.resolveComponent("el-input"),c=r.resolveComponent("el-button"),u=r.resolveComponent("el-focus-trap"),d=r.resolveComponent("el-overlay");return r.openBlock(),r.createBlock(r.Transition,{name:"fade-in-linear",onAfterLeave:h=>t.$emit("vanish"),persisted:""},{default:r.withCtx(()=>[r.withDirectives(r.createVNode(d,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:r.withCtx(()=>[r.createElementVNode("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:r.normalizeClass(`${t.ns.namespace.value}-overlay-message-box`),onClick:t.overlayEvent.onClick,onMousedown:t.overlayEvent.onMousedown,onMouseup:t.overlayEvent.onMouseup},[r.createVNode(u,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:r.withCtx(()=>[r.createElementVNode("div",{ref:"rootRef",class:r.normalizeClass([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),t.ns.is("dragging",t.isDragging),{[t.ns.m("center")]:t.center}]),style:r.normalizeStyle(t.customStyle),tabindex:"-1",onClick:r.withModifiers(()=>{},["stop"])},[t.title!==null&&t.title!==void 0?(r.openBlock(),r.createElementBlock("div",{key:0,ref:"headerRef",class:r.normalizeClass([t.ns.e("header"),{"show-close":t.showClose}])},[r.createElementVNode("div",{class:r.normalizeClass(t.ns.e("title"))},[t.iconComponent&&t.center?(r.openBlock(),r.createBlock(i,{key:0,class:r.normalizeClass([t.ns.e("status"),t.typeClass])},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0),r.createElementVNode("span",null,r.toDisplayString(t.title),1)],2),t.showClose?(r.openBlock(),r.createElementBlock("button",{key:0,type:"button",class:r.normalizeClass(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:h=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),onKeydown:r.withKeys(r.withModifiers(h=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[r.createVNode(i,{class:r.normalizeClass(t.ns.e("close"))},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(t.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):r.createCommentVNode("v-if",!0)],2)):r.createCommentVNode("v-if",!0),r.createElementVNode("div",{id:t.contentId,class:r.normalizeClass(t.ns.e("content"))},[r.createElementVNode("div",{class:r.normalizeClass(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(r.openBlock(),r.createBlock(i,{key:0,class:r.normalizeClass([t.ns.e("status"),t.typeClass])},{default:r.withCtx(()=>[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):r.createCommentVNode("v-if",!0),t.hasMessage?(r.openBlock(),r.createElementBlock("div",{key:1,class:r.normalizeClass(t.ns.e("message"))},[r.renderSlot(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0,textContent:r.toDisplayString(t.message)},null,8,["for","textContent"]))])],2)):r.createCommentVNode("v-if",!0)],2),r.withDirectives(r.createElementVNode("div",{class:r.normalizeClass(t.ns.e("input"))},[r.createVNode(l,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":h=>t.inputValue=h,type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:r.normalizeClass({invalid:t.validateError}),onKeydown:r.withKeys(t.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),r.createElementVNode("div",{class:r.normalizeClass(t.ns.e("errormsg")),style:r.normalizeStyle({visibility:t.editorErrorMessage?"visible":"hidden"})},r.toDisplayString(t.editorErrorMessage),7)],2),[[r.vShow,t.showInput]])],10,["id"]),r.createElementVNode("div",{class:r.normalizeClass(t.ns.e("btns"))},[t.showCancelButton?(r.openBlock(),r.createBlock(c,{key:0,loading:t.cancelButtonLoading,"loading-icon":t.cancelButtonLoadingIcon,class:r.normalizeClass([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:h=>t.handleAction("cancel"),onKeydown:r.withKeys(r.withModifiers(h=>t.handleAction("cancel"),["prevent"]),["enter"])},{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):r.createCommentVNode("v-if",!0),r.withDirectives(r.createVNode(c,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,"loading-icon":t.confirmButtonLoadingIcon,class:r.normalizeClass([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:h=>t.handleAction("confirm"),onKeydown:r.withKeys(r.withModifiers(h=>t.handleAction("confirm"),["prevent"]),["enter"])},{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[r.vShow,t.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[r.vShow,t.visible]])]),_:3},8,["onAfterLeave"])}var Ed=Ce(kd,[["render",Sd],["__file","index.vue"]]);const wt=new Map,Cd=t=>{let e=document.body;return t.appendTo&&(se(t.appendTo)&&(e=document.querySelector(t.appendTo)),_t(t.appendTo)&&(e=t.appendTo),_t(e)||(e=document.body)),e},Td=(t,e,n=null)=>{const s=r.createVNode(Ed,t,me(t.message)||r.isVNode(t.message)?{default:me(t.message)?t.message:()=>t.message}:null);return s.appContext=n,r.render(s,e),Cd(t).appendChild(e.firstElementChild),s.component},Od=()=>document.createElement("div"),Id=(t,e)=>{const n=Od();t.onVanish=()=>{r.render(null,n),wt.delete(o)},t.onAction=a=>{const i=wt.get(o);let l;t.showInput?l={value:o.inputValue,action:a}:l=a,t.callback?t.callback(l,s.proxy):a==="cancel"||a==="close"?t.distinguishCancelAndClose&&a!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(l)};const s=Td(t,n,e),o=s.proxy;for(const a in t)pt(t,a)&&!pt(o.$props,a)&&(a==="closeIcon"&&Je(t[a])?o[a]=r.markRaw(t[a]):o[a]=t[a]);return o.visible=!0,o};function et(t,e=null){if(!X)return Promise.reject();let n;return se(t)||r.isVNode(t)?t={message:t}:n=t.callback,new Promise((s,o)=>{const a=Id(t,e??et._context);wt.set(a,{options:t,callback:n,resolve:s,reject:o})})}const Ad=["alert","confirm","prompt"],Pd={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Ad.forEach(t=>{et[t]=xd(t)});function xd(t){return(e,n,s,o)=>{let a="";return Je(n)?(s=n,a=""):Ys(n)?a="":a=n,et(Object.assign({title:a,message:e,type:"",...Pd[t]},s,{boxType:t}),o)}}et.close=()=>{wt.forEach((t,e)=>{e.doClose()}),wt.clear()},et._context=null;const Ae=et;Ae.install=t=>{Ae._context=t._context,t.config.globalProperties.$msgbox=Ae,t.config.globalProperties.$messageBox=Ae,t.config.globalProperties.$alert=Ae.alert,t.config.globalProperties.$confirm=Ae.confirm,t.config.globalProperties.$prompt=Ae.prompt};const io=Ae,Nd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>nt).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class Gn extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class $d extends Gn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lo extends Gn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class co extends Gn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jn||(Jn={}));var Rd=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Bd{constructor(e,{headers:n={},customFetch:s,region:o=Jn.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=Nd(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return Rd(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:i}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(m=>{throw new $d(m)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new lo(h);if(!h.ok)throw new co(h);let g=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return g==="application/json"?f=yield h.json():g==="application/octet-stream"?f=yield h.blob():g==="text/event-stream"?f=h:g==="multipart/form-data"?f=yield h.formData():f=yield h.text(),{data:f,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof co||o instanceof lo?o.context:void 0}}})}}var Q={},Yn={},nn={},vt={},sn={},rn={},jd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},tt=jd();const Ld=tt.fetch,uo=tt.fetch.bind(tt),ho=tt.Headers,Dd=tt.Request,Md=tt.Response,nt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ho,Request:Dd,Response:Md,default:uo,fetch:Ld},Symbol.toStringTag,{value:"Module"})),Ud=Ju(nt);var on={};Object.defineProperty(on,"__esModule",{value:!0});let Vd=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};on.default=Vd;var fo=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rn,"__esModule",{value:!0});const Fd=fo(Ud),zd=fo(on);let Wd=class{constructor(e){var n,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c,u;let d=null,h=null,p=null,g=a.status,f=a.statusText;if(a.ok){if(this.method!=="HEAD"){const k=await a.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=k:h=JSON.parse(k))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&y&&y.length>1&&(p=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,g=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await a.text();try{d=JSON.parse(b),Array.isArray(d)&&a.status===404&&(h=[],d=null,g=200,f="OK")}catch{a.status===404&&b===""?(g=204,f="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,f="OK"),d&&this.shouldThrowOnError)throw new zd.default(d)}return{error:d,data:h,count:p,status:g,statusText:f}});return this.shouldThrowOnError||(o=o.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};rn.default=Wd;var Hd=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sn,"__esModule",{value:!0});const Kd=Hd(rn);let qd=class extends Kd.default{select(e){let n=!1;const s=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:o,referencedTable:a=o}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:o=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,s?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};sn.default=qd;var Gd=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vt,"__esModule",{value:!0});const Jd=Gd(sn);let Yd=class extends Jd.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const o=s?`${s}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};vt.default=Yd;var Xd=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nn,"__esModule",{value:!0});const kt=Xd(vt);let Zd=class{constructor(e,{headers:n={},schema:s,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=s,this.fetch=o}select(e,{head:n=!1,count:s}={}){const o=n?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer",`count=${s}`),new kt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:s=!0}={}){var o;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new kt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:o,defaultToNull:a=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new kt.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var s;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new kt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var n;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new kt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};nn.default=Zd;var po=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yn,"__esModule",{value:!0});const Qd=po(nn),eh=po(vt);let th=class ga{constructor(e,{headers:n={},schema:s,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new Qd.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ga(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:o=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;s||o?(l=s?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",u=n);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new eh.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Yn.default=th;var st=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.PostgrestError=Q.PostgrestBuilder=Q.PostgrestTransformBuilder=Q.PostgrestFilterBuilder=Q.PostgrestQueryBuilder=Q.PostgrestClient=void 0;const go=st(Yn);Q.PostgrestClient=go.default;const mo=st(nn);Q.PostgrestQueryBuilder=mo.default;const yo=st(vt);Q.PostgrestFilterBuilder=yo.default;const _o=st(sn);Q.PostgrestTransformBuilder=_o.default;const bo=st(rn);Q.PostgrestBuilder=bo.default;const wo=st(on);Q.PostgrestError=wo.default;var nh=Q.default={PostgrestClient:go.default,PostgrestQueryBuilder:mo.default,PostgrestFilterBuilder:yo.default,PostgrestTransformBuilder:_o.default,PostgrestBuilder:bo.default,PostgrestError:wo.default};const{PostgrestClient:sh,PostgrestQueryBuilder:Fp,PostgrestFilterBuilder:zp,PostgrestTransformBuilder:Wp,PostgrestBuilder:Hp,PostgrestError:Kp}=nh;class rh{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const oh="realtime-js/2.15.4",ah="1.0.0",Xn=1e4,ih=1e3,lh=100;var St;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(St||(St={}));var H;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(H||(H={}));var ce;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ce||(ce={}));var Zn;(function(t){t.websocket="websocket"})(Zn||(Zn={}));var ze;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ze||(ze={}));class ch{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const o=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(e.slice(i,i+o));i=i+o;const c=s.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class vo{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var U;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(U||(U={}));const ko=(t,e,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,i)=>(a[i]=uh(i,t,e,o),a),{})},uh=(t,e,n,s)=>{const o=e.find(l=>l.name===t),a=o==null?void 0:o.type,i=n[t];return a&&!s.includes(a)?So(a,i):Qn(i)},So=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ph(e,n)}switch(t){case U.bool:return dh(e);case U.float4:case U.float8:case U.int2:case U.int4:case U.int8:case U.numeric:case U.oid:return hh(e);case U.json:case U.jsonb:return fh(e);case U.timestamp:return gh(e);case U.abstime:case U.date:case U.daterange:case U.int4range:case U.int8range:case U.money:case U.reltime:case U.text:case U.time:case U.timestamptz:case U.timetz:case U.tsrange:case U.tstzrange:return Qn(e);default:return Qn(e)}},Qn=t=>t,dh=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},hh=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},fh=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ph=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let a;const i=t.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>So(e,l))}return t},gh=t=>typeof t=="string"?t.replace(" ","T"):t,Eo=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class es{constructor(e,n,s={},o=Xn){this.channel=e,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Co;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Co||(Co={}));class Et{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Et.syncState(this.state,o,a,i),this.pendingDiffs.forEach(c=>{this.state=Et.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Et.syncDiff(this.state,o,a,i),l())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,o){const a=this.cloneDeep(e),i=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=a[u];if(h){const p=d.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),f=d.filter(b=>g.indexOf(b.presence_ref)<0),m=h.filter(b=>p.indexOf(b.presence_ref)<0);f.length>0&&(l[u]=f),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},s,o)}static syncDiff(e,n,s,o){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),p=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...p)}s(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,o(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const o=e[s];return"metas"in o?n[s]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var To;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(To||(To={}));var Ct;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ct||(Ct={}));var we;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(we||(we={}));class ts{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=H.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new es(this,ce.join,this.params,this.timeout),this.rejoinTimer=new vo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=H.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=H.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=H.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=H.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=H.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ce.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Et(this),this.broadcastEndpointURL=Eo(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==H.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[Ct.PRESENCE]&&this.bindings[Ct.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(we.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(we.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var f;if(this.socket.setAuth(),g===void 0){e==null||e(we.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,y=[];for(let k=0;k<b;k++){const _=m[k],{filter:{event:O,schema:N,table:P,filter:I}}=_,L=g&&g[k];if(L&&L.event===O&&L.schema===N&&L.table===P&&L.filter===I)y.push(Object.assign(Object.assign({},_),{id:L.id}));else{this.unsubscribe(),this.state=H.errored,e==null||e(we.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(we.SUBSCRIBED);return}}).receive("error",g=>{this.state=H.errored,e==null||e(we.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(we.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===H.joined&&e===Ct.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async send(e,n={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=u.body)===null||o===void 0?void 0:o.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=H.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ce.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new es(this,ce.leave,{},e),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=H.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const o=new AbortController,a=setTimeout(()=>o.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),i}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new es(this,e,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>lh){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var o,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ce;if(s&&[l,c,u,d].indexOf(i)>=0&&s!==this._joinRef())return;let p=this._onMessage(i,n,s);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var f,m,b;return((f=g.filter)===null||f===void 0?void 0:f.event)==="*"||((b=(m=g.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(g=>g.callback(p,s)):(a=this.bindings[i])===null||a===void 0||a.filter(g=>{var f,m,b,y,k,_;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const O=g.id,N=(f=g.filter)===null||f===void 0?void 0:f.event;return O&&((m=n.ids)===null||m===void 0?void 0:m.includes(O))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=(k=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return O==="*"||O===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof p=="object"&&"ids"in p){const f=p.data,{schema:m,table:b,commit_timestamp:y,type:k,errors:_}=f;p=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:y,eventType:k,new:{},old:{},errors:_}),this._getPayloadRecords(f))}g.callback(p,s)})}_isClosed(){return this.state===H.closed}_isJoined(){return this.state===H.joined}_isJoining(){return this.state===H.joining}_isLeaving(){return this.state===H.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&ts.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ce.close,{},e)}_onError(e){this._on(ce.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=H.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ko(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ko(e.columns,e.old_record)),n}}const ns=()=>{},an={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mh=[1e3,2e3,5e3,1e4],yh=1e4,_h=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bh{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xn,this.transport=null,this.heartbeatIntervalMs=an.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ns,this.ref=0,this.reconnectTimer=null,this.logger=ns,this.conn=null,this.sendBuffer=[],this.serializer=new ch,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...i)=>Promise.resolve().then(()=>nt).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Zn.websocket}`,this.httpEndpoint=Eo(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rh.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ah}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case St.connecting:return ze.Connecting;case St.open:return ze.Open;case St.closing:return ze.Closing;default:return ze.Closed}}isConnected(){return this.connectionState()===ze.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===s);if(o)return o;{const a=new ts(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:s,payload:o,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${s} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ih,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},an.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:a,ref:i}=n,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${o} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(o,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ce.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${s}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([_h],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:oh};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ce.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new vo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},an.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,o,a,i,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Xn,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:an.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:ns,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>mh[h-1]||yh,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ss extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function K(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class wh extends ss{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rs extends ss{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var vh=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Oo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>nt).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},kh=()=>vh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>nt)).Response:Response}),os=t=>{if(Array.isArray(t))return t.map(n=>os(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=os(s)}),e},Sh=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var We=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const as=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Eh=(t,e,n)=>We(void 0,void 0,void 0,function*(){const s=yield kh();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const a=t.status||500,i=(o==null?void 0:o.statusCode)||a+"";e(new wh(as(o),a,i))}).catch(o=>{e(new rs(as(o),o))}):e(new rs(as(t),t))}),Ch=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?o:(Sh(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Tt(t,e,n,s,o,a){return We(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Ch(e,s,o,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Eh(c,l,s))})})}function ln(t,e,n,s){return We(this,void 0,void 0,function*(){return Tt(t,"GET",e,n,s)})}function fe(t,e,n,s,o){return We(this,void 0,void 0,function*(){return Tt(t,"POST",e,s,o,n)})}function is(t,e,n,s,o){return We(this,void 0,void 0,function*(){return Tt(t,"PUT",e,s,o,n)})}function Th(t,e,n,s){return We(this,void 0,void 0,function*(){return Tt(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Io(t,e,n,s,o){return We(this,void 0,void 0,function*(){return Tt(t,"DELETE",e,s,o,n)})}var Y=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Oh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ao={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ih{constructor(e,n={},s,o){this.url=e,this.headers=n,this.bucketId=s,this.fetch=Oo(o)}uploadOrUpdate(e,n,s,o){return Y(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Ao),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?is:fe)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(K(a))return{data:null,error:a};throw a}})}upload(e,n,s){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,o){return Y(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Ao.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield is(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(K(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Y(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield fe(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new ss("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}update(e,n,s){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Y(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}copy(e,n,s){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield fe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,s){return Y(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield fe(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,s){return Y(this,void 0,void 0,function*(){try{const o=yield fe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}download(e,n){return Y(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ln(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(K(l))return{data:null,error:l};throw l}})}info(e){return Y(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield ln(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:os(s),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}exists(e){return Y(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Th(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(K(s)&&s instanceof rs){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&o.push(c);let u=o.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}list(e,n,s){return Y(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Oh),n),{prefix:e||""});return{data:yield fe(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}listV2(e,n){return Y(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield fe(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ah={"X-Client-Info":"storage-js/2.11.0"};var rt=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Ph{constructor(e,n={},s,o){const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Ah),n),this.fetch=Oo(s)}listBuckets(){return rt(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}})}getBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return rt(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return rt(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}emptyBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}deleteBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}}class xh extends Ph{constructor(e,n={},s,o){super(e,n,s,o)}from(e){return new Ih(this.url,this.headers,e,this.fetch)}}const Nh="2.57.0";let Ot="";typeof Deno<"u"?Ot="deno":typeof document<"u"?Ot="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ot="react-native":Ot="node";const $h={headers:{"X-Client-Info":`supabase-js-${Ot}/${Nh}`}},Rh={schema:"public"},Bh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jh={};var Lh=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Dh=t=>{let e;return t?e=t:typeof fetch>"u"?e=uo:e=fetch,(...n)=>e(...n)},Mh=()=>typeof Headers>"u"?ho:Headers,Uh=(t,e,n)=>{const s=Dh(n),o=Mh();return(a,i)=>Lh(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new o(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},i),{headers:u}))})};var Vh=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};function Fh(t){return t.endsWith("/")?t:t+"/"}function zh(t,e){var n,s;const{db:o,auth:a,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},c),o),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Vh(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const Po="2.71.1",ot=30*1e3,ls=3,cs=ls*ot,Wh="http://localhost:9999",Hh="supabase.auth.token",Kh={"X-Client-Info":`gotrue-js/${Po}`},us="X-Supabase-Api-Version",xo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gh=10*60*1e3;class ds extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function R(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Jh extends ds{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function Yh(t){return R(t)&&t.name==="AuthApiError"}class No extends ds{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Pe extends ds{constructor(e,n,s,o){super(e,s,o),this.name=n,this.status=s}}class xe extends Pe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xh(t){return R(t)&&t.name==="AuthSessionMissingError"}class cn extends Pe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class un extends Pe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dn extends Pe{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zh(t){return R(t)&&t.name==="AuthImplicitGrantRedirectError"}class $o extends Pe{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hs extends Pe{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fs(t){return R(t)&&t.name==="AuthRetryableFetchError"}class Ro extends Pe{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class ps extends Pe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bo=` 	
\r=`.split(""),Qh=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Bo.length;e+=1)t[Bo[e].charCodeAt(0)]=-2;for(let e=0;e<hn.length;e+=1)t[hn[e].charCodeAt(0)]=e;return t})();function jo(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(hn[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(hn[s]),e.queuedBits-=6}}function Lo(t,e,n){const s=Qh[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Do(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=i=>{nf(i,s,n)};for(let i=0;i<t.length;i+=1)Lo(t.charCodeAt(i),o,a);return e.join("")}function ef(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tf(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}ef(s,e)}}function nf(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function sf(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Lo(t.charCodeAt(o),n,s);return new Uint8Array(e)}function rf(t){const e=[];return tf(t,n=>e.push(n)),new Uint8Array(e)}function of(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};return t.forEach(o=>jo(o,n,s)),jo(null,n,s),e.join("")}function af(t){return Math.round(Date.now()/1e3)+t}function lf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ue=()=>typeof window<"u"&&typeof document<"u",He={tested:!1,writable:!1},Mo=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(He.tested)return He.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),He.tested=!0,He.writable=!0}catch{He.tested=!0,He.writable=!1}return He.writable};function cf(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((s,o)=>{e[o]=s}),e}const Uo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>nt).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},uf=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",at=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ke=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ne=async(t,e)=>{await t.removeItem(e)};class fn{constructor(){this.promise=new fn.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fn.promiseConstructor=Promise;function gs(t){const e=t.split(".");if(e.length!==3)throw new ps("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!qh.test(e[s]))throw new ps("JWT not in base64url format");return{header:JSON.parse(Do(e[0])),payload:JSON.parse(Do(e[1])),signature:sf(e[2]),raw:{header:e[0],payload:e[1]}}}async function df(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hf(t,e){return new Promise((s,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){o(i);return}}})()})}function ff(t){return("0"+t.toString(16)).substr(-2)}function pf(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,ff).join("")}async function gf(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function mf(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await gf(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function it(t,e,n=!1){const s=pf();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await at(t,`${e}-code-verifier`,o);const a=await mf(s);return[a,s===a?"plain":"s256"]}const yf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _f(t){const e=t.headers.get(us);if(!e||!e.match(yf))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bf(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lt(t){if(!vf.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ms(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vo(t){return JSON.parse(JSON.stringify(t))}var kf=globalThis&&globalThis.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n};const qe=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sf=[502,503,504];async function Fo(t){var e;if(!uf(t))throw new hs(qe(t),0);if(Sf.includes(t.status))throw new hs(qe(t),t.status);let n;try{n=await t.json()}catch(a){throw new No(qe(a),a)}let s;const o=_f(t);if(o&&o.getTime()>=xo["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Ro(qe(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new xe}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Ro(qe(n),t.status,n.weak_password.reasons);throw new Jh(qe(n),t.status||500,s)}const Ef=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function j(t,e,n,s){var o;const a=Object.assign({},s==null?void 0:s.headers);a[us]||(a[us]=xo["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Cf(t,e,n+l,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Cf(t,e,n,s,o,a){const i=Ef(e,s,o,a);let l;try{l=await t(n,Object.assign({},i))}catch(c){throw console.error(c),new hs(qe(c),0)}if(l.ok||await Fo(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Fo(c)}}function ve(t){var e;let n=null;Af(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=af(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function zo(t){const e=ve(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $e(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tf(t){return{data:t,error:null}}function Of(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:a}=t,i=kf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function If(t){return t}function Af(t){return t.access_token&&t.refresh_token&&t.expires_in}const ys=["global","local","others"];var Pf=globalThis&&globalThis.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n};class xf{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=Uo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ys[0]){if(ys.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ys.join(", ")}`);try{return await j(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(R(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await j(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$e})}catch(s){if(R(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Pf(e,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await j(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Of,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(R(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await j(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$e})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,o,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await j(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:If});if(d.error)throw d.error;const h=await d.json(),p=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(f=>{const m=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(f.split(";")[1].split("=")[1]);u[`${b}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(R(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){lt(e);try{return await j(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$e})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){lt(e);try{return await j(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:$e})}catch(s){if(R(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){lt(e);try{return await j(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:$e})}catch(s){if(R(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){lt(e.userId);try{const{data:n,error:s}=await j(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(R(n))return{data:null,error:n};throw n}}async _deleteFactor(e){lt(e.userId),lt(e.id);try{return{data:await j(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}}function Wo(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Nf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ct={debug:!!(globalThis&&Mo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ho extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $f extends Ho{}async function Rf(t,e,n){ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ct.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $f(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ct.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Nf();const Bf={url:Wh,storageKey:Hh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ko(t,e,n){return await n()}const ut={};class It{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=It.nextInstanceID,It.nextInstanceID+=1,this.instanceID>0&&ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Bf),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new xf({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Uo(o.fetch),this.lock=o.lock||Ko,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ue()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Rf:this.lock=Ko,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Mo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wo(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Wo(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=ut[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ut[this.storageKey]=Object.assign(Object.assign({},ut[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ut[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ut[this.storageKey]=Object.assign(Object.assign({},ut[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Po}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=cf(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),ue()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Zh(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return R(n)?{error:n}:{error:new No("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,o;try{const a=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:ve}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(R(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,s,o;try{let a;if("email"in e){const{email:d,password:h,options:p}=e;let g=null,f=null;this.flowType==="pkce"&&([g,f]=await it(this.storage,this.storageKey)),a=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:f},xform:ve})}else if("phone"in e){const{phone:d,password:h,options:p}=e;a=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(o=p==null?void 0:p.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ve})}else throw new un("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(R(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:i,options:l}=e;n=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zo})}else if("phone"in e){const{phone:a,password:i,options:l}=e;n=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zo})}else throw new un("You must provide either an email or phone number and a password");const{data:s,error:o}=n;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new cn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(R(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,o,a,i,l,c,u,d,h,p,g;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:b,wallet:y,statement:k,options:_}=e;let O;if(ue())if(typeof y=="object")O=y;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))O=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=y}const N=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const P=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),k?{statement:k}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)f=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),m=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${N.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(o=(s=_==null?void 0:_.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await O.signMessage(new TextEncoder().encode(f),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=P}}try{const{data:b,error:y}=await j(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:of(m)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ve});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new cn}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(R(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Ke(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(n??"").split("/");try{const{data:a,error:i}=await j(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ve});if(await Ne(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new cn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:i})}catch(a){if(R(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:s,token:o,access_token:a,nonce:i}=e,l=await j(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ve}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new cn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(R(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,o,a,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await it(this.storage,this.storageKey));const{error:h}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c==null?void 0:c.data)!==null&&o!==void 0?o:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new un("You must provide either an email or phone number.")}catch(l){if(R(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,s;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await j(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:ve});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(R(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,s,o;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await it(this.storage,this.storageKey)),await j(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Tf})}catch(a){if(R(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new xe;const{error:o}=await j(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(R(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:a}=e,{error:i}=await j(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:o,options:a}=e,{data:i,error:l}=await j(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new un("You must provide either an email or phone number and a type")}catch(n){if(R(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ke(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<cs:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const i=await Ke(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=ms()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$e}):await this._useSession(async n=>{var s,o,a;const{data:i,error:l}=n;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xe}:await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:$e})})}catch(n){if(R(n))return Xh(n)&&(await this._removeSession(),await Ne(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new xe;const i=o.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await it(this.storage,this.storageKey));const{data:u,error:d}=await j(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:$e});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(R(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xe;const n=Date.now()/1e3;let s=n,o=!0,a=null;const{payload:i}=gs(e.access_token);if(i.exp&&(s=i.exp,o=s<=n),o){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(R(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new xe;const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(R(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ue())throw new dn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $o("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dn("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $o("No code detected.");const{data:k,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!i||!u)throw new dn("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const g=p-d;g*1e3<=ot&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const f=p-h;d-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,p,d):d-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,p,d);const{data:m,error:b}=await this._getUser(a);if(b)throw b;const y={provider_token:s,provider_refresh_token:o,access_token:a,expires_in:h,expires_at:p,refresh_token:i,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(s){if(R(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ke(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:a}=n;if(a)return{error:a};const i=(s=o.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Yh(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ne(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=lf(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,o;try{const{data:{session:a},error:i}=n;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await it(this.storage,this.storageKey,!0));try{return await j(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(R(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:o}=await this._useSession(async a=>{var i,l,c,u,d;const{data:h,error:p}=a;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await j(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return ue()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(R(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,o;const{data:a,error:i}=n;if(i)throw i;return await j(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await hf(async o=>(o>0&&await df(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await j(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ve})),(o,a)=>{const i=200*Math.pow(2,o);return a&&fs(a)&&Date.now()+i-s<ot})}catch(s){if(this._debug(n,"error",s),R(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),ue()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Ke(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Ke(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await at(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:ms()}else if(o&&!o.user&&!o.user){const i=await Ke(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await Ne(this.storage,this.storageKey+"-user"),await at(this.storage,this.storageKey,o)):o.user=ms()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cs;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${cs}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),fs(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new xe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new fn;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new xe;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(o,"error",a),R(a)){const i={session:null,error:a};return fs(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await at(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=Vo(o);await at(this.storage,this.storageKey,a)}else{const o=Vo(n);await at(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ne(this.storage,this.storageKey),await Ne(this.storage,this.storageKey+"-code-verifier"),await Ne(this.storage,this.storageKey+"-user"),this.userStorage&&await Ne(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ot);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/ot);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ot}ms, refresh threshold is ${ls} ticks`),o<=ls&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ho)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const o=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await it(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);o.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:o,error:a}=n;return a?{data:null,error:a}:await j(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,o;const{data:a,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await j(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:a}=n;if(a)return{data:null,error:a};const{data:i,error:l}=await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(R(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:a}=n;return a?{data:null,error:a}:await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(R(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],o=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gs(o.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(l=>l.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Gh>o)return s;const{data:a,error:i}=await j(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,s=a.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:g,error:f}=await this.getSession();if(f||!g.session)return{data:null,error:f};s=g.session.access_token}const{header:o,payload:a,signature:i,raw:{header:l,payload:c}}=gs(s);n!=null&&n.allowExpired||bf(a.exp);const u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:a,header:o,signature:i},error:null}}const d=wf(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,rf(`${l}.${c}`)))throw new ps("Invalid JWT signature");return{data:{claims:a,header:o,signature:i},error:null}}catch(s){if(R(s))return{data:null,error:s};throw s}}}It.nextInstanceID=0;const jf=It;class Lf extends jf{constructor(e){super(e)}}var Df=globalThis&&globalThis.__awaiter||function(t,e,n,s){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Mf{constructor(e,n,s){var o,a,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Fh(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Rh,realtime:jh,auth:Object.assign(Object.assign({},Bh),{storageKey:u}),global:$h},h=zh(s??{},d);this.storageKey=(o=h.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=Uh(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new sh(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new xh(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Bd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Df(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:o,userStorage:a,storageKey:i,flowType:l,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lf({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:o,userStorage:a,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new bh(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Uf=(t,e,n)=>new Mf(t,e,n);function Vf(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Vf()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Re="aiworkspace.pro";function pn(t){return t==="localhost"||/^\d+\.\d+\.\d+\.\d+$/.test(t)}function qo(t){return t===Re||t.endsWith(`.${Re}`)}function gn(t){return document.cookie.split(";").map(s=>s.trim()).filter(s=>t.some(o=>s.startsWith(o+"=")))}function Be(t,e,n=60*60*24*365){const s=location.hostname;if(pn(s)){document.cookie=`${t}=${encodeURIComponent(e)}; Path=/; Max-Age=${n}; SameSite=Lax`,console.log("[auth][cookie][set][local]",{host:s,name:t,valuePreview:e.slice(0,20)+"..."}),console.log("[auth][cookie][after]",gn([t]));return}document.cookie=`${t}=${encodeURIComponent(e)}; Domain=.${Re}; Path=/; Max-Age=${n}; SameSite=Lax; Secure`,document.cookie=`${t}=; Path=/; Max-Age=0; SameSite=Lax`,console.log("[auth][cookie][set][apex]",{host:s,apex:Re,name:t,valuePreview:e.slice(0,20)+"..."}),console.log("[auth][cookie][after]",gn([t]))}function je(t){const e=new RegExp("(?:^|; )"+t.replace(/[$()*+.[\]?^{}|\\/-]/g,"\\$&")+"=([^;]*)"),n=document.cookie.match(e);return n?decodeURIComponent(n[1]):null}function _s(t){const e=location.hostname;if(pn(e)){document.cookie=`${t}=; Path=/; Max-Age=0; SameSite=Lax`,console.log("[auth][cookie][clear][local]",{host:e,name:t});return}document.cookie=`${t}=; Domain=.${Re}; Path=/; Max-Age=0; SameSite=Lax; Secure`,document.cookie=`${t}=; Path=/; Max-Age=0; SameSite=Lax`,console.log("[auth][cookie][clear][apex]",{host:e,apex:Re,name:t}),console.log("[auth][cookie][after]",gn([t]))}function bs(t){const e=location.hostname;if(pn(e)){console.log("[auth][cookie][promote] skip (local host)",e);return}if(!qo(e)){console.log("[auth][cookie][promote] skip (not under apex)",{host:e,apex:Re});return}console.log("[auth][cookie][promote] start",{host:e,apex:Re,names:t}),t.forEach(n=>{const s=je(n);s?Be(n,s,60*60*24*365):console.log("[auth][cookie][promote] missing",n)}),console.log("[auth][cookie][promote] done",gn(t))}function Ff(){return`${window.location.origin}/callback`}function zf(){try{const t=new URLSearchParams(location.search),e=["redirect","redirect_to","returnTo","next"].find(s=>t.get(s));let n=e?t.get(e):"";if(n||(n=sessionStorage.getItem("post-login-redirect")||localStorage.getItem("post-login-redirect")||""),n||(n={VITE_SUPABASE_URL:"https://oqdnbpmmgntqtigstaow.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZG5icG1tZ250cXRpZ3N0YW93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ0NTk2NDYsImV4cCI6MjA1MDAzNTY0Nn0.rn0nRY9xLgLt-ajiSPeG0PcdS9V-549C1yeqhcxxG40",VITE_APEX_DOMAIN:"aiworkspace.pro",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_DEFAULT_POST_LOGIN_URL||"/"),n.startsWith("http"))try{const s=new URL(n);return qo(s.hostname)||pn(s.hostname)?n:"/"}catch{return"/"}return n.startsWith("/")||(n="/"+n),n}catch{return"/"}}const pe="sb-access-token",ge="sb-refresh-token",ws="sb-access-token",vs="sb-refresh-token";function At(){try{const t=je(pe),e=je(ge);t&&localStorage.setItem(ws,t),e&&localStorage.setItem(vs,e),console.log("[auth][cookie->ls] sync",{hasAccess:!!t,hasRefresh:!!e})}catch(t){console.log("[auth][cookie->ls] error",t)}}function Go(){try{localStorage.removeItem(ws),localStorage.removeItem(vs),console.log("[auth][cookie->ls] cleared localStorage")}catch(t){console.log("[auth][cookie->ls] clear error",t)}}async function Wf(){try{bs([pe,ge]);const t=je(pe),e=je(ge);if(t&&e){const{data:{session:n}}=await ne.auth.getSession();if(!n){const{data:s,error:o}=await ne.auth.setSession({access_token:t,refresh_token:e});o?console.log("[auth][restore] error",o):console.log("[auth][restore] done",!!s.session)}}else console.log("[auth][restore] no cookies present");At()}catch(t){console.log("[auth][restore] exception",t)}}function Jo(){console.log("[auth][listener] Setting up auth state listener..."),ne.auth.onAuthStateChange(async(t,e)=>{switch(console.log("[auth][listener] Auth state changed:",t,!!e),t){case"TOKEN_REFRESHED":console.log("[auth][listener] Token refreshed successfully"),e&&(Be(pe,e.access_token,60*60*24*365),Be(ge,e.refresh_token,60*60*24*365),At());break;case"SIGNED_IN":console.log("[auth][listener] User signed in"),e&&(Be(pe,e.access_token,60*60*24*365),Be(ge,e.refresh_token,60*60*24*365),At());break;case"SIGNED_OUT":console.log("[auth][listener] User signed out");break;case"USER_UPDATED":console.log("[auth][listener] User updated");break;default:console.log("[auth][listener] Unhandled auth event:",t)}})}async function ks(){try{const{data:{session:t}}=await ne.auth.getSession();if(t&&t.user)return console.log("[auth][restore] Active session found"),{success:!0,session:t};const e=je(pe),n=je(ge);if(e&&n){console.log("[auth][restore] Attempting to restore session from cookies...");const{data:s,error:o}=await ne.auth.setSession({access_token:e,refresh_token:n});if(o)return console.log("[auth][restore] Failed to restore session:",o.message),{success:!1,error:o};if(s.session)return console.log("[auth][restore] Session restored successfully"),Be(pe,s.session.access_token,60*60*24*365),Be(ge,s.session.refresh_token,60*60*24*365),At(),{success:!0,session:s.session}}return console.log("[auth][restore] No valid session or cookies found"),{success:!1,error:"No valid session or cookies"}}catch(t){return console.log("[auth][restore] Exception during session restoration:",t),{success:!1,error:t}}}if(typeof window<"u")try{bs([pe,ge])}catch(t){console.log("[auth][cookie][promote] error (pre-init)",t)}const Ss="https://oqdnbpmmgntqtigstaow.supabase.co",Es="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZG5icG1tZ250cXRpZ3N0YW93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ0NTk2NDYsImV4cCI6MjA1MDAzNTY0Nn0.rn0nRY9xLgLt-ajiSPeG0PcdS9V-549C1yeqhcxxG40",ne=Uf(Ss,Es,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});typeof window<"u"&&Jo(),console.log("Supabase Configuration:",{url:Ss,hasKey:!!Es,autoRefreshToken:!0,persistSession:!0}),console.log("URL:",Ss.replace(/https:\/\/(.+)\.supabase\.co/,"https://*****.supabase.co")),console.log("Key configured:",!Es.includes("your-anon-key")),console.log("Environment mode:","production");function Yo(){const t=r.ref({user:null,isAuthenticated:!1,isLoading:!0}),e=r.ref(null),n=r.computed(()=>t.value.isAuthenticated),s=r.computed(()=>t.value.user),o=r.computed(()=>t.value.isLoading),a=async()=>{var d,h,p,g,f,m,b,y,k,_,O,N,P,I,L;try{const{data:{session:D}}=await ne.auth.getSession();if(D&&D.user){const w=D.user,C={id:w.id,name:((d=w.user_metadata)==null?void 0:d.name)||((h=w.user_metadata)==null?void 0:h.user_name)||((p=w.user_metadata)==null?void 0:p.full_name)||((g=w.email)==null?void 0:g.split("@")[0])||"User",email:w.email,avatar_url:((f=w.user_metadata)==null?void 0:f.avatar_url)||null,user_metadata:w.user_metadata};return t.value={user:C,isAuthenticated:!0,isLoading:!1},e.value={user:C,access_token:D.access_token,refresh_token:D.refresh_token},{success:!0,session:e.value}}console.log("[auth][enhanced] No active session, attempting to restore from cookies...");const S=await ks();if(S.success&&S.session){console.log("[auth][enhanced] Session restored successfully");const w=S.session.user,C={id:w.id,name:((m=w.user_metadata)==null?void 0:m.name)||((b=w.user_metadata)==null?void 0:b.user_name)||((y=w.user_metadata)==null?void 0:y.full_name)||((k=w.email)==null?void 0:k.split("@")[0])||"User",email:w.email,avatar_url:((_=w.user_metadata)==null?void 0:_.avatar_url)||null,user_metadata:w.user_metadata};return t.value={user:C,isAuthenticated:!0,isLoading:!1},e.value=S.session,{success:!0,session:e.value}}else console.log("[auth][enhanced] Failed to restore session:",S.error)}catch(D){console.error("Error getting Supabase session:",D);try{const S=await ks();if(S.success&&S.session){console.log("[auth][enhanced] Session restored after error");const w=S.session.user,C={id:w.id,name:((O=w.user_metadata)==null?void 0:O.name)||((N=w.user_metadata)==null?void 0:N.user_name)||((P=w.user_metadata)==null?void 0:P.full_name)||((I=w.email)==null?void 0:I.split("@")[0])||"User",email:w.email,avatar_url:((L=w.user_metadata)==null?void 0:L.avatar_url)||null,user_metadata:w.user_metadata};return t.value={user:C,isAuthenticated:!0,isLoading:!1},e.value=S.session,{success:!0,session:e.value}}}catch(S){console.error("Error restoring session:",S)}}return t.value={user:null,isAuthenticated:!1,isLoading:!1},e.value=null,{success:!1,error:"No valid session found"}},i=async()=>{try{await ne.auth.signOut(),_s(pe),_s(ge),Go(),t.value={user:null,isAuthenticated:!1,isLoading:!1},e.value=null,console.log("[auth][enhanced] User logged out successfully")}catch(d){console.error("Error during logout:",d),t.value={user:null,isAuthenticated:!1,isLoading:!1},e.value=null}},l=async(d,h)=>{var p,g,f,m,b;try{t.value.isLoading=!0;const{data:y,error:k}=await ne.auth.signInWithPassword({email:d,password:h});if(k)throw k;if(y.session){const _=y.session.user,O={id:_.id,name:((p=_.user_metadata)==null?void 0:p.name)||((g=_.user_metadata)==null?void 0:g.user_name)||((f=_.user_metadata)==null?void 0:f.full_name)||((m=_.email)==null?void 0:m.split("@")[0])||"User",email:_.email,avatar_url:((b=_.user_metadata)==null?void 0:b.avatar_url)||null,user_metadata:_.user_metadata};return t.value={user:O,isAuthenticated:!0,isLoading:!1},e.value={user:O,access_token:y.session.access_token,refresh_token:y.session.refresh_token},{success:!0,session:e.value}}return{success:!1,error:"No session returned"}}catch(y){return console.error("Sign in error:",y),t.value.isLoading=!1,{success:!1,error:y}}},c=async(d,h,p)=>{var g,f,m,b,y;try{t.value.isLoading=!0;const{data:k,error:_}=await ne.auth.signUp({email:d,password:h,options:{data:p}});if(_)throw _;if(k.session){const O=k.session.user,N={id:O.id,name:((g=O.user_metadata)==null?void 0:g.name)||((f=O.user_metadata)==null?void 0:f.user_name)||((m=O.user_metadata)==null?void 0:m.full_name)||((b=O.email)==null?void 0:b.split("@")[0])||"User",email:O.email,avatar_url:((y=O.user_metadata)==null?void 0:y.avatar_url)||null,user_metadata:O.user_metadata};return t.value={user:N,isAuthenticated:!0,isLoading:!1},e.value={user:N,access_token:k.session.access_token,refresh_token:k.session.refresh_token},{success:!0,session:e.value}}return{success:!1,error:"No session returned"}}catch(k){return console.error("Sign up error:",k),t.value.isLoading=!1,{success:!1,error:k}}},u=async()=>{await a()};return r.onMounted(()=>{u()}),{authState:t,currentSession:e,isAuthenticated:n,currentUser:s,isLoading:o,loadUserInfo:a,logout:i,signIn:l,signUp:c,checkAuth:u}}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Pt;const mn=t=>Pt=t,Hf=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function Ge(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var xt;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(xt||(xt={}));const Nt=typeof window<"u";function Xo(t,e){for(const n in e){const s=e[n];if(!(n in t))continue;const o=t[n];Ge(o)&&Ge(s)&&!r.isRef(s)&&!r.isReactive(s)?t[n]=Xo(o,s):t[n]=s}return t}const Zo=()=>{};function Qo(t,e,n,s=Zo){t.push(e);const o=()=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),s())};return!n&&r.getCurrentScope()&&r.onScopeDispose(o),o}function dt(t,...e){t.slice().forEach(n=>{n(...e)})}const Kf=t=>t(),ea=Symbol(),Cs=Symbol();function Ts(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],o=t[n];Ge(o)&&Ge(s)&&t.hasOwnProperty(n)&&!r.isRef(s)&&!r.isReactive(s)?t[n]=Ts(o,s):t[n]=s}return t}const qf=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function Gf(t){return!Ge(t)||!t.hasOwnProperty(qf)}const{assign:oe}=Object;function ta(t){return!!(r.isRef(t)&&t.effect)}function na(t,e,n,s){const{state:o,actions:a,getters:i}=e,l=n.state.value[t];let c;function u(){!l&&(process.env.NODE_ENV==="production"||!s)&&(n.state.value[t]=o?o():{});const d=process.env.NODE_ENV!=="production"&&s?r.toRefs(r.ref(o?o():{}).value):r.toRefs(n.state.value[t]);return oe(d,a,Object.keys(i||{}).reduce((h,p)=>(process.env.NODE_ENV!=="production"&&p in d&&console.warn(`[]: A getter cannot have the same name as another state property. Rename one of them. Found with "${p}" in store "${t}".`),h[p]=r.markRaw(r.computed(()=>{mn(n);const g=n._s.get(t);return i[p].call(g,g)})),h),{}))}return c=Os(t,u,e,n,s,!0),c}function Os(t,e,n={},s,o,a){let i;const l=oe({actions:{}},n);if(process.env.NODE_ENV!=="production"&&!s._e.active)throw new Error("Pinia destroyed");const c={deep:!0};process.env.NODE_ENV!=="production"&&!Tl&&(c.onTrigger=S=>{u?g=S:u==!1&&!I._hotUpdating&&(Array.isArray(g)?g.push(S):console.error(" debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let u,d,h=[],p=[],g;const f=s.state.value[t];!a&&!f&&(process.env.NODE_ENV==="production"||!o)&&(s.state.value[t]={});const m=r.ref({});let b;function y(S){let w;u=d=!1,process.env.NODE_ENV!=="production"&&(g=[]),typeof S=="function"?(S(s.state.value[t]),w={type:xt.patchFunction,storeId:t,events:g}):(Ts(s.state.value[t],S),w={type:xt.patchObject,payload:S,storeId:t,events:g});const C=b=Symbol();r.nextTick().then(()=>{b===C&&(u=!0)}),d=!0,dt(h,w,s.state.value[t])}const k=a?function(){const{state:w}=n,C=w?w():{};this.$patch(z=>{oe(z,C)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`: Store "${t}" is built using the setup syntax and does not implement $reset().`)}:Zo;function _(){i.stop(),h=[],p=[],s._s.delete(t)}const O=(S,w="")=>{if(ea in S)return S[Cs]=w,S;const C=function(){mn(s);const z=Array.from(arguments),ee=[],A=[];function v($){ee.push($)}function T($){A.push($)}dt(p,{args:z,name:C[Cs],store:I,after:v,onError:T});let x;try{x=S.apply(this&&this.$id===t?this:I,z)}catch($){throw dt(A,$),$}return x instanceof Promise?x.then($=>(dt(ee,$),$)).catch($=>(dt(A,$),Promise.reject($))):(dt(ee,x),x)};return C[ea]=!0,C[Cs]=w,C},N=r.markRaw({actions:{},getters:{},state:[],hotState:m}),P={_p:s,$id:t,$onAction:Qo.bind(null,p),$patch:y,$reset:k,$subscribe(S,w={}){const C=Qo(h,S,w.detached,()=>z()),z=i.run(()=>r.watch(()=>s.state.value[t],ee=>{(w.flush==="sync"?d:u)&&S({storeId:t,type:xt.direct,events:g},ee)},oe({},c,w)));return C},$dispose:_},I=r.reactive(process.env.NODE_ENV!=="production"||process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&Nt?oe({_hmrPayload:N,_customProperties:r.markRaw(new Set)},P):P);s._s.set(t,I);const D=(s._a&&s._a.runWithContext||Kf)(()=>s._e.run(()=>(i=r.effectScope()).run(()=>e({action:O}))));for(const S in D){const w=D[S];if(r.isRef(w)&&!ta(w)||r.isReactive(w))process.env.NODE_ENV!=="production"&&o?Ut(m.value,S,r.toRef(D,S)):a||(f&&Gf(w)&&(r.isRef(w)?w.value=f[S]:Ts(w,f[S])),s.state.value[t][S]=w),process.env.NODE_ENV!=="production"&&N.state.push(S);else if(typeof w=="function"){const C=process.env.NODE_ENV!=="production"&&o?w:O(w,S);D[S]=C,process.env.NODE_ENV!=="production"&&(N.actions[S]=w),l.actions[S]=w}else process.env.NODE_ENV!=="production"&&ta(w)&&(N.getters[S]=a?n.getters[S]:w,Nt&&(D._getters||(D._getters=r.markRaw([]))).push(S))}if(oe(I,D),oe(r.toRaw(I),D),Object.defineProperty(I,"$state",{get:()=>process.env.NODE_ENV!=="production"&&o?m.value:s.state.value[t],set:S=>{if(process.env.NODE_ENV!=="production"&&o)throw new Error("cannot set hotState");y(w=>{oe(w,S)})}}),process.env.NODE_ENV!=="production"&&(I._hotUpdate=r.markRaw(S=>{I._hotUpdating=!0,S._hmrPayload.state.forEach(w=>{if(w in I.$state){const C=S.$state[w],z=I.$state[w];typeof C=="object"&&Ge(C)&&Ge(z)?Xo(C,z):S.$state[w]=z}Ut(I,w,r.toRef(S.$state,w))}),Object.keys(I.$state).forEach(w=>{w in S.$state||On(I,w)}),u=!1,d=!1,s.state.value[t]=r.toRef(S._hmrPayload,"hotState"),d=!0,r.nextTick().then(()=>{u=!0});for(const w in S._hmrPayload.actions){const C=S[w];Ut(I,w,O(C,w))}for(const w in S._hmrPayload.getters){const C=S._hmrPayload.getters[w],z=a?r.computed(()=>(mn(s),C.call(I,I))):C;Ut(I,w,z)}Object.keys(I._hmrPayload.getters).forEach(w=>{w in S._hmrPayload.getters||On(I,w)}),Object.keys(I._hmrPayload.actions).forEach(w=>{w in S._hmrPayload.actions||On(I,w)}),I._hmrPayload=S._hmrPayload,I._getters=S._getters,I._hotUpdating=!1})),process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&Nt){const S={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(w=>{Object.defineProperty(I,w,oe({value:I[w]},S))})}return s._p.forEach(S=>{if(process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&Nt){const w=i.run(()=>S({store:I,app:s._a,pinia:s,options:l}));Object.keys(w||{}).forEach(C=>I._customProperties.add(C)),oe(I,w)}else oe(I,i.run(()=>S({store:I,app:s._a,pinia:s,options:l})))}),process.env.NODE_ENV!=="production"&&I.$state&&typeof I.$state=="object"&&typeof I.$state.constructor=="function"&&!I.$state.constructor.toString().includes("[native code]")&&console.warn(`[]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${I.$id}".`),f&&a&&n.hydrate&&n.hydrate(I.$state,f),u=!0,d=!0,I}/*! #__NO_SIDE_EFFECTS__ */function Jf(t,e,n){let s,o;const a=typeof e=="function";if(typeof t=="string")s=t,o=a?n:e;else if(o=t,s=t.id,process.env.NODE_ENV!=="production"&&typeof s!="string")throw new Error('[]: "defineStore()" must be passed a store id as its first argument.');function i(l,c){const u=r.hasInjectionContext();if(l=(process.env.NODE_ENV==="test"&&Pt&&Pt._testing?null:l)||(u?r.inject(Hf,null):null),l&&mn(l),process.env.NODE_ENV!=="production"&&!Pt)throw new Error(`[]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);l=Pt,l._s.has(s)||(a?Os(s,e,o,l):na(s,o,l),process.env.NODE_ENV!=="production"&&(i._pinia=l));const d=l._s.get(s);if(process.env.NODE_ENV!=="production"&&c){const h="__hot:"+s,p=a?Os(h,e,o,l,!0):na(h,oe({},o),l,!0);c._hotUpdate(p),delete l.state.value[h],l._s.delete(h)}if(process.env.NODE_ENV!=="production"&&Nt){const h=r.getCurrentInstance();if(h&&h.proxy&&!c){const p=h.proxy,g="_pStores"in p?p._pStores:p._pStores={};g[s]=d}}return d}return i.$id=s,i}const sa=Jf("workspace",()=>{const t=r.ref(null),e=r.ref([]),n=r.ref(null),s=u=>{t.value=u,localStorage.setItem("current_workspace",JSON.stringify(u))},o=u=>{e.value=u,localStorage.setItem("available_workspaces",JSON.stringify(u))};return{currentWorkspace:t,workspaces:e,user:n,setCurrentWorkspace:s,setWorkspaces:o,setUser:u=>{n.value=u,localStorage.setItem("user_info",JSON.stringify(u))},loadPersistedData:()=>{const u=localStorage.getItem("current_workspace");if(u)try{t.value=JSON.parse(u)}catch(p){console.error("Error loading persisted workspace:",p)}const d=localStorage.getItem("available_workspaces");if(d)try{e.value=JSON.parse(d)}catch(p){console.error("Error loading persisted workspaces:",p)}const h=localStorage.getItem("user_info");if(h)try{n.value=JSON.parse(h)}catch(p){console.error("Error loading persisted user:",p)}},clearData:()=>{t.value=null,e.value=[],n.value=null,localStorage.removeItem("current_workspace"),localStorage.removeItem("available_workspaces"),localStorage.removeItem("user_info")},loadWorkspaces:async(u=!1)=>{try{const{data:{user:d}}=await ne.auth.getUser();if(!d)return[];let h=ne.from("workspaces").select(`
          id, title, description, parent_workspace_id, created_by, archived, created_at,
          workspace_access!inner ( access_type, shared_with_user_id ),
          workspace_activities!left ( updated_at )
        `).eq("workspace_access.shared_with_user_id",d.id);u||(h=h.eq("archived",!1));const{data:p,error:g}=await h;if(g)throw g;const f=new Map;(p||[]).forEach(_=>{(_.workspace_access||[]).forEach(O=>{O.shared_with_user_id===d.id&&f.set(_.id,O)})});const m=[...new Set((p||[]).filter(_=>_.parent_workspace_id).map(_=>_.parent_workspace_id).filter(_=>!f.has(_)))];let b=[];if(m.length){let _=ne.from("workspaces").select("id, title, description, parent_workspace_id, created_by, archived, created_at").in("id",m);u||(_=_.eq("archived",!1));const{data:O,error:N}=await _;if(N)throw N;b=O||[]}const k=[...p||[],...b].map(_=>{var O,N,P;return{id:_.id,title:_.title,description:_.description||"No description",parent_workspace_id:_.parent_workspace_id,created_by:_.created_by,archived:_.archived,created_at:_.created_at,latest_activity:((N=(O=_.workspace_activities)==null?void 0:O[0])==null?void 0:N.updated_at)||_.created_at,hasAccess:f.has(_.id),accessType:((P=f.get(_.id))==null?void 0:P.access_type)||null}});return k.sort((_,O)=>new Date(O.latest_activity)-new Date(_.latest_activity)),o(k),k}catch(d){return console.error("loadWorkspaces error",d),[]}}}}),Yf={class:"aiworkspace-header"},Xf={key:0,class:"header-content header-loading"},Zf={key:1,class:"header-content"},Qf={class:"header-left"},ep={class:"logo-section"},tp={href:"/",class:"logo"},np=["src"],sp={key:1,class:"text-logo"},rp={key:0,class:"header-center"},op={class:"main-navigation"},ap={class:"nav-item"},ip=["href","onClick"],lp={class:"workspace-icon"},cp={key:1,class:"nav-divider"},up={class:"nav-item"},dp=["href","onClick"],hp={class:"header-right"},fp={class:"user-profile"},pp={class:"user-info"},gp={class:"user-name"},mp={class:"user-avatar"},yp=["src","alt"],_p={key:1,class:"avatar-placeholder"},bp={key:2,class:"unauth-message"},wp={class:"workspace-list"},vp=["onClick"],kp={class:"workspace-icon"},Sp={class:"workspace-details"},Ep={class:"workspace-members"},Cp={key:0,class:"current-indicator"},Tp=r.defineComponent({__name:"AIWorkspaceHeader",props:{showUserMenu:{type:Boolean,default:!0},showNotifications:{type:Boolean},customLogo:{default:""},customLinks:{default:()=>[]},showWorkspaceSelector:{type:Boolean,default:!0},showSecondaryNavigation:{type:Boolean,default:!0},currentWorkspaceId:{},onWorkspaceChange:{},onLogout:{},onLogin:{},onProfileClick:{},onSettingsClick:{}},emits:["workspaceChange","logout","login","profileClick","settingsClick"],setup(t,{emit:e}){const n=t,s=e,{authState:o,logout:a}=Yo(),i=()=>{try{return sa()}catch{return console.warn("[AIWorkspaceHeader] Pinia not initialized yet, using fallback state"),null}},l=r.ref(i()),c=r.computed(()=>!!l.value),u=()=>{if(!l.value){const A=i();A&&(l.value=A,console.log("[AIWorkspaceHeader] Pinia store initialized successfully"))}};r.watch(c,A=>{A||setTimeout(u,100)});const d=r.ref(!1),h=r.ref([]),p=r.ref([]),g=r.ref({name:"",email:"",avatar_url:null,initials:""}),f=r.ref([]),m=r.ref([]),b=r.computed(()=>o.value.isAuthenticated),y=r.computed(()=>l.value?l.value.currentWorkspace:null),k=r.ref([{label:"Dashboard",key:"dashboard",url:"/dashboard"},{label:"Goals",key:"goals",url:"/goals"},{label:"Tasks",key:"tasks",url:"/tasks"},{label:"Events",key:"events",url:"/events"},{label:"Drive",key:"files",url:"/files"},{label:"Outlines",key:"outlines",url:"/outlines"},{label:"Communications",key:"communications",url:"/communications"},{label:"Canvas",key:"canvas",url:"/canvas"},{label:"AI Phone",key:"ai_phone",url:"/ai_phone"},{label:"AI Intake",key:"ai_intake",url:"/ai_intake"},{label:"AI Fax",key:"ai_fax",url:"/ai_fax"},{label:"AI Portfolios",key:"ai-portfolios",url:"/ai-portfolios"},{label:"AI Fund Analyst",key:"ai_fund_analyst",url:"/ai_fund_analyst"},{label:"Contacts",key:"contacts",url:"/contacts"},{label:"Settings",key:"settings",url:"/settings"}]),_=r.computed(()=>"Dashboard"),O=A=>{const v=new Map;A.forEach($=>{v.set($.id,{...$,children:[]})});const T=[];v.forEach($=>{$.parent_workspace_id&&v.has($.parent_workspace_id)?v.get($.parent_workspace_id).children.push($):T.push($)});const x=$=>{$.sort((W,ae)=>W.title.localeCompare(ae.title)),$.forEach(W=>{W.children&&x(W.children)})};return x(T),T},N=(A,v=0,T=[])=>(A.forEach(x=>{T.push({...x,level:v}),x.children&&x.children.length&&N(x.children,v+1,T)}),T),P=async()=>{var A,v,T;try{const x=await((A=l.value)==null?void 0:A.loadWorkspaces());if(f.value=O(x||[]),m.value=N(f.value),p.value=m.value,h.value=m.value,n.currentWorkspaceId){const $=m.value.find(W=>{var ae;return W.id.toString()===((ae=n.currentWorkspaceId)==null?void 0:ae.toString())});$&&((v=l.value)==null||v.setCurrentWorkspace($))}else!y.value&&m.value.length&&((T=l.value)==null||T.setCurrentWorkspace(m.value[0]))}catch(x){console.error("loadWorkspaces (header) error",x)}},I=A=>{if(console.log("Navigation command:",A),A==="all-workspace"){window.location.href="https://all-ws-dashboard.aiworkspace.pro/all-workspace/dashboard";return}if(A.startsWith("workspace-")){const v=A.replace("workspace-",""),T=p.value.find(x=>x.id===parseInt(v));T&&w(T);return}},L=A=>{const v=y.value;switch(A.key){case"dashboard":v?window.location.href=`/single-workspace/${v.id}/dashboard`:window.location.href="/";break;case"outlines":if(v){const T=`https://outline.aiworkspace.pro/single-workspace/${v.id}/outlines`;window.location.href=T}else window.location.href="https://outline.aiworkspace.pro";break;case"canvas":if(v){const T=`https://canvas.aiworkspace.pro/single-workspace/${v.id}/canvas`;window.location.href=T}else window.location.href="https://canvas.aiworkspace.pro";break;case"files":if(v){const T=`https://drive.aiworkspace.pro/single-workspace/${v.id}/files`;window.location.href=T}else window.location.href="https://drive.aiworkspace.pro";break;case"tasks":if(v){const T=`https://tasks.aiworkspace.pro/single-workspace/${v.id}/tasks`;window.location.href=T}else window.location.href="https://tasks.aiworkspace.pro";break;case"ai-portfolios":if(v){const T=`https://spreadsheet.aiworkspace.pro/single-workspace/${v.id}/ai-portfolios`;window.location.href=T}else window.location.href="https://spreadsheet.aiworkspace.pro";break;default:if(v){const T=`https://app.aiworkspace.pro/single-workspace/${v.id}/${A.key}`;window.location.href=T}else{const T=`https://app.aiworkspace.pro/${A.key}`;window.location.href=T}break}},D=A=>{const v=y.value;switch(A.key){case"dashboard":return v?`/single-workspace/${v.id}/dashboard`:"/";case"ai-portfolios":return v?`https://spreadsheet.aiworkspace.pro/single-workspace/${v.id}/ai-portfolios`:"https://spreadsheet.aiworkspace.pro";case"outlines":return v?`https://outline.aiworkspace.pro/single-workspace/${v.id}/outlines`:"https://outline.aiworkspace.pro";case"canvas":return v?`https://canvas.aiworkspace.pro/single-workspace/${v.id}/canvas`:"https://canvas.aiworkspace.pro";case"files":return v?`https://drive.aiworkspace.pro/single-workspace/${v.id}/files`:"https://drive.aiworkspace.pro";case"tasks":return v?`https://tasks.aiworkspace.pro/single-workspace/${v.id}/tasks`:"https://tasks.aiworkspace.pro";default:return v?`https://app.aiworkspace.pro/single-workspace/${v.id}/${A.key}`:`https://app.aiworkspace.pro/${A.key}`}},S=A=>{switch(A){case"profile":n.onProfileClick?n.onProfileClick():tn.info("Profile settings coming soon");break;case"workspaces":d.value=!0;break;case"logout":z();break}},w=A=>{var v;(v=l.value)==null||v.setCurrentWorkspace(A),d.value=!1,s("workspaceChange",A),tn.success(`Switched to ${A.title}`)},C=()=>{io.prompt("Enter workspace name:","Create New Workspace",{confirmButtonText:"Create",cancelButtonText:"Cancel",inputPattern:/\S/,inputErrorMessage:"Workspace name cannot be empty"}).then(({value:A})=>{var T;const v={id:Date.now(),title:A,description:"New workspace",archived:!1,created_by:"",created_at:new Date().toISOString(),latest_activity:new Date().toISOString(),hasAccess:!0,accessType:"edit"};h.value.push(v),(T=l.value)==null||T.setWorkspaces(h.value),w(v),tn.success(`Created workspace: ${A}`)}).catch(()=>{})},z=()=>{io.confirm("Are you sure you want to sign out?","Sign Out",{confirmButtonText:"Sign Out",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{var A;(A=l.value)==null||A.clearData(),await a(),s("logout"),tn.success("Signed out successfully")}).catch(()=>{})},ee=async()=>{var A,v;if(o.value.user){const T=o.value.user;g.value={name:T.name||((A=T.email)==null?void 0:A.split("@")[0])||"User",email:T.email||"",avatar_url:T.avatar_url||null,initials:(T.name||((v=T.email)==null?void 0:v.split("@")[0])||"U").split(" ").map(x=>x[0]).join("").toUpperCase().substring(0,2)},n.showWorkspaceSelector&&await P()}};return r.watch(()=>o.value.user,A=>{var v;A?ee():(g.value={name:"",email:"",avatar_url:null,initials:""},(v=l.value)==null||v.clearData())}),r.watch(()=>n.currentWorkspaceId,A=>{var v;if(A&&m.value.length){const T=m.value.find(x=>x.id.toString()===A.toString());T&&((v=l.value)==null||v.setCurrentWorkspace(T))}}),r.onMounted(async()=>{b.value&&await ee()}),(A,v)=>{const T=r.resolveComponent("el-icon"),x=r.resolveComponent("el-dropdown-item"),$=r.resolveComponent("el-tag"),W=r.resolveComponent("el-dropdown-menu"),ae=r.resolveComponent("el-dropdown"),yn=r.resolveComponent("el-button"),Is=r.resolveComponent("el-dialog");return r.openBlock(),r.createElementBlock("header",Yf,[c.value?b.value?(r.openBlock(),r.createElementBlock("div",Zf,[r.createElementVNode("div",Qf,[r.createElementVNode("div",ep,[r.createElementVNode("a",tp,[A.customLogo?(r.openBlock(),r.createElementBlock("img",{key:0,src:A.customLogo,alt:"AIWorkspace",class:"logo-image"},null,8,np)):(r.openBlock(),r.createElementBlock("div",sp,[...v[7]||(v[7]=[r.createElementVNode("span",{class:"logo-text"},"AI Workspace",-1)])]))])])]),A.showSecondaryNavigation?(r.openBlock(),r.createElementBlock("div",rp,[r.createElementVNode("nav",op,[A.showWorkspaceSelector?(r.openBlock(),r.createBlock(ae,{key:0,onCommand:I,trigger:"hover"},{dropdown:r.withCtx(()=>[r.createVNode(W,{class:"workspace-tree-dropdown"},{default:r.withCtx(()=>[r.createVNode(x,{command:"all-workspace"},{default:r.withCtx(()=>[...v[8]||(v[8]=[r.createElementVNode("a",{href:"https://all-ws-dashboard.aiworkspace.pro/all-workspace/dashboard",class:"nav-link"},[r.createElementVNode("div",{class:"workspace-dropdown-item"},[r.createElementVNode("span",{class:"workspace-icon"},""),r.createElementVNode("span",null,"All workspace")])],-1)])]),_:1}),m.value.length>0?(r.openBlock(),r.createBlock(x,{key:0,divided:"",disabled:""})):r.createCommentVNode("",!0),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(m.value,B=>(r.openBlock(),r.createBlock(x,{key:B.id,command:`workspace-${B.id}`},{default:r.withCtx(()=>{var ke;return[r.createElementVNode("a",{href:`/single-workspace/${B.id}/dashboard`,class:"nav-link",onClick:r.withModifiers(Se=>w(B),["prevent"])},[r.createElementVNode("div",{class:"workspace-dropdown-item",style:r.normalizeStyle({paddingLeft:(B.level||0)*16+"px"})},[r.createElementVNode("span",lp,r.toDisplayString(B.children&&B.children.length?"":""),1),r.createElementVNode("span",null,r.toDisplayString(B.title),1),B.id===((ke=y.value)==null?void 0:ke.id)?(r.openBlock(),r.createBlock($,{key:0,size:"small",type:"success"},{default:r.withCtx(()=>[...v[9]||(v[9]=[r.createTextVNode("Current",-1)])]),_:1})):r.createCommentVNode("",!0)],4)],8,ip)]}),_:2},1032,["command"]))),128)),m.value.length===0?(r.openBlock(),r.createBlock(x,{key:1,disabled:""},{default:r.withCtx(()=>[...v[10]||(v[10]=[r.createTextVNode(" No workspaces ",-1)])]),_:1})):r.createCommentVNode("",!0)]),_:1})]),default:r.withCtx(()=>{var B;return[r.createElementVNode("span",ap,[r.createTextVNode(r.toDisplayString(((B=y.value)==null?void 0:B.title)||"Select Workspace")+" ",1),r.createVNode(T,{class:"nav-arrow"},{default:r.withCtx(()=>[r.createVNode(r.unref(Tr))]),_:1})])]}),_:1})):r.createCommentVNode("",!0),A.showWorkspaceSelector?(r.openBlock(),r.createElementBlock("span",cp,"/")):r.createCommentVNode("",!0),A.showSecondaryNavigation?(r.openBlock(),r.createBlock(ae,{key:2,trigger:"hover"},{dropdown:r.withCtx(()=>[r.createVNode(W,null,{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(k.value,B=>(r.openBlock(),r.createBlock(x,{key:B.label,class:r.normalizeClass({active:B.active})},{default:r.withCtx(()=>[r.createElementVNode("a",{href:D(B),class:"nav-link",onClick:r.withModifiers(ke=>L(B),["prevent"])},r.toDisplayString(B.label),9,dp)]),_:2},1032,["class"]))),128))]),_:1})]),default:r.withCtx(()=>[r.createElementVNode("span",up,[r.createTextVNode(r.toDisplayString(_.value)+" ",1),r.createVNode(T,{class:"nav-arrow"},{default:r.withCtx(()=>[r.createVNode(r.unref(Tr))]),_:1})])]),_:1})):r.createCommentVNode("",!0)])])):r.createCommentVNode("",!0),r.createElementVNode("div",hp,[r.createVNode(ae,{onCommand:S,trigger:"click",placement:"bottom-end"},{dropdown:r.withCtx(()=>[r.createVNode(W,null,{default:r.withCtx(()=>[r.createVNode(x,null,{default:r.withCtx(()=>[r.createElementVNode("a",{href:"/profile",class:"nav-link",onClick:v[0]||(v[0]=r.withModifiers(B=>S("profile"),["prevent"]))},"Profile Settings")]),_:1}),A.showWorkspaceSelector?(r.openBlock(),r.createBlock(x,{key:0},{default:r.withCtx(()=>[r.createElementVNode("a",{href:"#switch-workspace",class:"nav-link",onClick:v[1]||(v[1]=r.withModifiers(B=>S("workspaces"),["prevent"]))},"Switch Workspace")]),_:1})):r.createCommentVNode("",!0),r.createVNode(x,{divided:""},{default:r.withCtx(()=>[r.createElementVNode("a",{href:"#signout",class:"nav-link",onClick:v[2]||(v[2]=r.withModifiers(B=>S("logout"),["prevent"]))},"Sign Out")]),_:1})]),_:1})]),default:r.withCtx(()=>[r.createElementVNode("div",fp,[r.createElementVNode("div",pp,[r.createElementVNode("span",gp,r.toDisplayString(g.value.name),1)]),r.createElementVNode("div",mp,[g.value.avatar_url?(r.openBlock(),r.createElementBlock("img",{key:0,src:g.value.avatar_url,alt:g.value.name},null,8,yp)):(r.openBlock(),r.createElementBlock("span",_p,r.toDisplayString(g.value.initials),1))])])]),_:1})])])):(r.openBlock(),r.createElementBlock("div",bp,[...v[11]||(v[11]=[r.createElementVNode("div",{class:"unauth-inner"},[r.createElementVNode("strong",null,"Authentication required."),r.createTextVNode(" Please log in to access the workspace. ")],-1)])])):(r.openBlock(),r.createElementBlock("div",Xf,[...v[6]||(v[6]=[r.createStaticVNode('<div class="header-left" data-v-1f4ec796><div class="logo-section" data-v-1f4ec796><a href="/" class="logo" data-v-1f4ec796><div class="text-logo" data-v-1f4ec796><span class="logo-text" data-v-1f4ec796>AI Workspace</span></div></a></div></div><div class="header-center" data-v-1f4ec796><span class="loading-text" data-v-1f4ec796>Initializing...</span></div>',2)])])),b.value&&A.showWorkspaceSelector?(r.openBlock(),r.createBlock(Is,{key:3,modelValue:d.value,"onUpdate:modelValue":v[4]||(v[4]=B=>d.value=B),title:"Switch Workspace",width:"500px",onClose:v[5]||(v[5]=B=>d.value=!1)},{footer:r.withCtx(()=>[r.createVNode(yn,{onClick:v[3]||(v[3]=B=>d.value=!1)},{default:r.withCtx(()=>[...v[12]||(v[12]=[r.createTextVNode("Cancel",-1)])]),_:1}),r.createVNode(yn,{type:"primary",onClick:C},{default:r.withCtx(()=>[...v[13]||(v[13]=[r.createTextVNode("Create New Workspace",-1)])]),_:1})]),default:r.withCtx(()=>[r.createElementVNode("div",wp,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(h.value,B=>{var ke,Se;return r.openBlock(),r.createElementBlock("div",{key:B.id,class:r.normalizeClass(["workspace-item",{active:B.id===((ke=y.value)==null?void 0:ke.id)}]),onClick:Ap=>w(B)},[r.createElementVNode("div",kp,r.toDisplayString(B.children&&B.children.length?"":""),1),r.createElementVNode("div",Sp,[r.createElementVNode("h3",null,r.toDisplayString(B.title),1),r.createElementVNode("p",null,r.toDisplayString(B.description),1),r.createElementVNode("span",Ep,r.toDisplayString(B.hasAccess?"Active":"Inactive"),1)]),B.id===((Se=y.value)==null?void 0:Se.id)?(r.openBlock(),r.createElementBlock("div",Cp,[r.createVNode(T,null,{default:r.withCtx(()=>[r.createVNode(r.unref(bc))]),_:1})])):r.createCommentVNode("",!0)],10,vp)}),128))])]),_:1},8,["modelValue"])):r.createCommentVNode("",!0)])}}}),Yp="",Op=((t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n})(Tp,[["__scopeId","data-v-1f4ec796"]]),ra="aiworkspace_auth",oa="aiworkspace_user_id";function Ip(){const t=r.ref({user:null,isAuthenticated:!1,isLoading:!0}),e=i=>{var u;const c=`; ${document.cookie}`.split(`; ${i}=`);return c.length===2&&((u=c.pop())==null?void 0:u.split(";").shift())||null},n=(i,l,c=7)=>{const u=new Date;u.setTime(u.getTime()+c*24*60*60*1e3),document.cookie=`${i}=${l};expires=${u.toUTCString()};path=/;domain=.aiworkspace.pro`},s=i=>{document.cookie=`${i}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.aiworkspace.pro`},o=async()=>{try{const i=e(ra),l=e(oa);i&&l?t.value={user:{id:l,email:""},isAuthenticated:!0,isLoading:!1}:t.value={user:null,isAuthenticated:!1,isLoading:!1}}catch(i){console.error("Auth check failed:",i),t.value={user:null,isAuthenticated:!1,isLoading:!1}}},a=()=>{s(ra),s(oa),t.value={user:null,isAuthenticated:!1,isLoading:!1}};return r.onMounted(()=>{o()}),{authState:t,checkAuth:o,logout:a,getCookie:e,setCookie:n,clearCookie:s}}M.ACCESS_COOKIE=pe,M.AIWorkspaceHeader=Op,M.LS_ACCESS_KEY=ws,M.LS_REFRESH_KEY=vs,M.REFRESH_COOKIE=ge,M.buildOAuthRedirectUrl=Ff,M.clearLocalStorageTokens=Go,M.clearSessionCookie=_s,M.ensureCrossSubdomainCookies=bs,M.getCookie=je,M.getPostLoginBase=zf,M.restoreCrossSubdomainSession=Wf,M.restoreSessionWithRetry=ks,M.setSessionCookie=Be,M.setupAuthStateListener=Jo,M.supabase=ne,M.syncCookiesToLocalStorage=At,M.useAuth=Ip,M.useEnhancedAuth=Yo,M.useWorkspaceStore=sa,Object.defineProperty(M,Symbol.toStringTag,{value:"Module"})});
