(function(U,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(U=typeof globalThis<"u"?globalThis:U||self,s(U.AIWorkspaceHeader={},U.Vue))})(this,function(U,s){"use strict";const Ar=Symbol(),Rt="el",ma="is-",Be=(t,e,n,r,o)=>{let a=`${t}-${e}`;return n&&(a+=`-${n}`),r&&(a+=`__${r}`),o&&(a+=`--${o}`),a},Pr=Symbol("namespaceContextKey"),Nr=t=>{const e=t||(s.getCurrentInstance()?s.inject(Pr,s.ref(Rt)):s.ref(Rt));return s.computed(()=>s.unref(e)||Rt)},ue=(t,e)=>{const n=Nr(e);return{namespace:n,b:(y="")=>Be(n.value,t,y,"",""),e:y=>y?Be(n.value,t,"",y,""):"",m:y=>y?Be(n.value,t,"","",y):"",be:(y,w)=>y&&w?Be(n.value,t,y,w,""):"",em:(y,w)=>y&&w?Be(n.value,t,"",y,w):"",bm:(y,w)=>y&&w?Be(n.value,t,y,"",w):"",bem:(y,w,m)=>y&&w&&m?Be(n.value,t,y,w,m):"",is:(y,...w)=>{const m=w.length>=1?w[0]:!0;return y&&m?`${ma}${y}`:""},cssVar:y=>{const w={};for(const m in y)y[m]&&(w[`--${n.value}-${m}`]=y[m]);return w},cssVarName:y=>`--${n.value}-${y}`,cssVarBlock:y=>{const w={};for(const m in y)y[m]&&(w[`--${n.value}-${t}-${m}`]=y[m]);return w},cssVarBlockName:y=>`--${n.value}-${t}-${y}`}};/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/process.env.NODE_ENV!=="production"&&Object.freeze({}),process.env.NODE_ENV!=="production"&&Object.freeze([]);const dt=()=>{},ya=Object.prototype.hasOwnProperty,ht=(t,e)=>ya.call(t,e),ge=t=>typeof t=="function",ne=t=>typeof t=="string",qe=t=>t!==null&&typeof t=="object",_a=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},ba=/-\w/g,wa=_a(t=>t.replace(ba,e=>e.slice(1).toUpperCase()));var va=typeof global=="object"&&global&&global.Object===Object&&global;const ka=va;var Sa=typeof self=="object"&&self&&self.Object===Object&&self,Ea=ka||Sa||Function("return this")();const yn=Ea;var Ca=yn.Symbol;const ve=Ca;var xr=Object.prototype,Ta=xr.hasOwnProperty,Oa=xr.toString,ft=ve?ve.toStringTag:void 0;function Ia(t){var e=Ta.call(t,ft),n=t[ft];try{t[ft]=void 0;var r=!0}catch{}var o=Oa.call(t);return r&&(e?t[ft]=n:delete t[ft]),o}var Aa=Object.prototype,Pa=Aa.toString;function Na(t){return Pa.call(t)}var xa="[object Null]",$a="[object Undefined]",$r=ve?ve.toStringTag:void 0;function _n(t){return t==null?t===void 0?$a:xa:$r&&$r in Object(t)?Ia(t):Na(t)}function bn(t){return t!=null&&typeof t=="object"}var Ra="[object Symbol]";function wn(t){return typeof t=="symbol"||bn(t)&&_n(t)==Ra}function Ba(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var ja=Array.isArray;const pt=ja;var La=1/0,Rr=ve?ve.prototype:void 0,Br=Rr?Rr.toString:void 0;function jr(t){if(typeof t=="string")return t;if(pt(t))return Ba(t,jr)+"";if(wn(t))return Br?Br.call(t):"";var e=t+"";return e=="0"&&1/t==-La?"-0":e}function Bt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Da(t){return t}var Ma="[object AsyncFunction]",Ua="[object Function]",Va="[object GeneratorFunction]",Fa="[object Proxy]";function za(t){if(!Bt(t))return!1;var e=_n(t);return e==Ua||e==Va||e==Ma||e==Fa}var Wa=yn["__core-js_shared__"];const vn=Wa;var Lr=function(){var t=/[^.]+$/.exec(vn&&vn.keys&&vn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ha(t){return!!Lr&&Lr in t}var Ka=Function.prototype,qa=Ka.toString;function Ga(t){if(t!=null){try{return qa.call(t)}catch{}try{return t+""}catch{}}return""}var Ja=/[\\^$.*+?()[\]{}|]/g,Ya=/^\[object .+?Constructor\]$/,Xa=Function.prototype,Za=Object.prototype,Qa=Xa.toString,ei=Za.hasOwnProperty,ti=RegExp("^"+Qa.call(ei).replace(Ja,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ni(t){if(!Bt(t)||Ha(t))return!1;var e=za(t)?ti:Ya;return e.test(Ga(t))}function ri(t,e){return t==null?void 0:t[e]}function kn(t,e){var n=ri(t,e);return ni(n)?n:void 0}function si(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var oi=800,ai=16,ii=Date.now;function li(t){var e=0,n=0;return function(){var r=ii(),o=ai-(r-n);if(n=r,o>0){if(++e>=oi)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function ci(t){return function(){return t}}var ui=function(){try{var t=kn(Object,"defineProperty");return t({},"",{}),t}catch{}}();const jt=ui;var di=jt?function(t,e){return jt(t,"toString",{configurable:!0,enumerable:!1,value:ci(e),writable:!0})}:Da,hi=li(di);const fi=hi;var pi=9007199254740991,gi=/^(?:0|[1-9]\d*)$/;function Dr(t,e){var n=typeof t;return e=e??pi,!!e&&(n=="number"||n!="symbol"&&gi.test(t))&&t>-1&&t%1==0&&t<e}function mi(t,e,n){e=="__proto__"&&jt?jt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Mr(t,e){return t===e||t!==t&&e!==e}var yi=Object.prototype,_i=yi.hasOwnProperty;function bi(t,e,n){var r=t[e];(!(_i.call(t,e)&&Mr(r,n))||n===void 0&&!(e in t))&&mi(t,e,n)}var Ur=Math.max;function wi(t,e,n){return e=Ur(e===void 0?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=Ur(r.length-e,0),i=Array(a);++o<a;)i[o]=r[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=r[o];return l[e]=n(i),si(t,this,l)}}var vi=9007199254740991;function ki(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vi}var Si="[object Arguments]";function Vr(t){return bn(t)&&_n(t)==Si}var Fr=Object.prototype,Ei=Fr.hasOwnProperty,Ci=Fr.propertyIsEnumerable,Ti=Vr(function(){return arguments}())?Vr:function(t){return bn(t)&&Ei.call(t,"callee")&&!Ci.call(t,"callee")};const zr=Ti;var Oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ii=/^\w*$/;function Ai(t,e){if(pt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||wn(t)?!0:Ii.test(t)||!Oi.test(t)||e!=null&&t in Object(e)}var Pi=kn(Object,"create");const gt=Pi;function Ni(){this.__data__=gt?gt(null):{},this.size=0}function xi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $i="__lodash_hash_undefined__",Ri=Object.prototype,Bi=Ri.hasOwnProperty;function ji(t){var e=this.__data__;if(gt){var n=e[t];return n===$i?void 0:n}return Bi.call(e,t)?e[t]:void 0}var Li=Object.prototype,Di=Li.hasOwnProperty;function Mi(t){var e=this.__data__;return gt?e[t]!==void 0:Di.call(e,t)}var Ui="__lodash_hash_undefined__";function Vi(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gt&&e===void 0?Ui:e,this}function je(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}je.prototype.clear=Ni,je.prototype.delete=xi,je.prototype.get=ji,je.prototype.has=Mi,je.prototype.set=Vi;function Fi(){this.__data__=[],this.size=0}function Lt(t,e){for(var n=t.length;n--;)if(Mr(t[n][0],e))return n;return-1}var zi=Array.prototype,Wi=zi.splice;function Hi(t){var e=this.__data__,n=Lt(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Wi.call(e,n,1),--this.size,!0}function Ki(t){var e=this.__data__,n=Lt(e,t);return n<0?void 0:e[n][1]}function qi(t){return Lt(this.__data__,t)>-1}function Gi(t,e){var n=this.__data__,r=Lt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ge(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ge.prototype.clear=Fi,Ge.prototype.delete=Hi,Ge.prototype.get=Ki,Ge.prototype.has=qi,Ge.prototype.set=Gi;var Ji=kn(yn,"Map");const Yi=Ji;function Xi(){this.size=0,this.__data__={hash:new je,map:new(Yi||Ge),string:new je}}function Zi(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Dt(t,e){var n=t.__data__;return Zi(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Qi(t){var e=Dt(this,t).delete(t);return this.size-=e?1:0,e}function el(t){return Dt(this,t).get(t)}function tl(t){return Dt(this,t).has(t)}function nl(t,e){var n=Dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Le(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Le.prototype.clear=Xi,Le.prototype.delete=Qi,Le.prototype.get=el,Le.prototype.has=tl,Le.prototype.set=nl;var rl="Expected a function";function Sn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(rl);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(Sn.Cache||Le),n}Sn.Cache=Le;var sl=500;function ol(t){var e=Sn(t,function(r){return n.size===sl&&n.clear(),r}),n=e.cache;return e}var al=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,il=/\\(\\)?/g,ll=ol(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(al,function(n,r,o,a){e.push(o?a.replace(il,"$1"):r||n)}),e});const cl=ll;function ul(t){return t==null?"":jr(t)}function Mt(t,e){return pt(t)?t:Ai(t,e)?[t]:cl(ul(t))}var dl=1/0;function En(t){if(typeof t=="string"||wn(t))return t;var e=t+"";return e=="0"&&1/t==-dl?"-0":e}function Wr(t,e){e=Mt(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[En(e[n++])];return n&&n==r?t:void 0}function hl(t,e,n){var r=t==null?void 0:Wr(t,e);return r===void 0?n:r}function fl(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var Hr=ve?ve.isConcatSpreadable:void 0;function pl(t){return pt(t)||zr(t)||!!(Hr&&t&&t[Hr])}function Kr(t,e,n,r,o){var a=-1,i=t.length;for(n||(n=pl),o||(o=[]);++a<i;){var l=t[a];e>0&&n(l)?e>1?Kr(l,e-1,n,r,o):fl(o,l):r||(o[o.length]=l)}return o}function gl(t){var e=t==null?0:t.length;return e?Kr(t,1):[]}function ml(t){return fi(wi(t,void 0,gl),t+"")}function yl(t,e){return t!=null&&e in Object(t)}function _l(t,e,n){e=Mt(e,t);for(var r=-1,o=e.length,a=!1;++r<o;){var i=En(e[r]);if(!(a=t!=null&&n(t,i)))break;t=t[i]}return a||++r!=o?a:(o=t==null?0:t.length,!!o&&ki(o)&&Dr(i,o)&&(pt(t)||zr(t)))}function bl(t,e){return t!=null&&_l(t,e,yl)}function qr(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r}function Gr(t){return t==null}function wl(t,e,n,r){if(!Bt(t))return t;e=Mt(e,t);for(var o=-1,a=e.length,i=a-1,l=t;l!=null&&++o<a;){var c=En(e[o]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(o!=i){var d=l[c];u=r?r(d,c,l):void 0,u===void 0&&(u=Bt(d)?d:Dr(e[o+1])?[]:{})}bi(l,c,u),l=l[c]}return t}function vl(t,e,n){for(var r=-1,o=e.length,a={};++r<o;){var i=e[r],l=Wr(t,i);n(l,i)&&wl(a,Mt(i,t),l)}return a}function kl(t,e){return vl(t,e,function(n,r){return bl(t,r)})}var Sl=ml(function(t,e){return t==null?{}:kl(t,e)});const El=Sl,Jr=t=>t===void 0,Cn=t=>typeof t=="boolean",me=t=>typeof t=="number",mt=t=>typeof Element>"u"?!1:t instanceof Element,Cl=t=>ne(t)?!Number.isNaN(Number(t)):!1;var Tl=!1;function Ut(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function Tn(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}var Ol=Object.defineProperty,Il=Object.defineProperties,Al=Object.getOwnPropertyDescriptors,Yr=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Nl=Object.prototype.propertyIsEnumerable,Xr=(t,e,n)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xl=(t,e)=>{for(var n in e||(e={}))Pl.call(e,n)&&Xr(t,n,e[n]);if(Yr)for(var n of Yr(e))Nl.call(e,n)&&Xr(t,n,e[n]);return t},$l=(t,e)=>Il(t,Al(e));function Rl(t,e){var n;const r=s.shallowRef();return s.watchEffect(()=>{r.value=t()},$l(xl({},e),{flush:(n=e==null?void 0:e.flush)!=null?n:"sync"})),s.readonly(r)}var Zr;const X=typeof window<"u",Bl=t=>typeof t=="string",jl=()=>{};X&&((Zr=window==null?void 0:window.navigator)!=null&&Zr.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function On(t){return typeof t=="function"?t():s.unref(t)}function Ll(t){return t}function In(t){return s.getCurrentScope()?(s.onScopeDispose(t),!0):!1}function Dl(t,e=!0){s.getCurrentInstance()?s.onMounted(t):e?t():s.nextTick(t)}function Ml(t,e,n={}){const{immediate:r=!0}=n,o=s.ref(!1);let a=null;function i(){a&&(clearTimeout(a),a=null)}function l(){o.value=!1,i()}function c(...u){i(),o.value=!0,a=setTimeout(()=>{o.value=!1,a=null,t(...u)},On(e))}return r&&(o.value=!0,X&&c()),In(l),{isPending:s.readonly(o),start:c,stop:l}}function Qr(t){var e;const n=On(t);return(e=n==null?void 0:n.$el)!=null?e:n}const es=X?window:void 0;function Vt(...t){let e,n,r,o;if(Bl(t[0])||Array.isArray(t[0])?([n,r,o]=t,e=es):[e,n,r,o]=t,!e)return jl;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const a=[],i=()=>{a.forEach(d=>d()),a.length=0},l=(d,h,p,g)=>(d.addEventListener(h,p,g),()=>d.removeEventListener(h,p,g)),c=s.watch(()=>[Qr(e),On(o)],([d,h])=>{i(),d&&a.push(...n.flatMap(p=>r.map(g=>l(d,p,g,h))))},{immediate:!0,flush:"post"}),u=()=>{c(),i()};return In(u),u}function Ul(t,e=!1){const n=s.ref(),r=()=>n.value=!!t();return r(),Dl(r,e),n}const ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ns="__vueuse_ssr_handlers__";ts[ns]=ts[ns]||{};var rs=Object.getOwnPropertySymbols,Vl=Object.prototype.hasOwnProperty,Fl=Object.prototype.propertyIsEnumerable,zl=(t,e)=>{var n={};for(var r in t)Vl.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&rs)for(var r of rs(t))e.indexOf(r)<0&&Fl.call(t,r)&&(n[r]=t[r]);return n};function ss(t,e,n={}){const r=n,{window:o=es}=r,a=zl(r,["window"]);let i;const l=Ul(()=>o&&"ResizeObserver"in o),c=()=>{i&&(i.disconnect(),i=void 0)},u=s.watch(()=>Qr(t),h=>{c(),l.value&&o&&h&&(i=new ResizeObserver(e),i.observe(h,a))},{immediate:!0,flush:"post"}),d=()=>{c(),u()};return In(d),{isSupported:l,stop:d}}var os;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(os||(os={}));var Wl=Object.defineProperty,as=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Kl=Object.prototype.propertyIsEnumerable,is=(t,e,n)=>e in t?Wl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ql=(t,e)=>{for(var n in e||(e={}))Hl.call(e,n)&&is(t,n,e[n]);if(as)for(var n of as(e))Kl.call(e,n)&&is(t,n,e[n]);return t};ql({linear:Ll},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const ls={current:0},cs=s.ref(0),us=2e3,ds=Symbol("elZIndexContextKey"),hs=Symbol("zIndexContextKey"),Gl=t=>{const e=s.getCurrentInstance()?s.inject(ds,ls):ls,n=t||(s.getCurrentInstance()?s.inject(hs,void 0):void 0),r=s.computed(()=>{const i=s.unref(n);return me(i)?i:us}),o=s.computed(()=>r.value+cs.value),a=()=>(e.current++,cs.value=e.current,o.value);return!X&&s.inject(ds),{initialZIndex:r,currentZIndex:o,nextZIndex:a}};var Jl={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Yl=t=>(e,n)=>Xl(e,n,s.unref(t)),Xl=(t,e,n)=>hl(n,t,t).replace(/\{(\w+)\}/g,(r,o)=>{var a;return`${(a=e==null?void 0:e[o])!=null?a:`{${o}}`}`}),Zl=t=>{const e=s.computed(()=>s.unref(t).name),n=s.isRef(t)?t:s.ref(t);return{lang:e,locale:n,t:Yl(t)}},fs=Symbol("localeContextKey"),Ql=t=>{const e=t||s.inject(fs,s.ref());return Zl(s.computed(()=>e.value||Jl))},ps="__epPropKey",z=t=>t,ec=t=>qe(t)&&!!t[ps],gs=(t,e)=>{if(!qe(t)||ec(t))return t;const{values:n,required:r,default:o,type:a,validator:i}=t,c={type:a,required:!!r,validator:n||i?u=>{let d=!1,h=[];if(n&&(h=Array.from(n),ht(t,"default")&&h.push(o),d||(d=h.includes(u))),i&&(d||(d=i(u))),!d&&h.length>0){const p=[...new Set(h)].map(g=>JSON.stringify(g)).join(", ");s.warn(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${p}], got value ${JSON.stringify(u)}.`)}return d}:void 0,[ps]:!0};return ht(t,"default")&&(c.default=o),c},ye=t=>qr(Object.entries(t).map(([e,n])=>[e,gs(n,e)])),ms=["","default","small","large"],An=gs({type:String,values:ms,required:!1}),ys=Symbol("size"),tc=()=>{const t=s.inject(ys,{});return s.computed(()=>s.unref(t.size)||"")},nc=Symbol("emptyValuesContextKey"),rc=ye({emptyValues:Array,valueOnClear:{type:z([String,Number,Boolean,Function]),default:void 0,validator:t=>ge(t)?!t():!t}}),_s=t=>Object.keys(t),Ft=s.ref();function Pn(t,e=void 0){const n=s.getCurrentInstance()?s.inject(Ar,Ft):Ft;return t?s.computed(()=>{var r,o;return(o=(r=n.value)==null?void 0:r[t])!=null?o:e}):n}function bs(t,e){const n=Pn(),r=ue(t,s.computed(()=>{var l;return((l=n.value)==null?void 0:l.namespace)||Rt})),o=Ql(s.computed(()=>{var l;return(l=n.value)==null?void 0:l.locale})),a=Gl(s.computed(()=>{var l;return((l=n.value)==null?void 0:l.zIndex)||us})),i=s.computed(()=>{var l;return s.unref(e)||((l=n.value)==null?void 0:l.size)||""});return ws(s.computed(()=>s.unref(n)||{})),{ns:r,locale:o,zIndex:a,size:i}}const ws=(t,e,n=!1)=>{var r;const o=!!s.getCurrentInstance(),a=o?Pn():void 0,i=(r=e==null?void 0:e.provide)!=null?r:o?s.provide:void 0;if(!i)return;const l=s.computed(()=>{const c=s.unref(t);return a!=null&&a.value?sc(a.value,c):c});return i(Ar,l),i(fs,s.computed(()=>l.value.locale)),i(Pr,s.computed(()=>l.value.namespace)),i(hs,s.computed(()=>l.value.zIndex)),i(ys,{size:s.computed(()=>l.value.size||"")}),i(nc,s.computed(()=>({emptyValues:l.value.emptyValues,valueOnClear:l.value.valueOnClear}))),(n||!Ft.value)&&(Ft.value=l.value),l},sc=(t,e)=>{const n=[...new Set([..._s(t),..._s(e)])],r={};for(const o of n)r[o]=e[o]!==void 0?e[o]:t[o];return r},Nn="update:modelValue",vs="change",ks="input";var ke=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n};const Ss=(t="")=>t.split(" ").filter(e=>!!e.trim()),Es=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},oc=(t,e)=>{!t||!e.trim()||t.classList.add(...Ss(e))},ac=(t,e)=>{!t||!e.trim()||t.classList.remove(...Ss(e))},ic=(t,e)=>{var n;if(!X||!t||!e)return"";let r=wa(e);r==="float"&&(r="cssFloat");try{const o=t.style[r];if(o)return o;const a=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return a?a[r]:""}catch{return t.style[r]}};function yt(t,e="px"){if(!t)return"";if(me(t)||Cl(t))return`${t}${e}`;if(ne(t))return t}let zt;const lc=t=>{var e;if(!X)return 0;if(zt!==void 0)return zt;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",n.appendChild(o);const a=o.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),zt=r-a,zt};class cc extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function uc(t,e){throw new cc(`[${t}] ${e}`)}function Lp(t,e){}const Wt=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},dc=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),hc=t=>(t.install=dt,t),fc=ye({size:{type:z([Number,String])},color:{type:String}}),pc=s.defineComponent({name:"ElIcon",inheritAttrs:!1}),gc=s.defineComponent({...pc,props:fc,setup(t){const e=t,n=ue("icon"),r=s.computed(()=>{const{size:o,color:a}=e;return!o&&!a?{}:{fontSize:Jr(o)?void 0:yt(o),"--color":a}});return(o,a)=>(s.openBlock(),s.createElementBlock("i",s.mergeProps({class:s.unref(n).b(),style:s.unref(r)},o.$attrs),[s.renderSlot(o.$slots,"default")],16))}});var mc=ke(gc,[["__file","icon.vue"]]);const de=Wt(mc);/*! Element Plus Icons Vue v2.3.2 */var yc=s.defineComponent({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.59 30.59 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.59 30.59 0 0 0-42.752 0z"})]))}}),Cs=yc,_c=s.defineComponent({name:"Check",__name:"check",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),bc=_c,wc=s.defineComponent({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),s.createElementVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),vc=wc,kc=s.defineComponent({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),Ts=kc,Sc=s.defineComponent({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),s.createElementVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Os=Sc,Ec=s.defineComponent({name:"Close",__name:"close",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Cc=Ec,Tc=s.defineComponent({name:"Hide",__name:"hide",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),s.createElementVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),Oc=Tc,Ic=s.defineComponent({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),xn=Ic,Ac=s.defineComponent({name:"Loading",__name:"loading",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),Ht=Ac,Pc=s.defineComponent({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Is=Pc,Nc=s.defineComponent({name:"View",__name:"view",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),xc=Nc,$c=s.defineComponent({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(s.openBlock(),s.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[s.createElementVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),As=$c;const Je=z([String,Object,Function]),Ps={Close:Cc,SuccessFilled:Is,InfoFilled:xn,WarningFilled:As,CircleCloseFilled:Ts},Kt={primary:xn,success:Is,warning:As,error:Ts,info:xn},Rc={validating:Ht,success:vc,error:Os},Bc=()=>X&&/firefox/i.test(window.navigator.userAgent);let Z;const jc={height:"0",visibility:"hidden",overflow:Bc()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Lc=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"];function Dc(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),o=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Lc.map(i=>[i,e.getPropertyValue(i)]),paddingSize:r,borderSize:o,boxSizing:n}}function Ns(t,e=1,n){var r,o;Z||(Z=document.createElement("textarea"),((r=t.parentNode)!=null?r:document.body).appendChild(Z));const{paddingSize:a,borderSize:i,boxSizing:l,contextStyle:c}=Dc(t);c.forEach(([p,g])=>Z==null?void 0:Z.style.setProperty(p,g)),Object.entries(jc).forEach(([p,g])=>Z==null?void 0:Z.style.setProperty(p,g,"important")),Z.value=t.value||t.placeholder||"";let u=Z.scrollHeight;const d={};l==="border-box"?u=u+i:l==="content-box"&&(u=u-a),Z.value="";const h=Z.scrollHeight-a;if(me(e)){let p=h*e;l==="border-box"&&(p=p+a+i),u=Math.max(p,u),d.minHeight=`${p}px`}if(me(n)){let p=h*n;l==="border-box"&&(p=p+a+i),u=Math.min(p,u)}return d.height=`${u}px`,(o=Z.parentNode)==null||o.removeChild(Z),Z=void 0,d}const xs=t=>t,Mc=ye({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Uc=t=>El(Mc,t),Vc=ye({id:{type:String,default:void 0},size:An,disabled:Boolean,modelValue:{type:z([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:z([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:Je,default:Os},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Je},prefixIcon:{type:Je},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:z([Object,Array,String]),default:()=>xs({})},autofocus:Boolean,rows:{type:Number,default:2},...Uc(["ariaLabel"]),inputmode:{type:z(String),default:void 0},name:String}),Fc={[Nn]:t=>ne(t),input:t=>ne(t),change:t=>ne(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},zc=["class","style"],Wc=/^on[A-Z]/,Hc=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,r=s.computed(()=>((n==null?void 0:n.value)||[]).concat(zc)),o=s.getCurrentInstance();return o?s.computed(()=>{var a;return qr(Object.entries((a=o.proxy)==null?void 0:a.$attrs).filter(([i])=>!r.value.includes(i)&&!(e&&Wc.test(i))))}):s.computed(()=>({}))},$s={prefix:Math.floor(Math.random()*1e4),current:0},Kc=Symbol("elIdInjection"),qc=()=>s.getCurrentInstance()?s.inject(Kc,$s):$s,$n=t=>{const e=qc(),n=Nr();return Rl(()=>s.unref(t)||`${n.value}-id-${e.prefix}-${e.current++}`)},Rn=Symbol("formContextKey"),Rs=Symbol("formItemContextKey"),Bs=()=>{const t=s.inject(Rn,void 0),e=s.inject(Rs,void 0);return{form:t,formItem:e}},Gc=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=s.ref(!1)),r||(r=s.ref(!1));const o=s.getCurrentInstance(),a=()=>{let u=o==null?void 0:o.parent;for(;u;){if(u.type.name==="ElFormItem")return!1;if(u.type.name==="ElLabelWrap")return!0;u=u.parent}return!1},i=s.ref();let l;const c=s.computed(()=>{var u;return!!(!(t.label||t.ariaLabel)&&e&&e.inputIds&&((u=e.inputIds)==null?void 0:u.length)<=1)});return s.onMounted(()=>{l=s.watch([s.toRef(t,"id"),n],([u,d])=>{const h=u??(d?void 0:$n().value);h!==i.value&&(e!=null&&e.removeInputId&&!a()&&(i.value&&e.removeInputId(i.value),!(r!=null&&r.value)&&!d&&h&&e.addInputId(h)),i.value=h)},{immediate:!0})}),s.onUnmounted(()=>{l&&l(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:c,inputId:i}},js=t=>{const e=s.getCurrentInstance();return s.computed(()=>{var n,r;return(r=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:r[t]})},Ls=(t,e={})=>{const n=s.ref(void 0),r=e.prop?n:js("size"),o=e.global?n:tc(),a=e.form?{size:void 0}:s.inject(Rn,void 0),i=e.formItem?{size:void 0}:s.inject(Rs,void 0);return s.computed(()=>r.value||s.unref(t)||(i==null?void 0:i.size)||(a==null?void 0:a.size)||o.value||"")},Bn=t=>{const e=js("disabled"),n=s.inject(Rn,void 0);return s.computed(()=>e.value||s.unref(t)||(n==null?void 0:n.disabled)||!1)},Jc='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Yc=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,Ds=t=>Array.from(t.querySelectorAll(Jc)).filter(e=>jn(e)&&Yc(e)),jn=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.tabIndex<0||t.hasAttribute("disabled")||t.getAttribute("aria-disabled")==="true")return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}};function Xc(t,{disabled:e,beforeFocus:n,afterFocus:r,beforeBlur:o,afterBlur:a}={}){const i=s.getCurrentInstance(),{emit:l}=i,c=s.shallowRef(),u=s.ref(!1),d=g=>{const f=ge(n)?n(g):!1;s.unref(e)||u.value||f||(u.value=!0,l("focus",g),r==null||r())},h=g=>{var f;const y=ge(o)?o(g):!1;s.unref(e)||g.relatedTarget&&((f=c.value)!=null&&f.contains(g.relatedTarget))||y||(u.value=!1,l("blur",g),a==null||a())},p=g=>{var f,y;s.unref(e)||jn(g.target)||(f=c.value)!=null&&f.contains(document.activeElement)&&c.value!==document.activeElement||(y=t.value)==null||y.focus()};return s.watch([c,()=>s.unref(e)],([g,f])=>{g&&(f?g.removeAttribute("tabindex"):g.setAttribute("tabindex","-1"))}),Vt(c,"focus",d,!0),Vt(c,"blur",h,!0),Vt(c,"click",p,!0),{isFocused:u,wrapperRef:c,handleFocus:d,handleBlur:h}}const Zc=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t);function Qc({afterComposition:t,emit:e}){const n=s.ref(!1),r=l=>{e==null||e("compositionstart",l),n.value=!0},o=l=>{var c;e==null||e("compositionupdate",l);const u=(c=l.target)==null?void 0:c.value,d=u[u.length-1]||"";n.value=!Zc(d)},a=l=>{e==null||e("compositionend",l),n.value&&(n.value=!1,s.nextTick(()=>t(l)))};return{isComposing:n,handleComposition:l=>{l.type==="compositionend"?a(l):o(l)},handleCompositionStart:r,handleCompositionUpdate:o,handleCompositionEnd:a}}function eu(t){let e;function n(){if(t.value==null)return;const{selectionStart:o,selectionEnd:a,value:i}=t.value;if(o==null||a==null)return;const l=i.slice(0,Math.max(0,o)),c=i.slice(Math.max(0,a));e={selectionStart:o,selectionEnd:a,value:i,beforeTxt:l,afterTxt:c}}function r(){if(t.value==null||e==null)return;const{value:o}=t.value,{beforeTxt:a,afterTxt:i,selectionStart:l}=e;if(a==null||i==null||l==null)return;let c=o.length;if(o.endsWith(i))c=o.length-i.length;else if(o.startsWith(a))c=a.length;else{const u=a[l-1],d=o.indexOf(u,l-1);d!==-1&&(c=d+1)}t.value.setSelectionRange(c,c)}return[n,r]}const tu="ElInput",nu=s.defineComponent({name:tu,inheritAttrs:!1}),ru=s.defineComponent({...nu,props:Vc,emits:Fc,setup(t,{expose:e,emit:n}){const r=t,o=s.useAttrs(),a=Hc(),i=s.useSlots(),l=s.computed(()=>[r.type==="textarea"?y.b():f.b(),f.m(p.value),f.is("disabled",g.value),f.is("exceed",Re.value),{[f.b("group")]:i.prepend||i.append,[f.m("prefix")]:i.prefix||r.prefixIcon,[f.m("suffix")]:i.suffix||r.suffixIcon||r.clearable||r.showPassword,[f.bm("suffix","password-clear")]:M.value&&D.value,[f.b("hidden")]:r.type==="hidden"},o.class]),c=s.computed(()=>[f.e("wrapper"),f.is("focus",B.value)]),{form:u,formItem:d}=Bs(),{inputId:h}=Gc(r,{formItemContext:d}),p=Ls(),g=Bn(),f=ue("input"),y=ue("textarea"),w=s.shallowRef(),m=s.shallowRef(),S=s.ref(!1),_=s.ref(!1),O=s.ref(),P=s.shallowRef(r.inputStyle),I=s.computed(()=>w.value||m.value),{wrapperRef:T,isFocused:B,handleFocus:j,handleBlur:E}=Xc(I,{disabled:g,afterBlur(){var C;r.validateEvent&&((C=d==null?void 0:d.validate)==null||C.call(d,"blur").catch(F=>void 0))}}),v=s.computed(()=>{var C;return(C=u==null?void 0:u.statusIcon)!=null?C:!1}),b=s.computed(()=>(d==null?void 0:d.validateState)||""),k=s.computed(()=>b.value&&Rc[b.value]),A=s.computed(()=>_.value?xc:Oc),L=s.computed(()=>[o.style]),W=s.computed(()=>[r.inputStyle,P.value,{resize:r.resize}]),x=s.computed(()=>Gr(r.modelValue)?"":String(r.modelValue)),M=s.computed(()=>r.clearable&&!g.value&&!r.readonly&&!!x.value&&(B.value||S.value)),D=s.computed(()=>r.showPassword&&!g.value&&!!x.value),ce=s.computed(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!g.value&&!r.readonly&&!r.showPassword),$=s.computed(()=>x.value.length),Re=s.computed(()=>!!ce.value&&$.value>Number(r.maxlength)),Nt=s.computed(()=>!!i.suffix||!!r.suffixIcon||M.value||r.showPassword||ce.value||!!b.value&&v.value),[Or,oa]=eu(w);ss(m,C=>{if(Ip(),!ce.value||r.resize!=="both")return;const F=C[0],{width:ut}=F.contentRect;O.value={right:`calc(100% - ${ut+15+6}px)`}});const xt=()=>{const{type:C,autosize:F}=r;if(!(!X||C!=="textarea"||!m.value))if(F){const ut=qe(F)?F.minRows:void 0,fa=qe(F)?F.maxRows:void 0,pa=Ns(m.value,ut,fa);P.value={overflowY:"hidden",...pa},s.nextTick(()=>{m.value.offsetHeight,P.value=pa})}else P.value={minHeight:Ns(m.value).minHeight}},Ip=(C=>{let F=!1;return()=>{var ut;if(F||!r.autosize)return;((ut=m.value)==null?void 0:ut.offsetParent)===null||(C(),F=!0)}})(xt),$t=()=>{const C=I.value,F=r.formatter?r.formatter(x.value):x.value;!C||C.value===F||(C.value=F)},Ir=async C=>{Or();let{value:F}=C.target;if(r.formatter&&r.parser&&(F=r.parser(F)),!ia.value){if(F===x.value){$t();return}n(Nn,F),n(ks,F),await s.nextTick(),$t(),oa()}},aa=C=>{let{value:F}=C.target;r.formatter&&r.parser&&(F=r.parser(F)),n(vs,F)},{isComposing:ia,handleCompositionStart:la,handleCompositionUpdate:ca,handleCompositionEnd:ua}=Qc({emit:n,afterComposition:Ir}),Ap=()=>{Or(),_.value=!_.value,setTimeout(oa)},Pp=()=>{var C;return(C=I.value)==null?void 0:C.focus()},Np=()=>{var C;return(C=I.value)==null?void 0:C.blur()},xp=C=>{S.value=!1,n("mouseleave",C)},$p=C=>{S.value=!0,n("mouseenter",C)},da=C=>{n("keydown",C)},Rp=()=>{var C;(C=I.value)==null||C.select()},ha=()=>{n(Nn,""),n(vs,""),n("clear"),n(ks,"")};return s.watch(()=>r.modelValue,()=>{var C;s.nextTick(()=>xt()),r.validateEvent&&((C=d==null?void 0:d.validate)==null||C.call(d,"change").catch(F=>void 0))}),s.watch(x,()=>$t()),s.watch(()=>r.type,async()=>{await s.nextTick(),$t(),xt()}),s.onMounted(()=>{!r.formatter&&r.parser,$t(),s.nextTick(xt)}),e({input:w,textarea:m,ref:I,textareaStyle:W,autosize:s.toRef(r,"autosize"),isComposing:ia,focus:Pp,blur:Np,select:Rp,clear:ha,resizeTextarea:xt}),(C,F)=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass([s.unref(l),{[s.unref(f).bm("group","append")]:C.$slots.append,[s.unref(f).bm("group","prepend")]:C.$slots.prepend}]),style:s.normalizeStyle(s.unref(L)),onMouseenter:$p,onMouseleave:xp},[s.createCommentVNode(" input "),C.type!=="textarea"?(s.openBlock(),s.createElementBlock(s.Fragment,{key:0},[s.createCommentVNode(" prepend slot "),C.$slots.prepend?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(s.unref(f).be("group","prepend"))},[s.renderSlot(C.$slots,"prepend")],2)):s.createCommentVNode("v-if",!0),s.createElementVNode("div",{ref_key:"wrapperRef",ref:T,class:s.normalizeClass(s.unref(c))},[s.createCommentVNode(" prefix slot "),C.$slots.prefix||C.prefixIcon?(s.openBlock(),s.createElementBlock("span",{key:0,class:s.normalizeClass(s.unref(f).e("prefix"))},[s.createElementVNode("span",{class:s.normalizeClass(s.unref(f).e("prefix-inner"))},[s.renderSlot(C.$slots,"prefix"),C.prefixIcon?(s.openBlock(),s.createBlock(s.unref(de),{key:0,class:s.normalizeClass(s.unref(f).e("icon"))},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(C.prefixIcon)))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0)],2)],2)):s.createCommentVNode("v-if",!0),s.createElementVNode("input",s.mergeProps({id:s.unref(h),ref_key:"input",ref:w,class:s.unref(f).e("inner")},s.unref(a),{name:C.name,minlength:C.minlength,maxlength:C.maxlength,type:C.showPassword?_.value?"text":"password":C.type,disabled:s.unref(g),readonly:C.readonly,autocomplete:C.autocomplete,tabindex:C.tabindex,"aria-label":C.ariaLabel,placeholder:C.placeholder,style:C.inputStyle,form:C.form,autofocus:C.autofocus,role:C.containerRole,inputmode:C.inputmode,onCompositionstart:s.unref(la),onCompositionupdate:s.unref(ca),onCompositionend:s.unref(ua),onInput:Ir,onChange:aa,onKeydown:da}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),s.createCommentVNode(" suffix slot "),s.unref(Nt)?(s.openBlock(),s.createElementBlock("span",{key:1,class:s.normalizeClass(s.unref(f).e("suffix"))},[s.createElementVNode("span",{class:s.normalizeClass(s.unref(f).e("suffix-inner"))},[!s.unref(M)||!s.unref(D)||!s.unref(ce)?(s.openBlock(),s.createElementBlock(s.Fragment,{key:0},[s.renderSlot(C.$slots,"suffix"),C.suffixIcon?(s.openBlock(),s.createBlock(s.unref(de),{key:0,class:s.normalizeClass(s.unref(f).e("icon"))},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(C.suffixIcon)))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0)],64)):s.createCommentVNode("v-if",!0),s.unref(M)?(s.openBlock(),s.createBlock(s.unref(de),{key:1,class:s.normalizeClass([s.unref(f).e("icon"),s.unref(f).e("clear")]),onMousedown:s.withModifiers(s.unref(dt),["prevent"]),onClick:ha},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(C.clearIcon)))]),_:1},8,["class","onMousedown"])):s.createCommentVNode("v-if",!0),s.unref(D)?(s.openBlock(),s.createBlock(s.unref(de),{key:2,class:s.normalizeClass([s.unref(f).e("icon"),s.unref(f).e("password")]),onClick:Ap},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(A))))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0),s.unref(ce)?(s.openBlock(),s.createElementBlock("span",{key:3,class:s.normalizeClass(s.unref(f).e("count"))},[s.createElementVNode("span",{class:s.normalizeClass(s.unref(f).e("count-inner"))},s.toDisplayString(s.unref($))+" / "+s.toDisplayString(C.maxlength),3)],2)):s.createCommentVNode("v-if",!0),s.unref(b)&&s.unref(k)&&s.unref(v)?(s.openBlock(),s.createBlock(s.unref(de),{key:4,class:s.normalizeClass([s.unref(f).e("icon"),s.unref(f).e("validateIcon"),s.unref(f).is("loading",s.unref(b)==="validating")])},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(k))))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0)],2)],2)):s.createCommentVNode("v-if",!0)],2),s.createCommentVNode(" append slot "),C.$slots.append?(s.openBlock(),s.createElementBlock("div",{key:1,class:s.normalizeClass(s.unref(f).be("group","append"))},[s.renderSlot(C.$slots,"append")],2)):s.createCommentVNode("v-if",!0)],64)):(s.openBlock(),s.createElementBlock(s.Fragment,{key:1},[s.createCommentVNode(" textarea "),s.createElementVNode("textarea",s.mergeProps({id:s.unref(h),ref_key:"textarea",ref:m,class:[s.unref(y).e("inner"),s.unref(f).is("focus",s.unref(B))]},s.unref(a),{minlength:C.minlength,maxlength:C.maxlength,tabindex:C.tabindex,disabled:s.unref(g),readonly:C.readonly,autocomplete:C.autocomplete,style:s.unref(W),"aria-label":C.ariaLabel,placeholder:C.placeholder,form:C.form,autofocus:C.autofocus,rows:C.rows,role:C.containerRole,onCompositionstart:s.unref(la),onCompositionupdate:s.unref(ca),onCompositionend:s.unref(ua),onInput:Ir,onFocus:s.unref(j),onBlur:s.unref(E),onChange:aa,onKeydown:da}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),s.unref(ce)?(s.openBlock(),s.createElementBlock("span",{key:0,style:s.normalizeStyle(O.value),class:s.normalizeClass(s.unref(f).e("count"))},s.toDisplayString(s.unref($))+" / "+s.toDisplayString(C.maxlength),7)):s.createCommentVNode("v-if",!0)],64))],38))}});var su=ke(ru,[["__file","input.vue"]]);const ou=Wt(su),Ln="focus-trap.focus-after-trapped",Dn="focus-trap.focus-after-released",au="focus-trap.focusout-prevented",Ms={cancelable:!0,bubbles:!1},iu={cancelable:!0,bubbles:!1},Us="focusAfterTrapped",Vs="focusAfterReleased",lu=Symbol("elFocusTrap"),Mn=s.ref(),qt=s.ref(0),Un=s.ref(0);let Gt=0;const Fs=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},zs=(t,e)=>{for(const n of t)if(!cu(n,e))return n},cu=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},uu=t=>{const e=Fs(t),n=zs(e,t),r=zs(e.reverse(),t);return[n,r]},du=t=>t instanceof HTMLInputElement&&"select"in t,Se=(t,e)=>{if(t&&t.focus){const n=document.activeElement;let r=!1;mt(t)&&!jn(t)&&!t.getAttribute("tabindex")&&(t.setAttribute("tabindex","-1"),r=!0),t.focus({preventScroll:!0}),Un.value=window.performance.now(),t!==n&&du(t)&&e&&t.select(),mt(t)&&r&&t.removeAttribute("tabindex")}};function Ws(t,e){const n=[...t],r=t.indexOf(e);return r!==-1&&n.splice(r,1),n}const hu=()=>{let t=[];return{push:r=>{const o=t[0];o&&r!==o&&o.pause(),t=Ws(t,r),t.unshift(r)},remove:r=>{var o,a;t=Ws(t,r),(a=(o=t[0])==null?void 0:o.resume)==null||a.call(o)}}},fu=(t,e=!1)=>{const n=document.activeElement;for(const r of t)if(Se(r,e),document.activeElement!==n)return},Hs=hu(),pu=()=>qt.value>Un.value,Jt=()=>{Mn.value="pointer",qt.value=window.performance.now()},Ks=()=>{Mn.value="keyboard",qt.value=window.performance.now()},gu=()=>(s.onMounted(()=>{Gt===0&&(document.addEventListener("mousedown",Jt),document.addEventListener("touchstart",Jt),document.addEventListener("keydown",Ks)),Gt++}),s.onBeforeUnmount(()=>{Gt--,Gt<=0&&(document.removeEventListener("mousedown",Jt),document.removeEventListener("touchstart",Jt),document.removeEventListener("keydown",Ks))}),{focusReason:Mn,lastUserFocusTimestamp:qt,lastAutomatedFocusTimestamp:Un}),Yt=t=>new CustomEvent(au,{...iu,detail:t}),Xt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Ye=[];const qs=t=>{t.code===Xt.esc&&Ye.forEach(e=>e(t))},mu=t=>{s.onMounted(()=>{Ye.length===0&&document.addEventListener("keydown",qs),X&&Ye.push(t)}),s.onBeforeUnmount(()=>{Ye=Ye.filter(e=>e!==t),Ye.length===0&&X&&document.removeEventListener("keydown",qs)})},yu=s.defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Us,Vs,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=s.ref();let r,o;const{focusReason:a}=gu();mu(f=>{t.trapped&&!i.paused&&e("release-requested",f)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},l=f=>{if(!t.loop&&!t.trapped||i.paused)return;const{code:y,altKey:w,ctrlKey:m,metaKey:S,currentTarget:_,shiftKey:O}=f,{loop:P}=t,I=y===Xt.tab&&!w&&!m&&!S,T=document.activeElement;if(I&&T){const B=_,[j,E]=uu(B);if(j&&E){if(!O&&T===E){const b=Yt({focusReason:a.value});e("focusout-prevented",b),b.defaultPrevented||(f.preventDefault(),P&&Se(j,!0))}else if(O&&[j,B].includes(T)){const b=Yt({focusReason:a.value});e("focusout-prevented",b),b.defaultPrevented||(f.preventDefault(),P&&Se(E,!0))}}else if(T===B){const b=Yt({focusReason:a.value});e("focusout-prevented",b),b.defaultPrevented||f.preventDefault()}}};s.provide(lu,{focusTrapRef:n,onKeydown:l}),s.watch(()=>t.focusTrapEl,f=>{f&&(n.value=f)},{immediate:!0}),s.watch([n],([f],[y])=>{f&&(f.addEventListener("keydown",l),f.addEventListener("focusin",d),f.addEventListener("focusout",h)),y&&(y.removeEventListener("keydown",l),y.removeEventListener("focusin",d),y.removeEventListener("focusout",h))});const c=f=>{e(Us,f)},u=f=>e(Vs,f),d=f=>{const y=s.unref(n);if(!y)return;const w=f.target,m=f.relatedTarget,S=w&&y.contains(w);t.trapped||m&&y.contains(m)||(r=m),S&&e("focusin",f),!i.paused&&t.trapped&&(S?o=w:Se(o,!0))},h=f=>{const y=s.unref(n);if(!(i.paused||!y))if(t.trapped){const w=f.relatedTarget;!Gr(w)&&!y.contains(w)&&setTimeout(()=>{if(!i.paused&&t.trapped){const m=Yt({focusReason:a.value});e("focusout-prevented",m),m.defaultPrevented||Se(o,!0)}},0)}else{const w=f.target;w&&y.contains(w)||e("focusout",f)}};async function p(){await s.nextTick();const f=s.unref(n);if(f){Hs.push(i);const y=f.contains(document.activeElement)?r:document.activeElement;if(r=y,!f.contains(y)){const m=new Event(Ln,Ms);f.addEventListener(Ln,c),f.dispatchEvent(m),m.defaultPrevented||s.nextTick(()=>{let S=t.focusStartEl;ne(S)||(Se(S),document.activeElement!==S&&(S="first")),S==="first"&&fu(Fs(f),!0),(document.activeElement===y||S==="container")&&Se(f)})}}}function g(){const f=s.unref(n);if(f){f.removeEventListener(Ln,c);const y=new CustomEvent(Dn,{...Ms,detail:{focusReason:a.value}});f.addEventListener(Dn,u),f.dispatchEvent(y),!y.defaultPrevented&&(a.value=="keyboard"||!pu()||f.contains(document.activeElement))&&Se(r??document.body),f.removeEventListener(Dn,u),Hs.remove(i)}}return s.onMounted(()=>{t.trapped&&p(),s.watch(()=>t.trapped,f=>{f?p():g()})}),s.onBeforeUnmount(()=>{t.trapped&&g(),n.value&&(n.value.removeEventListener("keydown",l),n.value.removeEventListener("focusin",d),n.value.removeEventListener("focusout",h),n.value=void 0)}),{onKeydown:l}}});function _u(t,e,n,r,o,a){return s.renderSlot(t.$slots,"default",{handleKeydown:t.onKeydown})}var bu=ke(yu,[["render",_u],["__file","focus-trap.vue"]]);const wu=ye({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:z([String,Object,Array])},offset:{type:z(Array),default:[0,0]},badgeClass:{type:String}}),vu=s.defineComponent({name:"ElBadge"}),ku=s.defineComponent({...vu,props:wu,setup(t,{expose:e}){const n=t,r=ue("badge"),o=s.computed(()=>n.isDot?"":me(n.value)&&me(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`),a=s.computed(()=>{var i,l,c,u,d;return[{backgroundColor:n.color,marginRight:yt(-((l=(i=n.offset)==null?void 0:i[0])!=null?l:0)),marginTop:yt((u=(c=n.offset)==null?void 0:c[1])!=null?u:0)},(d=n.badgeStyle)!=null?d:{}]});return e({content:o}),(i,l)=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(s.unref(r).b())},[s.renderSlot(i.$slots,"default"),s.createVNode(s.Transition,{name:`${s.unref(r).namespace.value}-zoom-in-center`,persisted:""},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("sup",{class:s.normalizeClass([s.unref(r).e("content"),s.unref(r).em("content",i.type),s.unref(r).is("fixed",!!i.$slots.default),s.unref(r).is("dot",i.isDot),s.unref(r).is("hide-zero",!i.showZero&&n.value===0),i.badgeClass]),style:s.normalizeStyle(s.unref(a))},[s.renderSlot(i.$slots,"content",{value:s.unref(o)},()=>[s.createTextVNode(s.toDisplayString(s.unref(o)),1)])],6),[[s.vShow,!i.hidden&&(s.unref(o)||i.isDot||i.$slots.content)]])]),_:3},8,["name"])],2))}});var Su=ke(ku,[["__file","badge.vue"]]);const Eu=Wt(Su),Gs=Symbol("buttonGroupContextKey"),Cu=({from:t,replacement:e,scope:n,version:r,ref:o,type:a="API"},i)=>{s.watch(()=>s.unref(i),l=>{},{immediate:!0})},Tu=(t,e)=>{Cu({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},s.computed(()=>t.type==="text"));const n=s.inject(Gs,void 0),r=Pn("button"),{form:o}=Bs(),a=Ls(s.computed(()=>n==null?void 0:n.size)),i=Bn(),l=s.ref(),c=s.useSlots(),u=s.computed(()=>{var m;return t.type||(n==null?void 0:n.type)||((m=r.value)==null?void 0:m.type)||""}),d=s.computed(()=>{var m,S,_;return(_=(S=t.autoInsertSpace)!=null?S:(m=r.value)==null?void 0:m.autoInsertSpace)!=null?_:!1}),h=s.computed(()=>{var m,S,_;return(_=(S=t.plain)!=null?S:(m=r.value)==null?void 0:m.plain)!=null?_:!1}),p=s.computed(()=>{var m,S,_;return(_=(S=t.round)!=null?S:(m=r.value)==null?void 0:m.round)!=null?_:!1}),g=s.computed(()=>{var m,S,_;return(_=(S=t.text)!=null?S:(m=r.value)==null?void 0:m.text)!=null?_:!1}),f=s.computed(()=>t.tag==="button"?{ariaDisabled:i.value||t.loading,disabled:i.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),y=s.computed(()=>{var m;const S=(m=c.default)==null?void 0:m.call(c);if(d.value&&(S==null?void 0:S.length)===1){const _=S[0];if((_==null?void 0:_.type)===s.Text){const O=_.children;return/^\p{Unified_Ideograph}{2}$/u.test(O.trim())}}return!1});return{_disabled:i,_size:a,_type:u,_ref:l,_props:f,_plain:h,_round:p,_text:g,shouldAddSpace:y,handleClick:m=>{if(i.value||t.loading){m.stopPropagation();return}t.nativeType==="reset"&&(o==null||o.resetFields()),e("click",m)}}},Vn=ye({size:An,disabled:Boolean,type:{type:String,values:["default","primary","success","warning","info","danger","text",""],default:""},icon:{type:Je},nativeType:{type:String,values:["button","submit","reset"],default:"button"},loading:Boolean,loadingIcon:{type:Je,default:()=>Ht},plain:{type:Boolean,default:void 0},text:{type:Boolean,default:void 0},link:Boolean,bg:Boolean,autofocus:Boolean,round:{type:Boolean,default:void 0},circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:z([String,Object]),default:"button"}}),Ou={click:t=>t instanceof MouseEvent};function q(t,e){Iu(t)&&(t="100%");var n=Au(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Zt(t){return Math.min(1,Math.max(0,t))}function Iu(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Au(t){return typeof t=="string"&&t.indexOf("%")!==-1}function Js(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Qt(t){return t<=1?"".concat(Number(t)*100,"%"):t}function De(t){return t.length===1?"0"+t:String(t)}function Pu(t,e,n){return{r:q(t,255)*255,g:q(e,255)*255,b:q(n,255)*255}}function Ys(t,e,n){t=q(t,255),e=q(e,255),n=q(n,255);var r=Math.max(t,e,n),o=Math.min(t,e,n),a=0,i=0,l=(r+o)/2;if(r===o)i=0,a=0;else{var c=r-o;switch(i=l>.5?c/(2-r-o):c/(r+o),r){case t:a=(e-n)/c+(e<n?6:0);break;case e:a=(n-t)/c+2;break;case n:a=(t-e)/c+4;break}a/=6}return{h:a,s:i,l}}function Fn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Nu(t,e,n){var r,o,a;if(t=q(t,360),e=q(e,100),n=q(n,100),e===0)o=n,a=n,r=n;else{var i=n<.5?n*(1+e):n+e-n*e,l=2*n-i;r=Fn(l,i,t+1/3),o=Fn(l,i,t),a=Fn(l,i,t-1/3)}return{r:r*255,g:o*255,b:a*255}}function Xs(t,e,n){t=q(t,255),e=q(e,255),n=q(n,255);var r=Math.max(t,e,n),o=Math.min(t,e,n),a=0,i=r,l=r-o,c=r===0?0:l/r;if(r===o)a=0;else{switch(r){case t:a=(e-n)/l+(e<n?6:0);break;case e:a=(n-t)/l+2;break;case n:a=(t-e)/l+4;break}a/=6}return{h:a,s:c,v:i}}function xu(t,e,n){t=q(t,360)*6,e=q(e,100),n=q(n,100);var r=Math.floor(t),o=t-r,a=n*(1-e),i=n*(1-o*e),l=n*(1-(1-o)*e),c=r%6,u=[n,i,a,a,l,n][c],d=[l,n,n,i,a,a][c],h=[a,a,l,n,n,i][c];return{r:u*255,g:d*255,b:h*255}}function Zs(t,e,n,r){var o=[De(Math.round(t).toString(16)),De(Math.round(e).toString(16)),De(Math.round(n).toString(16))];return r&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function $u(t,e,n,r,o){var a=[De(Math.round(t).toString(16)),De(Math.round(e).toString(16)),De(Math.round(n).toString(16)),De(Ru(r))];return o&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Ru(t){return Math.round(parseFloat(t)*255).toString(16)}function Qs(t){return ee(t)/255}function ee(t){return parseInt(t,16)}function Bu(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var zn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ju(t){var e={r:0,g:0,b:0},n=1,r=null,o=null,a=null,i=!1,l=!1;return typeof t=="string"&&(t=Mu(t)),typeof t=="object"&&(_e(t.r)&&_e(t.g)&&_e(t.b)?(e=Pu(t.r,t.g,t.b),i=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):_e(t.h)&&_e(t.s)&&_e(t.v)?(r=Qt(t.s),o=Qt(t.v),e=xu(t.h,r,o),i=!0,l="hsv"):_e(t.h)&&_e(t.s)&&_e(t.l)&&(r=Qt(t.s),a=Qt(t.l),e=Nu(t.h,r,a),i=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=Js(n),{ok:i,format:t.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Lu="[-\\+]?\\d+%?",Du="[-\\+]?\\d*\\.\\d+%?",Ee="(?:".concat(Du,")|(?:").concat(Lu,")"),Wn="[\\s|\\(]+(".concat(Ee,")[,|\\s]+(").concat(Ee,")[,|\\s]+(").concat(Ee,")\\s*\\)?"),Hn="[\\s|\\(]+(".concat(Ee,")[,|\\s]+(").concat(Ee,")[,|\\s]+(").concat(Ee,")[,|\\s]+(").concat(Ee,")\\s*\\)?"),oe={CSS_UNIT:new RegExp(Ee),rgb:new RegExp("rgb"+Wn),rgba:new RegExp("rgba"+Hn),hsl:new RegExp("hsl"+Wn),hsla:new RegExp("hsla"+Hn),hsv:new RegExp("hsv"+Wn),hsva:new RegExp("hsva"+Hn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Mu(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(zn[t])t=zn[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=oe.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=oe.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=oe.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=oe.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=oe.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=oe.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=oe.hex8.exec(t),n?{r:ee(n[1]),g:ee(n[2]),b:ee(n[3]),a:Qs(n[4]),format:e?"name":"hex8"}:(n=oe.hex6.exec(t),n?{r:ee(n[1]),g:ee(n[2]),b:ee(n[3]),format:e?"name":"hex"}:(n=oe.hex4.exec(t),n?{r:ee(n[1]+n[1]),g:ee(n[2]+n[2]),b:ee(n[3]+n[3]),a:Qs(n[4]+n[4]),format:e?"name":"hex8"}:(n=oe.hex3.exec(t),n?{r:ee(n[1]+n[1]),g:ee(n[2]+n[2]),b:ee(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function _e(t){return!!oe.CSS_UNIT.exec(String(t))}var Uu=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=Bu(e)),this.originalInput=e;var o=ju(e);this.originalInput=e,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,o,a=e.r/255,i=e.g/255,l=e.b/255;return a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),i<=.03928?r=i/12.92:r=Math.pow((i+.055)/1.055,2.4),l<=.03928?o=l/12.92:o=Math.pow((l+.055)/1.055,2.4),.2126*n+.7152*r+.0722*o},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=Js(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=Xs(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=Xs(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),o=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(o,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=Ys(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=Ys(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),o=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(o,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),Zs(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),$u(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(q(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(q(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Zs(this.r,this.g,this.b,!1),n=0,r=Object.entries(zn);n<r.length;n++){var o=r[n],a=o[0],i=o[1];if(e===i)return a}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,o=this.a<1&&this.a>=0,a=!n&&o&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Zt(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Zt(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Zt(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Zt(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),o=new t(e).toRgb(),a=n/100,i={r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b,a:(o.a-r.a)*a+r.a};return new t(i)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),o=360/n,a=[this];for(r.h=(r.h-(o*e>>1)+720)%360;--e;)r.h=(r.h+o)%360,a.push(new t(r));return a},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,o=n.s,a=n.v,i=[],l=1/e;e--;)i.push(new t({h:r,s:o,v:a})),a=(a+l)%1;return i},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),o=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/o,g:(n.g*n.a+r.g*r.a*(1-n.a))/o,b:(n.b*n.a+r.b*r.a*(1-n.a))/o,a:o})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,o=[this],a=360/e,i=1;i<e;i++)o.push(new t({h:(r+i*a)%360,s:n.s,l:n.l}));return o},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Ce(t,e=20){return t.mix("#141414",e).toString()}function Vu(t){const e=Bn(),n=ue("button");return s.computed(()=>{let r={},o=t.color;if(o){const a=o.match(/var\((.*?)\)/);a&&(o=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const i=new Uu(o),l=t.dark?i.tint(20).toString():Ce(i,20);if(t.plain)r=n.cssVarBlock({"bg-color":t.dark?Ce(i,90):i.tint(90).toString(),"text-color":o,"border-color":t.dark?Ce(i,50):i.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":o,"hover-border-color":o,"active-bg-color":l,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":l}),e.value&&(r[n.cssVarBlockName("disabled-bg-color")]=t.dark?Ce(i,90):i.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=t.dark?Ce(i,50):i.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=t.dark?Ce(i,80):i.tint(80).toString());else{const c=t.dark?Ce(i,30):i.tint(30).toString(),u=i.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":o,"text-color":u,"border-color":o,"hover-bg-color":c,"hover-text-color":u,"hover-border-color":c,"active-bg-color":l,"active-border-color":l}),e.value){const d=t.dark?Ce(i,50):i.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=d,r[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=d}}}return r})}const Fu=s.defineComponent({name:"ElButton"}),zu=s.defineComponent({...Fu,props:Vn,emits:Ou,setup(t,{expose:e,emit:n}){const r=t,o=Vu(r),a=ue("button"),{_ref:i,_size:l,_type:c,_disabled:u,_props:d,_plain:h,_round:p,_text:g,shouldAddSpace:f,handleClick:y}=Tu(r,n),w=s.computed(()=>[a.b(),a.m(c.value),a.m(l.value),a.is("disabled",u.value),a.is("loading",r.loading),a.is("plain",h.value),a.is("round",p.value),a.is("circle",r.circle),a.is("text",g.value),a.is("link",r.link),a.is("has-bg",r.bg)]);return e({ref:i,size:l,type:c,disabled:u,shouldAddSpace:f}),(m,S)=>(s.openBlock(),s.createBlock(s.resolveDynamicComponent(m.tag),s.mergeProps({ref_key:"_ref",ref:i},s.unref(d),{class:s.unref(w),style:s.unref(o),onClick:s.unref(y)}),{default:s.withCtx(()=>[m.loading?(s.openBlock(),s.createElementBlock(s.Fragment,{key:0},[m.$slots.loading?s.renderSlot(m.$slots,"loading",{key:0}):(s.openBlock(),s.createBlock(s.unref(de),{key:1,class:s.normalizeClass(s.unref(a).is("loading"))},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(m.loadingIcon)))]),_:1},8,["class"]))],64)):m.icon||m.$slots.icon?(s.openBlock(),s.createBlock(s.unref(de),{key:1},{default:s.withCtx(()=>[m.icon?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(m.icon),{key:0})):s.renderSlot(m.$slots,"icon",{key:1})]),_:3})):s.createCommentVNode("v-if",!0),m.$slots.default?(s.openBlock(),s.createElementBlock("span",{key:2,class:s.normalizeClass({[s.unref(a).em("text","expand")]:s.unref(f)})},[s.renderSlot(m.$slots,"default")],2)):s.createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Wu=ke(zu,[["__file","button.vue"]]);const Hu={size:Vn.size,type:Vn.type},Ku=s.defineComponent({name:"ElButtonGroup"}),qu=s.defineComponent({...Ku,props:Hu,setup(t){const e=t;s.provide(Gs,s.reactive({size:s.toRef(e,"size"),type:s.toRef(e,"type")}));const n=ue("button");return(r,o)=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(s.unref(n).b("group"))},[s.renderSlot(r.$slots,"default")],2))}});var eo=ke(qu,[["__file","button-group.vue"]]);const Gu=Wt(Wu,{ButtonGroup:eo});hc(eo);var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ju(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var en=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(en||{});const Yu=ye({a11y:{type:Boolean,default:!0},locale:{type:z(Object)},size:An,button:{type:z(Object)},card:{type:z(Object)},dialog:{type:z(Object)},link:{type:z(Object)},experimentalFeatures:{type:z(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:z(Object)},zIndex:Number,namespace:{type:String,default:"el"},...rc}),G={placement:"top"};s.defineComponent({name:"ElConfigProvider",props:Yu,setup(t,{slots:e}){const n=ws(t);return s.watch(()=>t.message,r=>{var o,a;Object.assign(G,(a=(o=n==null?void 0:n.value)==null?void 0:o.message)!=null?a:{},r??{})},{immediate:!0,deep:!0}),()=>s.renderSlot(e,"default",{config:n==null?void 0:n.value})}});const to=t=>{if(!t)return{onClick:dt,onMousedown:dt,onMouseup:dt};let e=!1,n=!1;return{onClick:i=>{e&&n&&t(i),e=n=!1},onMousedown:i=>{e=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Xu=ye({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:z([String,Array,Object])},zIndex:{type:z([String,Number])}}),Zu={click:t=>t instanceof MouseEvent},Qu="overlay";var ed=s.defineComponent({name:"ElOverlay",props:Xu,emits:Zu,setup(t,{slots:e,emit:n}){const r=ue(Qu),o=c=>{n("click",c)},{onClick:a,onMousedown:i,onMouseup:l}=to(t.customMaskEvent?void 0:o);return()=>t.mask?s.createVNode("div",{class:[r.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:a,onMousedown:i,onMouseup:l},[s.renderSlot(e,"default")],en.STYLE|en.CLASS|en.PROPS,["onClick","onMouseup","onMousedown"]):s.h("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[s.renderSlot(e,"default")])}});const td=ed,nd=(t,e,n,r)=>{const o={offsetX:0,offsetY:0},a=s.ref(!1),i=(p,g)=>{if(t.value){const{offsetX:f,offsetY:y}=o,w=t.value.getBoundingClientRect(),m=w.left,S=w.top,_=w.width,O=w.height,P=document.documentElement.clientWidth,I=document.documentElement.clientHeight,T=-m+f,B=-S+y,j=P-m-_+f,E=I-S-(O<I?O:0)+y;r!=null&&r.value||(p=Math.min(Math.max(p,T),j),g=Math.min(Math.max(g,B),E)),o.offsetX=p,o.offsetY=g,t.value.style.transform=`translate(${yt(p)}, ${yt(g)})`}},l=p=>{const g=p.clientX,f=p.clientY,{offsetX:y,offsetY:w}=o,m=_=>{a.value||(a.value=!0);const O=y+_.clientX-g,P=w+_.clientY-f;i(O,P)},S=()=>{a.value=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",S)},c=()=>{e.value&&t.value&&(e.value.addEventListener("mousedown",l),window.addEventListener("resize",h))},u=()=>{e.value&&t.value&&(e.value.removeEventListener("mousedown",l),window.removeEventListener("resize",h))},d=()=>{o.offsetX=0,o.offsetY=0,t.value&&(t.value.style.transform="")},h=()=>{const{offsetX:p,offsetY:g}=o;i(p,g)};return s.onMounted(()=>{s.watchEffect(()=>{n.value?c():u()})}),s.onBeforeUnmount(()=>{u()}),{isDragging:a,resetPosition:d,updatePosition:h}},rd=(t,e={})=>{s.isRef(t)||uc("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||ue("popup"),r=s.computed(()=>n.bm("parent","hidden"));if(!X||Es(document.body,r.value))return;let o=0,a=!1,i="0";const l=()=>{setTimeout(()=>{typeof document>"u"||a&&document&&(document.body.style.width=i,ac(document.body,r.value))},200)};s.watch(t,c=>{if(!c){l();return}a=!Es(document.body,r.value),a&&(i=document.body.style.width,oc(document.body,r.value)),o=lc(n.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,d=ic(document.body,"overflowY");o>0&&(u||d==="scroll")&&a&&(document.body.style.width=`calc(100% - ${o}px)`)}),s.onScopeDispose(()=>l())},sd=t=>["",...ms].includes(t),no=["primary","success","info","warning","error"],ro=["top","top-left","top-right","bottom","bottom-left","bottom-right"],Xe="top",J=xs({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,placement:void 0,zIndex:0,grouping:!1,repeatNum:1,appendTo:X?document.body:void 0}),od=ye({customClass:{type:String,default:J.customClass},dangerouslyUseHTMLString:{type:Boolean,default:J.dangerouslyUseHTMLString},duration:{type:Number,default:J.duration},icon:{type:Je,default:J.icon},id:{type:String,default:J.id},message:{type:z([String,Object,Function]),default:J.message},onClose:{type:z(Function),default:J.onClose},showClose:{type:Boolean,default:J.showClose},type:{type:String,values:no,default:J.type},plain:{type:Boolean,default:J.plain},offset:{type:Number,default:J.offset},placement:{type:String,values:ro,default:J.placement},zIndex:{type:Number,default:J.zIndex},grouping:{type:Boolean,default:J.grouping},repeatNum:{type:Number,default:J.repeatNum}}),ad={destroy:()=>!0},ae=s.shallowReactive({}),id=t=>(ae[t]||(ae[t]=s.shallowReactive([])),ae[t]),ld=(t,e)=>{const n=ae[e]||[],r=n.findIndex(i=>i.id===t),o=n[r];let a;return r>0&&(a=n[r-1]),{current:o,prev:a}},cd=(t,e)=>{const{prev:n}=ld(t,e);return n?n.vm.exposed.bottom.value:0},ud=(t,e,n)=>(ae[n]||[]).findIndex(a=>a.id===t)>0?16:e,dd=s.defineComponent({name:"ElMessage"}),hd=s.defineComponent({...dd,props:od,emits:ad,setup(t,{expose:e,emit:n}){const r=t,{Close:o}=Ps,a=s.ref(!1),{ns:i,zIndex:l}=bs("message"),{currentZIndex:c,nextZIndex:u}=l,d=s.ref(),h=s.ref(!1),p=s.ref(0);let g;const f=s.computed(()=>r.type?r.type==="error"?"danger":r.type:"info"),y=s.computed(()=>{const b=r.type;return{[i.bm("icon",b)]:b&&Kt[b]}}),w=s.computed(()=>r.icon||Kt[r.type]||""),m=s.computed(()=>r.placement||Xe),S=s.computed(()=>cd(r.id,m.value)),_=s.computed(()=>ud(r.id,r.offset,m.value)+S.value),O=s.computed(()=>p.value+_.value),P=s.computed(()=>m.value.includes("left")?i.is("left"):m.value.includes("right")?i.is("right"):i.is("center")),I=s.computed(()=>m.value.startsWith("top")?"top":"bottom"),T=s.computed(()=>({[I.value]:`${_.value}px`,zIndex:c.value}));function B(){r.duration!==0&&({stop:g}=Ml(()=>{E()},r.duration))}function j(){g==null||g()}function E(){h.value=!1,s.nextTick(()=>{var b;a.value||((b=r.onClose)==null||b.call(r),n("destroy"))})}function v({code:b}){b===Xt.esc&&E()}return s.onMounted(()=>{B(),u(),h.value=!0}),s.watch(()=>r.repeatNum,()=>{j(),B()}),Vt(document,"keydown",v),ss(d,()=>{p.value=d.value.getBoundingClientRect().height}),e({visible:h,bottom:O,close:E}),(b,k)=>(s.openBlock(),s.createBlock(s.Transition,{name:s.unref(i).b("fade"),onBeforeEnter:A=>a.value=!0,onBeforeLeave:b.onClose,onAfterLeave:A=>b.$emit("destroy"),persisted:""},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",{id:b.id,ref_key:"messageRef",ref:d,class:s.normalizeClass([s.unref(i).b(),{[s.unref(i).m(b.type)]:b.type},s.unref(i).is("closable",b.showClose),s.unref(i).is("plain",b.plain),s.unref(i).is("bottom",s.unref(I)==="bottom"),s.unref(P),b.customClass]),style:s.normalizeStyle(s.unref(T)),role:"alert",onMouseenter:j,onMouseleave:B},[b.repeatNum>1?(s.openBlock(),s.createBlock(s.unref(Eu),{key:0,value:b.repeatNum,type:s.unref(f),class:s.normalizeClass(s.unref(i).e("badge"))},null,8,["value","type","class"])):s.createCommentVNode("v-if",!0),s.unref(w)?(s.openBlock(),s.createBlock(s.unref(de),{key:1,class:s.normalizeClass([s.unref(i).e("icon"),s.unref(y)])},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(w))))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0),s.renderSlot(b.$slots,"default",{},()=>[b.dangerouslyUseHTMLString?(s.openBlock(),s.createElementBlock(s.Fragment,{key:1},[s.createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),s.createElementVNode("p",{class:s.normalizeClass(s.unref(i).e("content")),innerHTML:b.message},null,10,["innerHTML"])],2112)):(s.openBlock(),s.createElementBlock("p",{key:0,class:s.normalizeClass(s.unref(i).e("content"))},s.toDisplayString(b.message),3))]),b.showClose?(s.openBlock(),s.createBlock(s.unref(de),{key:2,class:s.normalizeClass(s.unref(i).e("closeBtn")),onClick:s.withModifiers(E,["stop"])},{default:s.withCtx(()=>[s.createVNode(s.unref(o))]),_:1},8,["class","onClick"])):s.createCommentVNode("v-if",!0)],46,["id"]),[[s.vShow,h.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var fd=ke(hd,[["__file","message.vue"]]);let pd=1;const gd=t=>{if(!t.appendTo)t.appendTo=document.body;else if(ne(t.appendTo)){let n=document.querySelector(t.appendTo);mt(n)||(n=document.body),t.appendTo=n}},md=t=>{!t.placement&&ne(G.placement)&&G.placement&&(t.placement=G.placement),t.placement||(t.placement=Xe),ro.includes(t.placement)||(`${t.placement}${Xe}`,t.placement=Xe)},so=t=>{const e=!t||ne(t)||s.isVNode(t)||ge(t)?{message:t}:t,n={...J,...e};return gd(n),md(n),Cn(G.grouping)&&!n.grouping&&(n.grouping=G.grouping),me(G.duration)&&n.duration===3e3&&(n.duration=G.duration),me(G.offset)&&n.offset===16&&(n.offset=G.offset),Cn(G.showClose)&&!n.showClose&&(n.showClose=G.showClose),Cn(G.plain)&&!n.plain&&(n.plain=G.plain),n},yd=t=>{const e=t.props.placement||Xe,n=ae[e],r=n.indexOf(t);if(r===-1)return;n.splice(r,1);const{handler:o}=t;o.close()},_d=({appendTo:t,...e},n)=>{const r=`message_${pd++}`,o=e.onClose,a=document.createElement("div"),i={...e,id:r,onClose:()=>{o==null||o(),yd(d)},onDestroy:()=>{s.render(null,a)}},l=s.createVNode(fd,i,ge(i.message)||s.isVNode(i.message)?{default:ge(i.message)?i.message:()=>i.message}:null);l.appContext=n||Me._context,s.render(l,a),t.appendChild(a.firstElementChild);const c=l.component,d={id:r,vnode:l,vm:c,handler:{close:()=>{c.exposed.close()}},props:l.component.props};return d},Me=(t={},e)=>{if(!X)return{close:()=>{}};const n=so(t),r=id(n.placement||Xe);if(n.grouping&&r.length){const a=r.find(({vnode:i})=>{var l;return((l=i.props)==null?void 0:l.message)===n.message});if(a)return a.props.repeatNum+=1,a.props.type=n.type,a.handler}if(me(G.max)&&r.length>=G.max)return{close:()=>{}};const o=_d(n,e);return r.push(o),o.handler};no.forEach(t=>{Me[t]=(e={},n)=>{const r=so(e);return Me({...r,type:t},n)}});function bd(t){for(const e in ae)if(ht(ae,e)){const n=[...ae[e]];for(const r of n)(!t||t===r.props.type)&&r.handler.close()}}function wd(t){if(!ae[t])return;[...ae[t]].forEach(n=>n.handler.close())}Me.closeAll=bd,Me.closeAllByPlacement=wd,Me._context=null;const tn=dc(Me,"$message"),Kn="_trap-focus-children",Ue=[],oo=t=>{if(Ue.length===0)return;const e=Ue[Ue.length-1][Kn];if(e.length>0&&t.code===Xt.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,r=t.target===e[0],o=t.target===e[e.length-1];r&&n&&(t.preventDefault(),e[e.length-1].focus()),o&&!n&&(t.preventDefault(),e[0].focus())}},vd={beforeMount(t){t[Kn]=Ds(t),Ue.push(t),Ue.length<=1&&document.addEventListener("keydown",oo)},updated(t){s.nextTick(()=>{t[Kn]=Ds(t)})},unmounted(){Ue.shift(),Ue.length===0&&document.removeEventListener("keydown",oo)}},kd=s.defineComponent({name:"ElMessageBox",directives:{TrapFocus:vd},components:{ElButton:Gu,ElFocusTrap:bu,ElInput:ou,ElOverlay:td,ElIcon:de,...Ps},inheritAttrs:!1,props:{buttonSize:{type:String,validator:sd},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:r,ns:o,size:a}=bs("message-box",s.computed(()=>t.buttonSize)),{t:i}=n,{nextZIndex:l}=r,c=s.ref(!1),u=s.reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:s.markRaw(Ht),cancelButtonLoadingIcon:s.markRaw(Ht),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),d=s.computed(()=>{const x=u.type;return{[o.bm("icon",x)]:x&&Kt[x]}}),h=$n(),p=$n(),g=s.computed(()=>{const x=u.type;return u.icon||x&&Kt[x]||""}),f=s.computed(()=>!!u.message),y=s.ref(),w=s.ref(),m=s.ref(),S=s.ref(),_=s.ref(),O=s.computed(()=>u.confirmButtonClass);s.watch(()=>u.inputValue,async x=>{await s.nextTick(),t.boxType==="prompt"&&x&&k()},{immediate:!0}),s.watch(()=>c.value,x=>{var M,D;x&&(t.boxType!=="prompt"&&(u.autofocus?m.value=(D=(M=_.value)==null?void 0:M.$el)!=null?D:y.value:m.value=y.value),u.zIndex=l()),t.boxType==="prompt"&&(x?s.nextTick().then(()=>{var ce;S.value&&S.value.$el&&(u.autofocus?m.value=(ce=A())!=null?ce:y.value:m.value=y.value)}):(u.editorErrorMessage="",u.validateError=!1))});const P=s.computed(()=>t.draggable),I=s.computed(()=>t.overflow),{isDragging:T}=nd(y,w,P,I);s.onMounted(async()=>{await s.nextTick(),t.closeOnHashChange&&window.addEventListener("hashchange",B)}),s.onBeforeUnmount(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",B)});function B(){c.value&&(c.value=!1,s.nextTick(()=>{u.action&&e("action",u.action)}))}const j=()=>{t.closeOnClickModal&&b(u.distinguishCancelAndClose?"close":"cancel")},E=to(j),v=x=>{if(u.inputType!=="textarea")return x.preventDefault(),b("confirm")},b=x=>{var M;t.boxType==="prompt"&&x==="confirm"&&!k()||(u.action=x,u.beforeClose?(M=u.beforeClose)==null||M.call(u,x,u,B):B())},k=()=>{if(t.boxType==="prompt"){const x=u.inputPattern;if(x&&!x.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||i("el.messagebox.error"),u.validateError=!0,!1;const M=u.inputValidator;if(ge(M)){const D=M(u.inputValue);if(D===!1)return u.editorErrorMessage=u.inputErrorMessage||i("el.messagebox.error"),u.validateError=!0,!1;if(ne(D))return u.editorErrorMessage=D,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},A=()=>{var x,M;const D=(x=S.value)==null?void 0:x.$refs;return(M=D==null?void 0:D.input)!=null?M:D==null?void 0:D.textarea},L=()=>{b("close")},W=()=>{t.closeOnPressEscape&&L()};return t.lockScroll&&rd(c),{...s.toRefs(u),ns:o,overlayEvent:E,visible:c,hasMessage:f,typeClass:d,contentId:h,inputId:p,btnSize:a,iconComponent:g,confirmButtonClasses:O,rootRef:y,focusStartRef:m,headerRef:w,inputRef:S,isDragging:T,confirmRef:_,doClose:B,handleClose:L,onCloseRequested:W,handleWrapperClick:j,handleInputEnter:v,handleAction:b,t:i}}});function Sd(t,e,n,r,o,a){const i=s.resolveComponent("el-icon"),l=s.resolveComponent("el-input"),c=s.resolveComponent("el-button"),u=s.resolveComponent("el-focus-trap"),d=s.resolveComponent("el-overlay");return s.openBlock(),s.createBlock(s.Transition,{name:"fade-in-linear",onAfterLeave:h=>t.$emit("vanish"),persisted:""},{default:s.withCtx(()=>[s.withDirectives(s.createVNode(d,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:s.withCtx(()=>[s.createElementVNode("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:s.normalizeClass(`${t.ns.namespace.value}-overlay-message-box`),onClick:t.overlayEvent.onClick,onMousedown:t.overlayEvent.onMousedown,onMouseup:t.overlayEvent.onMouseup},[s.createVNode(u,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:s.withCtx(()=>[s.createElementVNode("div",{ref:"rootRef",class:s.normalizeClass([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),t.ns.is("dragging",t.isDragging),{[t.ns.m("center")]:t.center}]),style:s.normalizeStyle(t.customStyle),tabindex:"-1",onClick:s.withModifiers(()=>{},["stop"])},[t.title!==null&&t.title!==void 0?(s.openBlock(),s.createElementBlock("div",{key:0,ref:"headerRef",class:s.normalizeClass([t.ns.e("header"),{"show-close":t.showClose}])},[s.createElementVNode("div",{class:s.normalizeClass(t.ns.e("title"))},[t.iconComponent&&t.center?(s.openBlock(),s.createBlock(i,{key:0,class:s.normalizeClass([t.ns.e("status"),t.typeClass])},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0),s.createElementVNode("span",null,s.toDisplayString(t.title),1)],2),t.showClose?(s.openBlock(),s.createElementBlock("button",{key:0,type:"button",class:s.normalizeClass(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:h=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),onKeydown:s.withKeys(s.withModifiers(h=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[s.createVNode(i,{class:s.normalizeClass(t.ns.e("close"))},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):s.createCommentVNode("v-if",!0)],2)):s.createCommentVNode("v-if",!0),s.createElementVNode("div",{id:t.contentId,class:s.normalizeClass(t.ns.e("content"))},[s.createElementVNode("div",{class:s.normalizeClass(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(s.openBlock(),s.createBlock(i,{key:0,class:s.normalizeClass([t.ns.e("status"),t.typeClass])},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.iconComponent)))]),_:1},8,["class"])):s.createCommentVNode("v-if",!0),t.hasMessage?(s.openBlock(),s.createElementBlock("div",{key:1,class:s.normalizeClass(t.ns.e("message"))},[s.renderSlot(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0,textContent:s.toDisplayString(t.message)},null,8,["for","textContent"]))])],2)):s.createCommentVNode("v-if",!0)],2),s.withDirectives(s.createElementVNode("div",{class:s.normalizeClass(t.ns.e("input"))},[s.createVNode(l,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":h=>t.inputValue=h,type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:s.normalizeClass({invalid:t.validateError}),onKeydown:s.withKeys(t.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),s.createElementVNode("div",{class:s.normalizeClass(t.ns.e("errormsg")),style:s.normalizeStyle({visibility:t.editorErrorMessage?"visible":"hidden"})},s.toDisplayString(t.editorErrorMessage),7)],2),[[s.vShow,t.showInput]])],10,["id"]),s.createElementVNode("div",{class:s.normalizeClass(t.ns.e("btns"))},[t.showCancelButton?(s.openBlock(),s.createBlock(c,{key:0,loading:t.cancelButtonLoading,"loading-icon":t.cancelButtonLoadingIcon,class:s.normalizeClass([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:h=>t.handleAction("cancel"),onKeydown:s.withKeys(s.withModifiers(h=>t.handleAction("cancel"),["prevent"]),["enter"])},{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):s.createCommentVNode("v-if",!0),s.withDirectives(s.createVNode(c,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,"loading-icon":t.confirmButtonLoadingIcon,class:s.normalizeClass([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:h=>t.handleAction("confirm"),onKeydown:s.withKeys(s.withModifiers(h=>t.handleAction("confirm"),["prevent"]),["enter"])},{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[s.vShow,t.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[s.vShow,t.visible]])]),_:3},8,["onAfterLeave"])}var Ed=ke(kd,[["render",Sd],["__file","index.vue"]]);const _t=new Map,Cd=t=>{let e=document.body;return t.appendTo&&(ne(t.appendTo)&&(e=document.querySelector(t.appendTo)),mt(t.appendTo)&&(e=t.appendTo),mt(e)||(e=document.body)),e},Td=(t,e,n=null)=>{const r=s.createVNode(Ed,t,ge(t.message)||s.isVNode(t.message)?{default:ge(t.message)?t.message:()=>t.message}:null);return r.appContext=n,s.render(r,e),Cd(t).appendChild(e.firstElementChild),r.component},Od=()=>document.createElement("div"),Id=(t,e)=>{const n=Od();t.onVanish=()=>{s.render(null,n),_t.delete(o)},t.onAction=a=>{const i=_t.get(o);let l;t.showInput?l={value:o.inputValue,action:a}:l=a,t.callback?t.callback(l,r.proxy):a==="cancel"||a==="close"?t.distinguishCancelAndClose&&a!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(l)};const r=Td(t,n,e),o=r.proxy;for(const a in t)ht(t,a)&&!ht(o.$props,a)&&(a==="closeIcon"&&qe(t[a])?o[a]=s.markRaw(t[a]):o[a]=t[a]);return o.visible=!0,o};function Ze(t,e=null){if(!X)return Promise.reject();let n;return ne(t)||s.isVNode(t)?t={message:t}:n=t.callback,new Promise((r,o)=>{const a=Id(t,e??Ze._context);_t.set(a,{options:t,callback:n,resolve:r,reject:o})})}const Ad=["alert","confirm","prompt"],Pd={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Ad.forEach(t=>{Ze[t]=Nd(t)});function Nd(t){return(e,n,r,o)=>{let a="";return qe(n)?(r=n,a=""):Jr(n)?a="":a=n,Ze(Object.assign({title:a,message:e,type:"",...Pd[t]},r,{boxType:t}),o)}}Ze.close=()=>{_t.forEach((t,e)=>{e.doClose()}),_t.clear()},Ze._context=null;const Te=Ze;Te.install=t=>{Te._context=t._context,t.config.globalProperties.$msgbox=Te,t.config.globalProperties.$messageBox=Te,t.config.globalProperties.$alert=Te.alert,t.config.globalProperties.$confirm=Te.confirm,t.config.globalProperties.$prompt=Te.prompt};const ao=Te,xd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>et).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class qn extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class $d extends qn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class io extends qn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lo extends qn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gn||(Gn={}));var Rd=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Bd{constructor(e,{headers:n={},customFetch:r,region:o=Gn.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=xd(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Rd(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:i}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(y=>{throw new $d(y)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new io(h);if(!h.ok)throw new lo(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return g==="application/json"?f=yield h.json():g==="application/octet-stream"?f=yield h.blob():g==="text/event-stream"?f=h:g==="multipart/form-data"?f=yield h.formData():f=yield h.text(),{data:f,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof lo||o instanceof io?o.context:void 0}}})}}var Q={},Jn={},nn={},bt={},rn={},sn={},jd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qe=jd();const Ld=Qe.fetch,co=Qe.fetch.bind(Qe),uo=Qe.Headers,Dd=Qe.Request,Md=Qe.Response,et=Object.freeze(Object.defineProperty({__proto__:null,Headers:uo,Request:Dd,Response:Md,default:co,fetch:Ld},Symbol.toStringTag,{value:"Module"})),Ud=Ju(et);var on={};Object.defineProperty(on,"__esModule",{value:!0});let Vd=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};on.default=Vd;var ho=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sn,"__esModule",{value:!0});const Fd=ho(Ud),zd=ho(on);let Wd=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c,u;let d=null,h=null,p=null,g=a.status,f=a.statusText;if(a.ok){if(this.method!=="HEAD"){const S=await a.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=S:h=JSON.parse(S))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),m=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&m&&m.length>1&&(p=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,g=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await a.text();try{d=JSON.parse(w),Array.isArray(d)&&a.status===404&&(h=[],d=null,g=200,f="OK")}catch{a.status===404&&w===""?(g=204,f="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,f="OK"),d&&this.shouldThrowOnError)throw new zd.default(d)}return{error:d,data:h,count:p,status:g,statusText:f}});return this.shouldThrowOnError||(o=o.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};sn.default=Wd;var Hd=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rn,"__esModule",{value:!0});const Kd=Hd(sn);let qd=class extends Kd.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:a=o}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const a=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};rn.default=qd;var Gd=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bt,"__esModule",{value:!0});const Jd=Gd(rn);let Yd=class extends Jd.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};bt.default=Yd;var Xd=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nn,"__esModule",{value:!0});const wt=Xd(bt);let Zd=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new wt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var o;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new wt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:a=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new wt.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new wt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new wt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};nn.default=Zd;var fo=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jn,"__esModule",{value:!0});const Qd=fo(nn),eh=fo(bt);let th=class ga{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new Qd.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ga(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||o?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",u=n);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new eh.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Jn.default=th;var tt=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.PostgrestError=Q.PostgrestBuilder=Q.PostgrestTransformBuilder=Q.PostgrestFilterBuilder=Q.PostgrestQueryBuilder=Q.PostgrestClient=void 0;const po=tt(Jn);Q.PostgrestClient=po.default;const go=tt(nn);Q.PostgrestQueryBuilder=go.default;const mo=tt(bt);Q.PostgrestFilterBuilder=mo.default;const yo=tt(rn);Q.PostgrestTransformBuilder=yo.default;const _o=tt(sn);Q.PostgrestBuilder=_o.default;const bo=tt(on);Q.PostgrestError=bo.default;var nh=Q.default={PostgrestClient:po.default,PostgrestQueryBuilder:go.default,PostgrestFilterBuilder:mo.default,PostgrestTransformBuilder:yo.default,PostgrestBuilder:_o.default,PostgrestError:bo.default};const{PostgrestClient:rh,PostgrestQueryBuilder:Up,PostgrestFilterBuilder:Vp,PostgrestTransformBuilder:Fp,PostgrestBuilder:zp,PostgrestError:Wp}=nh;class sh{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const oh="realtime-js/2.15.4",ah="1.0.0",Yn=1e4,ih=1e3,lh=100;var vt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vt||(vt={}));var H;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(H||(H={}));var ie;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ie||(ie={}));var Xn;(function(t){t.websocket="websocket"})(Xn||(Xn={}));var Ve;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ve||(Ve={}));class ch{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+o));i=i+o;const c=r.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class wo{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(V||(V={}));const vo=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,i)=>(a[i]=uh(i,t,e,o),a),{})},uh=(t,e,n,r)=>{const o=e.find(l=>l.name===t),a=o==null?void 0:o.type,i=n[t];return a&&!r.includes(a)?ko(a,i):Zn(i)},ko=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ph(e,n)}switch(t){case V.bool:return dh(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return hh(e);case V.json:case V.jsonb:return fh(e);case V.timestamp:return gh(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return Zn(e);default:return Zn(e)}},Zn=t=>t,dh=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},hh=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},fh=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ph=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const i=t.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>ko(e,l))}return t},gh=t=>typeof t=="string"?t.replace(" ","T"):t,So=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Qn{constructor(e,n,r={},o=Yn){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Eo;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Eo||(Eo={}));class kt{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kt.syncState(this.state,o,a,i),this.pendingDiffs.forEach(c=>{this.state=kt.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=kt.syncDiff(this.state,o,a,i),l())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const a=this.cloneDeep(e),i=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=a[u];if(h){const p=d.map(w=>w.presence_ref),g=h.map(w=>w.presence_ref),f=d.filter(w=>g.indexOf(w.presence_ref)<0),y=h.filter(w=>p.indexOf(w.presence_ref)<0);f.length>0&&(l[u]=f),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},r,o)}static syncDiff(e,n,r,o){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),p=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...p)}r(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,o(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Co;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Co||(Co={}));var St;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(St||(St={}));var be;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(be||(be={}));class er{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=H.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qn(this,ie.join,this.params,this.timeout),this.rejoinTimer=new wo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=H.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=H.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=H.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=H.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=H.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ie.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new kt(this),this.broadcastEndpointURL=So(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==H.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[St.PRESENCE]&&this.bindings[St.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(be.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(be.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var f;if(this.socket.setAuth(),g===void 0){e==null||e(be.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(f=y==null?void 0:y.length)!==null&&f!==void 0?f:0,m=[];for(let S=0;S<w;S++){const _=y[S],{filter:{event:O,schema:P,table:I,filter:T}}=_,B=g&&g[S];if(B&&B.event===O&&B.schema===P&&B.table===I&&B.filter===T)m.push(Object.assign(Object.assign({},_),{id:B.id}));else{this.unsubscribe(),this.state=H.errored,e==null||e(be.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(be.SUBSCRIBED);return}}).receive("error",g=>{this.state=H.errored,e==null||e(be.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(be.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===H.joined&&e===St.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=u.body)===null||o===void 0?void 0:o.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=H.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ie.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Qn(this,ie.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=H.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Qn(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>lh){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ie;if(r&&[l,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let p=this._onMessage(i,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var f,y,w;return((f=g.filter)===null||f===void 0?void 0:f.event)==="*"||((w=(y=g.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(g=>g.callback(p,r)):(a=this.bindings[i])===null||a===void 0||a.filter(g=>{var f,y,w,m,S,_;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const O=g.id,P=(f=g.filter)===null||f===void 0?void 0:f.event;return O&&((y=n.ids)===null||y===void 0?void 0:y.includes(O))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const O=(S=(m=g==null?void 0:g.filter)===null||m===void 0?void 0:m.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return O==="*"||O===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof p=="object"&&"ids"in p){const f=p.data,{schema:y,table:w,commit_timestamp:m,type:S,errors:_}=f;p=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:m,eventType:S,new:{},old:{},errors:_}),this._getPayloadRecords(f))}g.callback(p,r)})}_isClosed(){return this.state===H.closed}_isJoined(){return this.state===H.joined}_isJoining(){return this.state===H.joining}_isLeaving(){return this.state===H.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&er.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ie.close,{},e)}_onError(e){this._on(ie.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=H.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=vo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=vo(e.columns,e.old_record)),n}}const tr=()=>{},an={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mh=[1e3,2e3,5e3,1e4],yh=1e4,_h=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bh{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yn,this.transport=null,this.heartbeatIntervalMs=an.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tr,this.ref=0,this.reconnectTimer=null,this.logger=tr,this.conn=null,this.sendBuffer=[],this.serializer=new ch,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...i)=>Promise.resolve().then(()=>et).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Xn.websocket}`,this.httpEndpoint=So(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sh.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ah}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vt.connecting:return Ve.Connecting;case vt.open:return Ve.Open;case vt.closing:return Ve.Closing;default:return Ve.Closed}}isConnected(){return this.connectionState()===Ve.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new er(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:o,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ih,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},an.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:a,ref:i}=n,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${o} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(o,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ie.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_h],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:oh};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(ie.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new wo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},an.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,a,i,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Yn,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:an.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:tr,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>mh[h-1]||yh,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class nr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function K(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class wh extends nr{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rr extends nr{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var vh=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const To=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>et).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},kh=()=>vh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>et)).Response:Response}),sr=t=>{if(Array.isArray(t))return t.map(n=>sr(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=sr(r)}),e},Sh=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Fe=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const or=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Eh=(t,e,n)=>Fe(void 0,void 0,void 0,function*(){const r=yield kh();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const a=t.status||500,i=(o==null?void 0:o.statusCode)||a+"";e(new wh(or(o),a,i))}).catch(o=>{e(new rr(or(o),o))}):e(new rr(or(t),t))}),Ch=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(Sh(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Et(t,e,n,r,o,a){return Fe(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Ch(e,r,o,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Eh(c,l,r))})})}function ln(t,e,n,r){return Fe(this,void 0,void 0,function*(){return Et(t,"GET",e,n,r)})}function he(t,e,n,r,o){return Fe(this,void 0,void 0,function*(){return Et(t,"POST",e,r,o,n)})}function ar(t,e,n,r,o){return Fe(this,void 0,void 0,function*(){return Et(t,"PUT",e,r,o,n)})}function Th(t,e,n,r){return Fe(this,void 0,void 0,function*(){return Et(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Oo(t,e,n,r,o){return Fe(this,void 0,void 0,function*(){return Et(t,"DELETE",e,r,o,n)})}var Y=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Oh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Io={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ih{constructor(e,n={},r,o){this.url=e,this.headers=n,this.bucketId=r,this.fetch=To(o)}uploadOrUpdate(e,n,r,o){return Y(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Io),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?ar:he)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(K(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Y(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Io.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ar(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(K(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Y(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield he(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new nr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}update(e,n,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Y(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield he(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Y(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield he(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Y(this,void 0,void 0,function*(){try{const o=yield he(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}download(e,n){return Y(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ln(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(K(l))return{data:null,error:l};throw l}})}info(e){return Y(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ln(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:sr(r),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}exists(e){return Y(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Th(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(K(r)&&r instanceof rr){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&o.push(c);let u=o.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}list(e,n,r){return Y(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Oh),n),{prefix:e||""});return{data:yield he(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(K(o))return{data:null,error:o};throw o}})}listV2(e,n){return Y(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield he(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ah={"X-Client-Info":"storage-js/2.11.0"};var nt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Ph{constructor(e,n={},r,o){const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Ah),n),this.fetch=To(r)}listBuckets(){return nt(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}})}getBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return nt(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return nt(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}emptyBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}deleteBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}})}}class Nh extends Ph{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new Ih(this.url,this.headers,e,this.fetch)}}const xh="2.57.0";let Ct="";typeof Deno<"u"?Ct="deno":typeof document<"u"?Ct="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ct="react-native":Ct="node";const $h={headers:{"X-Client-Info":`supabase-js-${Ct}/${xh}`}},Rh={schema:"public"},Bh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jh={};var Lh=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Dh=t=>{let e;return t?e=t:typeof fetch>"u"?e=co:e=fetch,(...n)=>e(...n)},Mh=()=>typeof Headers>"u"?uo:Headers,Uh=(t,e,n)=>{const r=Dh(n),o=Mh();return(a,i)=>Lh(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new o(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},i),{headers:u}))})};var Vh=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function Fh(t){return t.endsWith("/")?t:t+"/"}function zh(t,e){var n,r;const{db:o,auth:a,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},c),o),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Vh(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const Ao="2.71.1",rt=30*1e3,ir=3,lr=ir*rt,Wh="http://localhost:9999",Hh="supabase.auth.token",Kh={"X-Client-Info":`gotrue-js/${Ao}`},cr="X-Supabase-Api-Version",Po={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gh=10*60*1e3;class ur extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function N(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Jh extends ur{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Yh(t){return N(t)&&t.name==="AuthApiError"}class No extends ur{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Oe extends ur{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Ie extends Oe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xh(t){return N(t)&&t.name==="AuthSessionMissingError"}class cn extends Oe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class un extends Oe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dn extends Oe{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zh(t){return N(t)&&t.name==="AuthImplicitGrantRedirectError"}class xo extends Oe{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dr extends Oe{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function hr(t){return N(t)&&t.name==="AuthRetryableFetchError"}class $o extends Oe{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class fr extends Oe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ro=` 	
\r=`.split(""),Qh=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ro.length;e+=1)t[Ro[e].charCodeAt(0)]=-2;for(let e=0;e<hn.length;e+=1)t[hn[e].charCodeAt(0)]=e;return t})();function Bo(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(hn[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(hn[r]),e.queuedBits-=6}}function jo(t,e,n){const r=Qh[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lo(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=i=>{nf(i,r,n)};for(let i=0;i<t.length;i+=1)jo(t.charCodeAt(i),o,a);return e.join("")}function ef(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tf(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}ef(r,e)}}function nf(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function rf(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)jo(t.charCodeAt(o),n,r);return new Uint8Array(e)}function sf(t){const e=[];return tf(t,n=>e.push(n)),new Uint8Array(e)}function of(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>Bo(o,n,r)),Bo(null,n,r),e.join("")}function af(t){return Math.round(Date.now()/1e3)+t}function lf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const le=()=>typeof window<"u"&&typeof document<"u",ze={tested:!1,writable:!1},Do=()=>{if(!le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ze.tested)return ze.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ze.tested=!0,ze.writable=!0}catch{ze.tested=!0,ze.writable=!1}return ze.writable};function cf(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const Mo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>et).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uf=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",st=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},We=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ae=async(t,e)=>{await t.removeItem(e)};class fn{constructor(){this.promise=new fn.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fn.promiseConstructor=Promise;function pr(t){const e=t.split(".");if(e.length!==3)throw new fr("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!qh.test(e[r]))throw new fr("JWT not in base64url format");return{header:JSON.parse(Lo(e[0])),payload:JSON.parse(Lo(e[1])),signature:rf(e[2]),raw:{header:e[0],payload:e[1]}}}async function df(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hf(t,e){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){r(i);return}}catch(i){if(!e(a,i)){o(i);return}}})()})}function ff(t){return("0"+t.toString(16)).substr(-2)}function pf(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,ff).join("")}async function gf(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function mf(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await gf(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ot(t,e,n=!1){const r=pf();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await st(t,`${e}-code-verifier`,o);const a=await mf(r);return[a,r===a?"plain":"s256"]}const yf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _f(t){const e=t.headers.get(cr);if(!e||!e.match(yf))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bf(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function at(t){if(!vf.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gr(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uo(t){return JSON.parse(JSON.stringify(t))}var kf=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const He=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sf=[502,503,504];async function Vo(t){var e;if(!uf(t))throw new dr(He(t),0);if(Sf.includes(t.status))throw new dr(He(t),t.status);let n;try{n=await t.json()}catch(a){throw new No(He(a),a)}let r;const o=_f(t);if(o&&o.getTime()>=Po["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $o(He(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ie}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new $o(He(n),t.status,n.weak_password.reasons);throw new Jh(He(n),t.status||500,r)}const Ef=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function R(t,e,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[cr]||(a[cr]=Po["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Cf(t,e,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Cf(t,e,n,r,o,a){const i=Ef(e,r,o,a);let l;try{l=await t(n,Object.assign({},i))}catch(c){throw console.error(c),new dr(He(c),0)}if(l.ok||await Vo(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Vo(c)}}function we(t){var e;let n=null;Af(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=af(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Fo(t){const e=we(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Pe(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tf(t){return{data:t,error:null}}function Of(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=t,i=kf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function If(t){return t}function Af(t){return t.access_token&&t.refresh_token&&t.expires_in}const mr=["global","local","others"];var Pf=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class Nf{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Mo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=mr[0]){if(mr.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mr.join(", ")}`);try{return await R(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await R(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pe})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Pf(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await R(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Of,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(N(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await R(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pe})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await R(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:If});if(d.error)throw d.error;const h=await d.json(),p=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(f=>{const y=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(f.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(N(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){at(e);try{return await R(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pe})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){at(e);try{return await R(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Pe})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){at(e);try{return await R(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pe})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){at(e.userId);try{const{data:n,error:r}=await R(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _deleteFactor(e){at(e.userId),at(e.id);try{return{data:await R(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}}function zo(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function xf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const it={debug:!!(globalThis&&Do()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $f extends Wo{}async function Rf(t,e,n){it.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),it.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){it.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{it.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw it.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $f(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(it.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}xf();const Bf={url:Wh,storageKey:Hh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ho(t,e,n){return await n()}const lt={};class Tt{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tt.nextInstanceID,Tt.nextInstanceID+=1,this.instanceID>0&&le()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Bf),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Nf({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Mo(o.fetch),this.lock=o.lock||Ho,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:le()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Rf:this.lock=Ho,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Do()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zo(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=zo(this.memoryStorage)),le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=lt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){lt[this.storageKey]=Object.assign(Object.assign({},lt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=lt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lt[this.storageKey]=Object.assign(Object.assign({},lt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ao}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=cf(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),le()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Zh(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return N(n)?{error:n}:{error:new No("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const a=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:we}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(N(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,o;try{let a;if("email"in e){const{email:d,password:h,options:p}=e;let g=null,f=null;this.flowType==="pkce"&&([g,f]=await ot(this.storage,this.storageKey)),a=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:f},xform:we})}else if("phone"in e){const{phone:d,password:h,options:p}=e;a=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(o=p==null?void 0:p.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:we})}else throw new un("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(N(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:i,options:l}=e;n=await R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Fo})}else if("phone"in e){const{phone:a,password:i,options:l}=e;n=await R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Fo})}else throw new un("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new cn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,o,a,i,l,c,u,d,h,p,g;let f,y;if("message"in e)f=e.message,y=e.signature;else{const{chain:w,wallet:m,statement:S,options:_}=e;let O;if(le())if(typeof m=="object")O=m;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))O=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=m}const P=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const I=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),S?{statement:S}:null));let T;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")T=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)T=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)f=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),y=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${P.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(o=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const I=await O.signMessage(new TextEncoder().encode(f),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=I}}try{const{data:w,error:m}=await R(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:of(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:we});if(m)throw m;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new cn}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:m})}catch(w){if(N(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await We(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:a,error:i}=await R(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:we});if(await Ae(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new cn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:i})}catch(a){if(N(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:a,nonce:i}=e,l=await R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:we}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new cn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,a,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ot(this.storage,this.storageKey));const{error:h}=await R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c==null?void 0:c.data)!==null&&o!==void 0?o:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new un("You must provide either an email or phone number.")}catch(l){if(N(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await R(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:we});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(N(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await ot(this.storage,this.storageKey)),await R(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Tf})}catch(a){if(N(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ie;const{error:o}=await R(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(N(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:a}=e,{error:i}=await R(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:a}=e,{data:i,error:l}=await R(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new un("You must provide either an email or phone number and a type")}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await We(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<lr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await We(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=gr()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pe}):await this._useSession(async n=>{var r,o,a;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Pe})})}catch(n){if(N(n))return Xh(n)&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Ie;const i=o.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ot(this.storage,this.storageKey));const{data:u,error:d}=await R(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Pe});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ie;const n=Date.now()/1e3;let r=n,o=!0,a=null;const{payload:i}=pr(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(N(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ie;const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!le())throw new dn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dn("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xo("No code detected.");const{data:S,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!i||!u)throw new dn("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const g=p-d;g*1e3<=rt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const f=p-h;d-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,p,d):d-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,p,d);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const m={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:h,expires_at:p,refresh_token:i,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(N(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await We(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Yh(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=lf(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await ot(this.storage,this.storageKey,!0));try{return await R(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(N(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var i,l,c,u,d;const{data:h,error:p}=a;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await R(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return le()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(N(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:i}=n;if(i)throw i;return await R(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await hf(async o=>(o>0&&await df(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await R(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:we})),(o,a)=>{const i=200*Math.pow(2,o);return a&&hr(a)&&Date.now()+i-r<rt})}catch(r){if(this._debug(n,"error",r),N(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),le()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await We(this.storage,this.storageKey);if(o&&this.userStorage){let i=await We(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await st(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:gr()}else if(o&&!o.user&&!o.user){const i=await We(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await Ae(this.storage,this.storageKey+"-user"),await st(this.storage,this.storageKey,o)):o.user=gr()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<lr;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${lr}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),hr(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new fn;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Ie;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(o,"error",a),N(a)){const i={session:null,error:a};return hr(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await st(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=Uo(o);await st(this.storage,this.storageKey,a)}else{const o=Uo(n);await st(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ae(this.storage,this.storageKey),await Ae(this.storage,this.storageKey+"-code-verifier"),await Ae(this.storage,this.storageKey+"-user"),this.userStorage&&await Ae(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/rt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${rt}ms, refresh threshold is ${ir} ticks`),o<=ir&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await ot(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await R(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await R(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const{data:i,error:l}=await R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(N(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(N(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=pr(o.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Gh>o)return r;const{data:a,error:i}=await R(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:f}=await this.getSession();if(f||!g.session)return{data:null,error:f};r=g.session.access_token}const{header:o,payload:a,signature:i,raw:{header:l,payload:c}}=pr(r);n!=null&&n.allowExpired||bf(a.exp);const u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:o,signature:i},error:null}}const d=wf(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,sf(`${l}.${c}`)))throw new fr("Invalid JWT signature");return{data:{claims:a,header:o,signature:i},error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}}Tt.nextInstanceID=0;const jf=Tt;class Lf extends jf{constructor(e){super(e)}}var Df=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Mf{constructor(e,n,r){var o,a,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Fh(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Rh,realtime:jh,auth:Object.assign(Object.assign({},Bh),{storageKey:u}),global:$h},h=zh(r??{},d);this.storageKey=(o=h.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=Uh(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new rh(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Nh(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Bd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Df(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,storageKey:i,flowType:l,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lf({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new bh(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Uf=(t,e,n)=>new Mf(t,e,n);function Vf(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Vf()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ne="aiworkspace.pro";function pn(t){return t==="localhost"||/^\d+\.\d+\.\d+\.\d+$/.test(t)}function Ko(t){return t===Ne||t.endsWith(`.${Ne}`)}function gn(t){return document.cookie.split(";").map(r=>r.trim()).filter(r=>t.some(o=>r.startsWith(o+"=")))}function xe(t,e,n=60*60*24*365){const r=location.hostname;if(pn(r)){document.cookie=`${t}=${encodeURIComponent(e)}; Path=/; Max-Age=${n}; SameSite=Lax`,console.log("[auth][cookie][set][local]",{host:r,name:t,valuePreview:e.slice(0,20)+"..."}),console.log("[auth][cookie][after]",gn([t]));return}document.cookie=`${t}=${encodeURIComponent(e)}; Domain=.${Ne}; Path=/; Max-Age=${n}; SameSite=Lax; Secure`,document.cookie=`${t}=; Path=/; Max-Age=0; SameSite=Lax`,console.log("[auth][cookie][set][apex]",{host:r,apex:Ne,name:t,valuePreview:e.slice(0,20)+"..."}),console.log("[auth][cookie][after]",gn([t]))}function $e(t){const e=new RegExp("(?:^|; )"+t.replace(/[$()*+.[\]?^{}|\\/-]/g,"\\$&")+"=([^;]*)"),n=document.cookie.match(e);return n?decodeURIComponent(n[1]):null}function yr(t){const e=location.hostname;if(pn(e)){document.cookie=`${t}=; Path=/; Max-Age=0; SameSite=Lax`,console.log("[auth][cookie][clear][local]",{host:e,name:t});return}document.cookie=`${t}=; Domain=.${Ne}; Path=/; Max-Age=0; SameSite=Lax; Secure`,document.cookie=`${t}=; Path=/; Max-Age=0; SameSite=Lax`,console.log("[auth][cookie][clear][apex]",{host:e,apex:Ne,name:t}),console.log("[auth][cookie][after]",gn([t]))}function _r(t){const e=location.hostname;if(pn(e)){console.log("[auth][cookie][promote] skip (local host)",e);return}if(!Ko(e)){console.log("[auth][cookie][promote] skip (not under apex)",{host:e,apex:Ne});return}console.log("[auth][cookie][promote] start",{host:e,apex:Ne,names:t}),t.forEach(n=>{const r=$e(n);r?xe(n,r,60*60*24*365):console.log("[auth][cookie][promote] missing",n)}),console.log("[auth][cookie][promote] done",gn(t))}function Ff(){return`${window.location.origin}/callback`}function zf(){try{const t=new URLSearchParams(location.search),e=["redirect","redirect_to","returnTo","next"].find(r=>t.get(r));let n=e?t.get(e):"";if(n||(n=sessionStorage.getItem("post-login-redirect")||localStorage.getItem("post-login-redirect")||""),n||(n={VITE_SUPABASE_URL:"https://oqdnbpmmgntqtigstaow.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZG5icG1tZ250cXRpZ3N0YW93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ0NTk2NDYsImV4cCI6MjA1MDAzNTY0Nn0.rn0nRY9xLgLt-ajiSPeG0PcdS9V-549C1yeqhcxxG40",VITE_APEX_DOMAIN:"aiworkspace.pro",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_DEFAULT_POST_LOGIN_URL||"/"),n.startsWith("http"))try{const r=new URL(n);return Ko(r.hostname)||pn(r.hostname)?n:"/"}catch{return"/"}return n.startsWith("/")||(n="/"+n),n}catch{return"/"}}const fe="sb-access-token",pe="sb-refresh-token",br="sb-access-token",wr="sb-refresh-token";function Ot(){try{const t=$e(fe),e=$e(pe);t&&localStorage.setItem(br,t),e&&localStorage.setItem(wr,e),console.log("[auth][cookie->ls] sync",{hasAccess:!!t,hasRefresh:!!e})}catch(t){console.log("[auth][cookie->ls] error",t)}}function qo(){try{localStorage.removeItem(br),localStorage.removeItem(wr),console.log("[auth][cookie->ls] cleared localStorage")}catch(t){console.log("[auth][cookie->ls] clear error",t)}}async function Wf(){try{_r([fe,pe]);const t=$e(fe),e=$e(pe);if(t&&e){const{data:{session:n}}=await te.auth.getSession();if(!n){const{data:r,error:o}=await te.auth.setSession({access_token:t,refresh_token:e});o?console.log("[auth][restore] error",o):console.log("[auth][restore] done",!!r.session)}}else console.log("[auth][restore] no cookies present");Ot()}catch(t){console.log("[auth][restore] exception",t)}}function Go(){console.log("[auth][listener] Setting up auth state listener..."),te.auth.onAuthStateChange(async(t,e)=>{switch(console.log("[auth][listener] Auth state changed:",t,!!e),t){case"TOKEN_REFRESHED":console.log("[auth][listener] Token refreshed successfully"),e&&(xe(fe,e.access_token,60*60*24*365),xe(pe,e.refresh_token,60*60*24*365),Ot());break;case"SIGNED_IN":console.log("[auth][listener] User signed in"),e&&(xe(fe,e.access_token,60*60*24*365),xe(pe,e.refresh_token,60*60*24*365),Ot());break;case"SIGNED_OUT":console.log("[auth][listener] User signed out");break;case"USER_UPDATED":console.log("[auth][listener] User updated");break;default:console.log("[auth][listener] Unhandled auth event:",t)}})}async function vr(){try{const{data:{session:t}}=await te.auth.getSession();if(t&&t.user)return console.log("[auth][restore] Active session found"),{success:!0,session:t};const e=$e(fe),n=$e(pe);if(e&&n){console.log("[auth][restore] Attempting to restore session from cookies...");const{data:r,error:o}=await te.auth.setSession({access_token:e,refresh_token:n});if(o)return console.log("[auth][restore] Failed to restore session:",o.message),{success:!1,error:o};if(r.session)return console.log("[auth][restore] Session restored successfully"),xe(fe,r.session.access_token,60*60*24*365),xe(pe,r.session.refresh_token,60*60*24*365),Ot(),{success:!0,session:r.session}}return console.log("[auth][restore] No valid session or cookies found"),{success:!1,error:"No valid session or cookies"}}catch(t){return console.log("[auth][restore] Exception during session restoration:",t),{success:!1,error:t}}}if(typeof window<"u")try{_r([fe,pe])}catch(t){console.log("[auth][cookie][promote] error (pre-init)",t)}const kr="https://oqdnbpmmgntqtigstaow.supabase.co",Sr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZG5icG1tZ250cXRpZ3N0YW93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ0NTk2NDYsImV4cCI6MjA1MDAzNTY0Nn0.rn0nRY9xLgLt-ajiSPeG0PcdS9V-549C1yeqhcxxG40",te=Uf(kr,Sr,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});typeof window<"u"&&Go(),console.log("Supabase Configuration:",{url:kr,hasKey:!!Sr,autoRefreshToken:!0,persistSession:!0}),console.log("URL:",kr.replace(/https:\/\/(.+)\.supabase\.co/,"https://*****.supabase.co")),console.log("Key configured:",!Sr.includes("your-anon-key")),console.log("Environment mode:","production");function Jo(){const t=s.ref({user:null,isAuthenticated:!1,isLoading:!0}),e=s.ref(null),n=s.computed(()=>t.value.isAuthenticated),r=s.computed(()=>t.value.user),o=s.computed(()=>t.value.isLoading),a=async()=>{var d,h,p,g,f,y,w,m,S,_,O,P,I,T,B;try{const{data:{session:j}}=await te.auth.getSession();if(j&&j.user){const v=j.user,b={id:v.id,name:((d=v.user_metadata)==null?void 0:d.name)||((h=v.user_metadata)==null?void 0:h.user_name)||((p=v.user_metadata)==null?void 0:p.full_name)||((g=v.email)==null?void 0:g.split("@")[0])||"User",email:v.email,avatar_url:((f=v.user_metadata)==null?void 0:f.avatar_url)||null,user_metadata:v.user_metadata};return t.value={user:b,isAuthenticated:!0,isLoading:!1},e.value={user:b,access_token:j.access_token,refresh_token:j.refresh_token},{success:!0,session:e.value}}console.log("[auth][enhanced] No active session, attempting to restore from cookies...");const E=await vr();if(E.success&&E.session){console.log("[auth][enhanced] Session restored successfully");const v=E.session.user,b={id:v.id,name:((y=v.user_metadata)==null?void 0:y.name)||((w=v.user_metadata)==null?void 0:w.user_name)||((m=v.user_metadata)==null?void 0:m.full_name)||((S=v.email)==null?void 0:S.split("@")[0])||"User",email:v.email,avatar_url:((_=v.user_metadata)==null?void 0:_.avatar_url)||null,user_metadata:v.user_metadata};return t.value={user:b,isAuthenticated:!0,isLoading:!1},e.value=E.session,{success:!0,session:e.value}}else console.log("[auth][enhanced] Failed to restore session:",E.error)}catch(j){console.error("Error getting Supabase session:",j);try{const E=await vr();if(E.success&&E.session){console.log("[auth][enhanced] Session restored after error");const v=E.session.user,b={id:v.id,name:((O=v.user_metadata)==null?void 0:O.name)||((P=v.user_metadata)==null?void 0:P.user_name)||((I=v.user_metadata)==null?void 0:I.full_name)||((T=v.email)==null?void 0:T.split("@")[0])||"User",email:v.email,avatar_url:((B=v.user_metadata)==null?void 0:B.avatar_url)||null,user_metadata:v.user_metadata};return t.value={user:b,isAuthenticated:!0,isLoading:!1},e.value=E.session,{success:!0,session:e.value}}}catch(E){console.error("Error restoring session:",E)}}return t.value={user:null,isAuthenticated:!1,isLoading:!1},e.value=null,{success:!1,error:"No valid session found"}},i=async()=>{try{await te.auth.signOut(),yr(fe),yr(pe),qo(),t.value={user:null,isAuthenticated:!1,isLoading:!1},e.value=null,console.log("[auth][enhanced] User logged out successfully")}catch(d){console.error("Error during logout:",d),t.value={user:null,isAuthenticated:!1,isLoading:!1},e.value=null}},l=async(d,h)=>{var p,g,f,y,w;try{t.value.isLoading=!0;const{data:m,error:S}=await te.auth.signInWithPassword({email:d,password:h});if(S)throw S;if(m.session){const _=m.session.user,O={id:_.id,name:((p=_.user_metadata)==null?void 0:p.name)||((g=_.user_metadata)==null?void 0:g.user_name)||((f=_.user_metadata)==null?void 0:f.full_name)||((y=_.email)==null?void 0:y.split("@")[0])||"User",email:_.email,avatar_url:((w=_.user_metadata)==null?void 0:w.avatar_url)||null,user_metadata:_.user_metadata};return t.value={user:O,isAuthenticated:!0,isLoading:!1},e.value={user:O,access_token:m.session.access_token,refresh_token:m.session.refresh_token},{success:!0,session:e.value}}return{success:!1,error:"No session returned"}}catch(m){return console.error("Sign in error:",m),t.value.isLoading=!1,{success:!1,error:m}}},c=async(d,h,p)=>{var g,f,y,w,m;try{t.value.isLoading=!0;const{data:S,error:_}=await te.auth.signUp({email:d,password:h,options:{data:p}});if(_)throw _;if(S.session){const O=S.session.user,P={id:O.id,name:((g=O.user_metadata)==null?void 0:g.name)||((f=O.user_metadata)==null?void 0:f.user_name)||((y=O.user_metadata)==null?void 0:y.full_name)||((w=O.email)==null?void 0:w.split("@")[0])||"User",email:O.email,avatar_url:((m=O.user_metadata)==null?void 0:m.avatar_url)||null,user_metadata:O.user_metadata};return t.value={user:P,isAuthenticated:!0,isLoading:!1},e.value={user:P,access_token:S.session.access_token,refresh_token:S.session.refresh_token},{success:!0,session:e.value}}return{success:!1,error:"No session returned"}}catch(S){return console.error("Sign up error:",S),t.value.isLoading=!1,{success:!1,error:S}}},u=async()=>{await a()};return s.onMounted(()=>{u()}),{authState:t,currentSession:e,isAuthenticated:n,currentUser:r,isLoading:o,loadUserInfo:a,logout:i,signIn:l,signUp:c,checkAuth:u}}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let It;const mn=t=>It=t,Hf=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function Ke(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var At;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(At||(At={}));const Pt=typeof window<"u";function Yo(t,e){for(const n in e){const r=e[n];if(!(n in t))continue;const o=t[n];Ke(o)&&Ke(r)&&!s.isRef(r)&&!s.isReactive(r)?t[n]=Yo(o,r):t[n]=r}return t}const Xo=()=>{};function Zo(t,e,n,r=Xo){t.push(e);const o=()=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),r())};return!n&&s.getCurrentScope()&&s.onScopeDispose(o),o}function ct(t,...e){t.slice().forEach(n=>{n(...e)})}const Kf=t=>t(),Qo=Symbol(),Er=Symbol();function Cr(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],o=t[n];Ke(o)&&Ke(r)&&t.hasOwnProperty(n)&&!s.isRef(r)&&!s.isReactive(r)?t[n]=Cr(o,r):t[n]=r}return t}const qf=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function Gf(t){return!Ke(t)||!t.hasOwnProperty(qf)}const{assign:se}=Object;function ea(t){return!!(s.isRef(t)&&t.effect)}function ta(t,e,n,r){const{state:o,actions:a,getters:i}=e,l=n.state.value[t];let c;function u(){!l&&(process.env.NODE_ENV==="production"||!r)&&(n.state.value[t]=o?o():{});const d=process.env.NODE_ENV!=="production"&&r?s.toRefs(s.ref(o?o():{}).value):s.toRefs(n.state.value[t]);return se(d,a,Object.keys(i||{}).reduce((h,p)=>(process.env.NODE_ENV!=="production"&&p in d&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${p}" in store "${t}".`),h[p]=s.markRaw(s.computed(()=>{mn(n);const g=n._s.get(t);return i[p].call(g,g)})),h),{}))}return c=Tr(t,u,e,n,r,!0),c}function Tr(t,e,n={},r,o,a){let i;const l=se({actions:{}},n);if(process.env.NODE_ENV!=="production"&&!r._e.active)throw new Error("Pinia destroyed");const c={deep:!0};process.env.NODE_ENV!=="production"&&!Tl&&(c.onTrigger=E=>{u?g=E:u==!1&&!T._hotUpdating&&(Array.isArray(g)?g.push(E):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let u,d,h=[],p=[],g;const f=r.state.value[t];!a&&!f&&(process.env.NODE_ENV==="production"||!o)&&(r.state.value[t]={});const y=s.ref({});let w;function m(E){let v;u=d=!1,process.env.NODE_ENV!=="production"&&(g=[]),typeof E=="function"?(E(r.state.value[t]),v={type:At.patchFunction,storeId:t,events:g}):(Cr(r.state.value[t],E),v={type:At.patchObject,payload:E,storeId:t,events:g});const b=w=Symbol();s.nextTick().then(()=>{w===b&&(u=!0)}),d=!0,ct(h,v,r.state.value[t])}const S=a?function(){const{state:v}=n,b=v?v():{};this.$patch(k=>{se(k,b)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`🍍: Store "${t}" is built using the setup syntax and does not implement $reset().`)}:Xo;function _(){i.stop(),h=[],p=[],r._s.delete(t)}const O=(E,v="")=>{if(Qo in E)return E[Er]=v,E;const b=function(){mn(r);const k=Array.from(arguments),A=[],L=[];function W(D){A.push(D)}function x(D){L.push(D)}ct(p,{args:k,name:b[Er],store:T,after:W,onError:x});let M;try{M=E.apply(this&&this.$id===t?this:T,k)}catch(D){throw ct(L,D),D}return M instanceof Promise?M.then(D=>(ct(A,D),D)).catch(D=>(ct(L,D),Promise.reject(D))):(ct(A,M),M)};return b[Qo]=!0,b[Er]=v,b},P=s.markRaw({actions:{},getters:{},state:[],hotState:y}),I={_p:r,$id:t,$onAction:Zo.bind(null,p),$patch:m,$reset:S,$subscribe(E,v={}){const b=Zo(h,E,v.detached,()=>k()),k=i.run(()=>s.watch(()=>r.state.value[t],A=>{(v.flush==="sync"?d:u)&&E({storeId:t,type:At.direct,events:g},A)},se({},c,v)));return b},$dispose:_},T=s.reactive(process.env.NODE_ENV!=="production"||process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&Pt?se({_hmrPayload:P,_customProperties:s.markRaw(new Set)},I):I);r._s.set(t,T);const j=(r._a&&r._a.runWithContext||Kf)(()=>r._e.run(()=>(i=s.effectScope()).run(()=>e({action:O}))));for(const E in j){const v=j[E];if(s.isRef(v)&&!ea(v)||s.isReactive(v))process.env.NODE_ENV!=="production"&&o?Ut(y.value,E,s.toRef(j,E)):a||(f&&Gf(v)&&(s.isRef(v)?v.value=f[E]:Cr(v,f[E])),r.state.value[t][E]=v),process.env.NODE_ENV!=="production"&&P.state.push(E);else if(typeof v=="function"){const b=process.env.NODE_ENV!=="production"&&o?v:O(v,E);j[E]=b,process.env.NODE_ENV!=="production"&&(P.actions[E]=v),l.actions[E]=v}else process.env.NODE_ENV!=="production"&&ea(v)&&(P.getters[E]=a?n.getters[E]:v,Pt&&(j._getters||(j._getters=s.markRaw([]))).push(E))}if(se(T,j),se(s.toRaw(T),j),Object.defineProperty(T,"$state",{get:()=>process.env.NODE_ENV!=="production"&&o?y.value:r.state.value[t],set:E=>{if(process.env.NODE_ENV!=="production"&&o)throw new Error("cannot set hotState");m(v=>{se(v,E)})}}),process.env.NODE_ENV!=="production"&&(T._hotUpdate=s.markRaw(E=>{T._hotUpdating=!0,E._hmrPayload.state.forEach(v=>{if(v in T.$state){const b=E.$state[v],k=T.$state[v];typeof b=="object"&&Ke(b)&&Ke(k)?Yo(b,k):E.$state[v]=k}Ut(T,v,s.toRef(E.$state,v))}),Object.keys(T.$state).forEach(v=>{v in E.$state||Tn(T,v)}),u=!1,d=!1,r.state.value[t]=s.toRef(E._hmrPayload,"hotState"),d=!0,s.nextTick().then(()=>{u=!0});for(const v in E._hmrPayload.actions){const b=E[v];Ut(T,v,O(b,v))}for(const v in E._hmrPayload.getters){const b=E._hmrPayload.getters[v],k=a?s.computed(()=>(mn(r),b.call(T,T))):b;Ut(T,v,k)}Object.keys(T._hmrPayload.getters).forEach(v=>{v in E._hmrPayload.getters||Tn(T,v)}),Object.keys(T._hmrPayload.actions).forEach(v=>{v in E._hmrPayload.actions||Tn(T,v)}),T._hmrPayload=E._hmrPayload,T._getters=E._getters,T._hotUpdating=!1})),process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&Pt){const E={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(v=>{Object.defineProperty(T,v,se({value:T[v]},E))})}return r._p.forEach(E=>{if(process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&Pt){const v=i.run(()=>E({store:T,app:r._a,pinia:r,options:l}));Object.keys(v||{}).forEach(b=>T._customProperties.add(b)),se(T,v)}else se(T,i.run(()=>E({store:T,app:r._a,pinia:r,options:l})))}),process.env.NODE_ENV!=="production"&&T.$state&&typeof T.$state=="object"&&typeof T.$state.constructor=="function"&&!T.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${T.$id}".`),f&&a&&n.hydrate&&n.hydrate(T.$state,f),u=!0,d=!0,T}/*! #__NO_SIDE_EFFECTS__ */function Jf(t,e,n){let r,o;const a=typeof e=="function";if(typeof t=="string")r=t,o=a?n:e;else if(o=t,r=t.id,process.env.NODE_ENV!=="production"&&typeof r!="string")throw new Error('[🍍]: "defineStore()" must be passed a store id as its first argument.');function i(l,c){const u=s.hasInjectionContext();if(l=(process.env.NODE_ENV==="test"&&It&&It._testing?null:l)||(u?s.inject(Hf,null):null),l&&mn(l),process.env.NODE_ENV!=="production"&&!It)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);l=It,l._s.has(r)||(a?Tr(r,e,o,l):ta(r,o,l),process.env.NODE_ENV!=="production"&&(i._pinia=l));const d=l._s.get(r);if(process.env.NODE_ENV!=="production"&&c){const h="__hot:"+r,p=a?Tr(h,e,o,l,!0):ta(h,se({},o),l,!0);c._hotUpdate(p),delete l.state.value[h],l._s.delete(h)}if(process.env.NODE_ENV!=="production"&&Pt){const h=s.getCurrentInstance();if(h&&h.proxy&&!c){const p=h.proxy,g="_pStores"in p?p._pStores:p._pStores={};g[r]=d}}return d}return i.$id=r,i}const na=Jf("workspace",()=>{const t=s.ref(null),e=s.ref([]),n=s.ref(null),r=u=>{t.value=u,localStorage.setItem("current_workspace",JSON.stringify(u))},o=u=>{e.value=u,localStorage.setItem("available_workspaces",JSON.stringify(u))};return{currentWorkspace:t,workspaces:e,user:n,setCurrentWorkspace:r,setWorkspaces:o,setUser:u=>{n.value=u,localStorage.setItem("user_info",JSON.stringify(u))},loadPersistedData:()=>{const u=localStorage.getItem("current_workspace");if(u)try{t.value=JSON.parse(u)}catch(p){console.error("Error loading persisted workspace:",p)}const d=localStorage.getItem("available_workspaces");if(d)try{e.value=JSON.parse(d)}catch(p){console.error("Error loading persisted workspaces:",p)}const h=localStorage.getItem("user_info");if(h)try{n.value=JSON.parse(h)}catch(p){console.error("Error loading persisted user:",p)}},clearData:()=>{t.value=null,e.value=[],n.value=null,localStorage.removeItem("current_workspace"),localStorage.removeItem("available_workspaces"),localStorage.removeItem("user_info")},loadWorkspaces:async(u=!1)=>{try{const{data:{user:d}}=await te.auth.getUser();if(!d)return[];let h=te.from("workspaces").select(`
          id, title, description, parent_workspace_id, created_by, archived, created_at,
          workspace_access!inner ( access_type, shared_with_user_id ),
          workspace_activities!left ( updated_at )
        `).eq("workspace_access.shared_with_user_id",d.id);u||(h=h.eq("archived",!1));const{data:p,error:g}=await h;if(g)throw g;const f=new Map;(p||[]).forEach(_=>{(_.workspace_access||[]).forEach(O=>{O.shared_with_user_id===d.id&&f.set(_.id,O)})});const y=[...new Set((p||[]).filter(_=>_.parent_workspace_id).map(_=>_.parent_workspace_id).filter(_=>!f.has(_)))];let w=[];if(y.length){let _=te.from("workspaces").select("id, title, description, parent_workspace_id, created_by, archived, created_at").in("id",y);u||(_=_.eq("archived",!1));const{data:O,error:P}=await _;if(P)throw P;w=O||[]}const S=[...p||[],...w].map(_=>{var O,P,I;return{id:_.id,title:_.title,description:_.description||"No description",parent_workspace_id:_.parent_workspace_id,created_by:_.created_by,archived:_.archived,created_at:_.created_at,latest_activity:((P=(O=_.workspace_activities)==null?void 0:O[0])==null?void 0:P.updated_at)||_.created_at,hasAccess:f.has(_.id),accessType:((I=f.get(_.id))==null?void 0:I.access_type)||null}});return S.sort((_,O)=>new Date(O.latest_activity)-new Date(_.latest_activity)),o(S),S}catch(d){return console.error("loadWorkspaces error",d),[]}}}}),Yf={class:"aiworkspace-header"},Xf={key:0,class:"header-content"},Zf={class:"header-left"},Qf={class:"logo-section"},ep={href:"/",class:"logo"},tp=["src"],np={key:1,class:"text-logo"},rp={key:0,class:"header-center"},sp={class:"main-navigation"},op={class:"nav-item"},ap=["href","onClick"],ip={class:"workspace-icon"},lp={key:1,class:"nav-divider"},cp={class:"nav-item"},up=["href","onClick"],dp={class:"header-right"},hp={class:"user-profile"},fp={class:"user-info"},pp={class:"user-name"},gp={class:"user-avatar"},mp=["src","alt"],yp={key:1,class:"avatar-placeholder"},_p={key:1,class:"unauth-message"},bp={class:"workspace-list"},wp=["onClick"],vp={class:"workspace-icon"},kp={class:"workspace-details"},Sp={class:"workspace-members"},Ep={key:0,class:"current-indicator"},Cp=s.defineComponent({__name:"AIWorkspaceHeader",props:{showUserMenu:{type:Boolean,default:!0},showNotifications:{type:Boolean},customLogo:{default:""},customLinks:{default:()=>[]},showWorkspaceSelector:{type:Boolean,default:!0},showSecondaryNavigation:{type:Boolean,default:!0},currentWorkspaceId:{},onWorkspaceChange:{},onLogout:{},onLogin:{},onProfileClick:{},onSettingsClick:{}},emits:["workspaceChange","logout","login","profileClick","settingsClick"],setup(t,{emit:e}){const n=t,r=e,{authState:o,logout:a}=Jo(),i=na(),l=s.ref(!1),c=s.ref([]),u=s.ref([]),d=s.ref({name:"",email:"",avatar_url:null,initials:""}),h=s.ref([]),p=s.ref([]),g=s.computed(()=>o.value.isAuthenticated),f=s.computed(()=>i.currentWorkspace),y=s.ref([{label:"Dashboard",key:"dashboard",url:"/dashboard"},{label:"Goals",key:"goals",url:"/goals"},{label:"Tasks",key:"tasks",url:"/tasks"},{label:"Events",key:"events",url:"/events"},{label:"Drive",key:"files",url:"/files"},{label:"Outlines",key:"outlines",url:"/outlines"},{label:"Communications",key:"communications",url:"/communications"},{label:"Canvas",key:"canvas",url:"/canvas"},{label:"AI Phone",key:"ai_phone",url:"/ai_phone"},{label:"AI Intake",key:"ai_intake",url:"/ai_intake"},{label:"AI Fax",key:"ai_fax",url:"/ai_fax"},{label:"AI Portfolios",key:"ai-portfolios",url:"/ai-portfolios"},{label:"AI Fund Analyst",key:"ai_fund_analyst",url:"/ai_fund_analyst"},{label:"Contacts",key:"contacts",url:"/contacts"},{label:"Settings",key:"settings",url:"/settings"}]),w=s.computed(()=>"Dashboard"),m=b=>{const k=new Map;b.forEach(W=>{k.set(W.id,{...W,children:[]})});const A=[];k.forEach(W=>{W.parent_workspace_id&&k.has(W.parent_workspace_id)?k.get(W.parent_workspace_id).children.push(W):A.push(W)});const L=W=>{W.sort((x,M)=>x.title.localeCompare(M.title)),W.forEach(x=>{x.children&&L(x.children)})};return L(A),A},S=(b,k=0,A=[])=>(b.forEach(L=>{A.push({...L,level:k}),L.children&&L.children.length&&S(L.children,k+1,A)}),A),_=async()=>{try{const b=await i.loadWorkspaces();if(h.value=m(b),p.value=S(h.value),u.value=p.value,c.value=p.value,n.currentWorkspaceId){const k=p.value.find(A=>{var L;return A.id.toString()===((L=n.currentWorkspaceId)==null?void 0:L.toString())});k&&i.setCurrentWorkspace(k)}else!f.value&&p.value.length&&i.setCurrentWorkspace(p.value[0])}catch(b){console.error("loadWorkspaces (header) error",b)}},O=b=>{if(console.log("Navigation command:",b),b==="all-workspace"){window.location.href="https://all-ws-dashboard.aiworkspace.pro/all-workspace/dashboard";return}if(b.startsWith("workspace-")){const k=b.replace("workspace-",""),A=u.value.find(L=>L.id===parseInt(k));A&&B(A);return}},P=b=>{const k=f.value;switch(b.key){case"dashboard":k?window.location.href=`/single-workspace/${k.id}/dashboard`:window.location.href="/";break;case"outlines":if(k){const A=`https://outline.aiworkspace.pro/single-workspace/${k.id}/outlines`;window.location.href=A}else window.location.href="https://outline.aiworkspace.pro";break;case"canvas":if(k){const A=`https://canvas.aiworkspace.pro/single-workspace/${k.id}/canvas`;window.location.href=A}else window.location.href="https://canvas.aiworkspace.pro";break;case"files":if(k){const A=`https://drive.aiworkspace.pro/single-workspace/${k.id}/files`;window.location.href=A}else window.location.href="https://drive.aiworkspace.pro";break;case"tasks":if(k){const A=`https://tasks.aiworkspace.pro/single-workspace/${k.id}/tasks`;window.location.href=A}else window.location.href="https://tasks.aiworkspace.pro";break;case"ai-portfolios":if(k){const A=`https://spreadsheet.aiworkspace.pro/single-workspace/${k.id}/ai-portfolios`;window.location.href=A}else window.location.href="https://spreadsheet.aiworkspace.pro";break;default:if(k){const A=`https://app.aiworkspace.pro/single-workspace/${k.id}/${b.key}`;window.location.href=A}else{const A=`https://app.aiworkspace.pro/${b.key}`;window.location.href=A}break}},I=b=>{const k=f.value;switch(b.key){case"dashboard":return k?`/single-workspace/${k.id}/dashboard`:"/";case"ai-portfolios":return k?`https://spreadsheet.aiworkspace.pro/single-workspace/${k.id}/ai-portfolios`:"https://spreadsheet.aiworkspace.pro";case"outlines":return k?`https://outline.aiworkspace.pro/single-workspace/${k.id}/outlines`:"https://outline.aiworkspace.pro";case"canvas":return k?`https://canvas.aiworkspace.pro/single-workspace/${k.id}/canvas`:"https://canvas.aiworkspace.pro";case"files":return k?`https://drive.aiworkspace.pro/single-workspace/${k.id}/files`:"https://drive.aiworkspace.pro";case"tasks":return k?`https://tasks.aiworkspace.pro/single-workspace/${k.id}/tasks`:"https://tasks.aiworkspace.pro";default:return k?`https://app.aiworkspace.pro/single-workspace/${k.id}/${b.key}`:`https://app.aiworkspace.pro/${b.key}`}},T=b=>{switch(b){case"profile":n.onProfileClick?n.onProfileClick():tn.info("Profile settings coming soon");break;case"workspaces":l.value=!0;break;case"logout":E();break}},B=b=>{i.setCurrentWorkspace(b),l.value=!1,r("workspaceChange",b),tn.success(`Switched to ${b.title}`)},j=()=>{ao.prompt("Enter workspace name:","Create New Workspace",{confirmButtonText:"Create",cancelButtonText:"Cancel",inputPattern:/\S/,inputErrorMessage:"Workspace name cannot be empty"}).then(({value:b})=>{const k={id:Date.now(),title:b,description:"New workspace",archived:!1,created_by:"",created_at:new Date().toISOString(),latest_activity:new Date().toISOString(),hasAccess:!0,accessType:"edit"};c.value.push(k),i.setWorkspaces(c.value),B(k),tn.success(`Created workspace: ${b}`)}).catch(()=>{})},E=()=>{ao.confirm("Are you sure you want to sign out?","Sign Out",{confirmButtonText:"Sign Out",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{i.clearData(),await a(),r("logout"),tn.success("Signed out successfully")}).catch(()=>{})},v=async()=>{var b,k;if(o.value.user){const A=o.value.user;d.value={name:A.name||((b=A.email)==null?void 0:b.split("@")[0])||"User",email:A.email||"",avatar_url:A.avatar_url||null,initials:(A.name||((k=A.email)==null?void 0:k.split("@")[0])||"U").split(" ").map(L=>L[0]).join("").toUpperCase().substring(0,2)},n.showWorkspaceSelector&&await _()}};return s.watch(()=>o.value.user,b=>{b?v():(d.value={name:"",email:"",avatar_url:null,initials:""},i.clearData())}),s.watch(()=>n.currentWorkspaceId,b=>{if(b&&p.value.length){const k=p.value.find(A=>A.id.toString()===b.toString());k&&i.setCurrentWorkspace(k)}}),s.onMounted(async()=>{g.value&&await v()}),(b,k)=>{const A=s.resolveComponent("el-icon"),L=s.resolveComponent("el-dropdown-item"),W=s.resolveComponent("el-tag"),x=s.resolveComponent("el-dropdown-menu"),M=s.resolveComponent("el-dropdown"),D=s.resolveComponent("el-button"),ce=s.resolveComponent("el-dialog");return s.openBlock(),s.createElementBlock("header",Yf,[g.value?(s.openBlock(),s.createElementBlock("div",Xf,[s.createElementVNode("div",Zf,[s.createElementVNode("div",Qf,[s.createElementVNode("a",ep,[b.customLogo?(s.openBlock(),s.createElementBlock("img",{key:0,src:b.customLogo,alt:"AIWorkspace",class:"logo-image"},null,8,tp)):(s.openBlock(),s.createElementBlock("div",np,[...k[6]||(k[6]=[s.createElementVNode("span",{class:"logo-text"},"AI Workspace",-1)])]))])])]),b.showSecondaryNavigation?(s.openBlock(),s.createElementBlock("div",rp,[s.createElementVNode("nav",sp,[b.showWorkspaceSelector?(s.openBlock(),s.createBlock(M,{key:0,onCommand:O,trigger:"hover"},{dropdown:s.withCtx(()=>[s.createVNode(x,{class:"workspace-tree-dropdown"},{default:s.withCtx(()=>[s.createVNode(L,{command:"all-workspace"},{default:s.withCtx(()=>[...k[7]||(k[7]=[s.createElementVNode("a",{href:"https://all-ws-dashboard.aiworkspace.pro/all-workspace/dashboard",class:"nav-link"},[s.createElementVNode("div",{class:"workspace-dropdown-item"},[s.createElementVNode("span",{class:"workspace-icon"},"🌐"),s.createElementVNode("span",null,"All workspace")])],-1)])]),_:1}),p.value.length>0?(s.openBlock(),s.createBlock(L,{key:0,divided:"",disabled:""})):s.createCommentVNode("",!0),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(p.value,$=>(s.openBlock(),s.createBlock(L,{key:$.id,command:`workspace-${$.id}`},{default:s.withCtx(()=>{var Re;return[s.createElementVNode("a",{href:`/single-workspace/${$.id}/dashboard`,class:"nav-link",onClick:s.withModifiers(Nt=>B($),["prevent"])},[s.createElementVNode("div",{class:"workspace-dropdown-item",style:s.normalizeStyle({paddingLeft:($.level||0)*16+"px"})},[s.createElementVNode("span",ip,s.toDisplayString($.children&&$.children.length?"📁":"📄"),1),s.createElementVNode("span",null,s.toDisplayString($.title),1),$.id===((Re=f.value)==null?void 0:Re.id)?(s.openBlock(),s.createBlock(W,{key:0,size:"small",type:"success"},{default:s.withCtx(()=>[...k[8]||(k[8]=[s.createTextVNode("Current",-1)])]),_:1})):s.createCommentVNode("",!0)],4)],8,ap)]}),_:2},1032,["command"]))),128)),p.value.length===0?(s.openBlock(),s.createBlock(L,{key:1,disabled:""},{default:s.withCtx(()=>[...k[9]||(k[9]=[s.createTextVNode(" No workspaces ",-1)])]),_:1})):s.createCommentVNode("",!0)]),_:1})]),default:s.withCtx(()=>{var $;return[s.createElementVNode("span",op,[s.createTextVNode(s.toDisplayString((($=f.value)==null?void 0:$.title)||"Select Workspace")+" ",1),s.createVNode(A,{class:"nav-arrow"},{default:s.withCtx(()=>[s.createVNode(s.unref(Cs))]),_:1})])]}),_:1})):s.createCommentVNode("",!0),b.showWorkspaceSelector?(s.openBlock(),s.createElementBlock("span",lp,"/")):s.createCommentVNode("",!0),b.showSecondaryNavigation?(s.openBlock(),s.createBlock(M,{key:2,trigger:"hover"},{dropdown:s.withCtx(()=>[s.createVNode(x,null,{default:s.withCtx(()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(y.value,$=>(s.openBlock(),s.createBlock(L,{key:$.label,class:s.normalizeClass({active:$.active})},{default:s.withCtx(()=>[s.createElementVNode("a",{href:I($),class:"nav-link",onClick:s.withModifiers(Re=>P($),["prevent"])},s.toDisplayString($.label),9,up)]),_:2},1032,["class"]))),128))]),_:1})]),default:s.withCtx(()=>[s.createElementVNode("span",cp,[s.createTextVNode(s.toDisplayString(w.value)+" ",1),s.createVNode(A,{class:"nav-arrow"},{default:s.withCtx(()=>[s.createVNode(s.unref(Cs))]),_:1})])]),_:1})):s.createCommentVNode("",!0)])])):s.createCommentVNode("",!0),s.createElementVNode("div",dp,[s.createVNode(M,{onCommand:T,trigger:"click",placement:"bottom-end"},{dropdown:s.withCtx(()=>[s.createVNode(x,null,{default:s.withCtx(()=>[s.createVNode(L,null,{default:s.withCtx(()=>[s.createElementVNode("a",{href:"/profile",class:"nav-link",onClick:k[0]||(k[0]=s.withModifiers($=>T("profile"),["prevent"]))},"Profile Settings")]),_:1}),b.showWorkspaceSelector?(s.openBlock(),s.createBlock(L,{key:0},{default:s.withCtx(()=>[s.createElementVNode("a",{href:"#switch-workspace",class:"nav-link",onClick:k[1]||(k[1]=s.withModifiers($=>T("workspaces"),["prevent"]))},"Switch Workspace")]),_:1})):s.createCommentVNode("",!0),s.createVNode(L,{divided:""},{default:s.withCtx(()=>[s.createElementVNode("a",{href:"#signout",class:"nav-link",onClick:k[2]||(k[2]=s.withModifiers($=>T("logout"),["prevent"]))},"Sign Out")]),_:1})]),_:1})]),default:s.withCtx(()=>[s.createElementVNode("div",hp,[s.createElementVNode("div",fp,[s.createElementVNode("span",pp,s.toDisplayString(d.value.name),1)]),s.createElementVNode("div",gp,[d.value.avatar_url?(s.openBlock(),s.createElementBlock("img",{key:0,src:d.value.avatar_url,alt:d.value.name},null,8,mp)):(s.openBlock(),s.createElementBlock("span",yp,s.toDisplayString(d.value.initials),1))])])]),_:1})])])):(s.openBlock(),s.createElementBlock("div",_p,[...k[10]||(k[10]=[s.createElementVNode("div",{class:"unauth-inner"},[s.createElementVNode("strong",null,"Authentication required."),s.createTextVNode(" Please log in to access the workspace. ")],-1)])])),g.value&&b.showWorkspaceSelector?(s.openBlock(),s.createBlock(ce,{key:2,modelValue:l.value,"onUpdate:modelValue":k[4]||(k[4]=$=>l.value=$),title:"Switch Workspace",width:"500px",onClose:k[5]||(k[5]=$=>l.value=!1)},{footer:s.withCtx(()=>[s.createVNode(D,{onClick:k[3]||(k[3]=$=>l.value=!1)},{default:s.withCtx(()=>[...k[11]||(k[11]=[s.createTextVNode("Cancel",-1)])]),_:1}),s.createVNode(D,{type:"primary",onClick:j},{default:s.withCtx(()=>[...k[12]||(k[12]=[s.createTextVNode("Create New Workspace",-1)])]),_:1})]),default:s.withCtx(()=>[s.createElementVNode("div",bp,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(c.value,$=>{var Re,Nt;return s.openBlock(),s.createElementBlock("div",{key:$.id,class:s.normalizeClass(["workspace-item",{active:$.id===((Re=f.value)==null?void 0:Re.id)}]),onClick:Or=>B($)},[s.createElementVNode("div",vp,s.toDisplayString($.children&&$.children.length?"📁":"📄"),1),s.createElementVNode("div",kp,[s.createElementVNode("h3",null,s.toDisplayString($.title),1),s.createElementVNode("p",null,s.toDisplayString($.description),1),s.createElementVNode("span",Sp,s.toDisplayString($.hasAccess?"Active":"Inactive"),1)]),$.id===((Nt=f.value)==null?void 0:Nt.id)?(s.openBlock(),s.createElementBlock("div",Ep,[s.createVNode(A,null,{default:s.withCtx(()=>[s.createVNode(s.unref(bc))]),_:1})])):s.createCommentVNode("",!0)],10,wp)}),128))])]),_:1},8,["modelValue"])):s.createCommentVNode("",!0)])}}}),Gp="",Tp=((t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n})(Cp,[["__scopeId","data-v-53e8a109"]]),ra="aiworkspace_auth",sa="aiworkspace_user_id";function Op(){const t=s.ref({user:null,isAuthenticated:!1,isLoading:!0}),e=i=>{var u;const c=`; ${document.cookie}`.split(`; ${i}=`);return c.length===2&&((u=c.pop())==null?void 0:u.split(";").shift())||null},n=(i,l,c=7)=>{const u=new Date;u.setTime(u.getTime()+c*24*60*60*1e3),document.cookie=`${i}=${l};expires=${u.toUTCString()};path=/;domain=.aiworkspace.pro`},r=i=>{document.cookie=`${i}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.aiworkspace.pro`},o=async()=>{try{const i=e(ra),l=e(sa);i&&l?t.value={user:{id:l,email:""},isAuthenticated:!0,isLoading:!1}:t.value={user:null,isAuthenticated:!1,isLoading:!1}}catch(i){console.error("Auth check failed:",i),t.value={user:null,isAuthenticated:!1,isLoading:!1}}},a=()=>{r(ra),r(sa),t.value={user:null,isAuthenticated:!1,isLoading:!1}};return s.onMounted(()=>{o()}),{authState:t,checkAuth:o,logout:a,getCookie:e,setCookie:n,clearCookie:r}}U.ACCESS_COOKIE=fe,U.AIWorkspaceHeader=Tp,U.LS_ACCESS_KEY=br,U.LS_REFRESH_KEY=wr,U.REFRESH_COOKIE=pe,U.buildOAuthRedirectUrl=Ff,U.clearLocalStorageTokens=qo,U.clearSessionCookie=yr,U.ensureCrossSubdomainCookies=_r,U.getCookie=$e,U.getPostLoginBase=zf,U.restoreCrossSubdomainSession=Wf,U.restoreSessionWithRetry=vr,U.setSessionCookie=xe,U.setupAuthStateListener=Go,U.supabase=te,U.syncCookiesToLocalStorage=Ot,U.useAuth=Op,U.useEnhancedAuth=Jo,U.useWorkspaceStore=na,Object.defineProperty(U,Symbol.toStringTag,{value:"Module"})});
