# Commit Hash Display Feature

This header package includes commit hash display functionality that shows the last GitHub commit ID of the app where you install this package.

## Features

1. **Commit Hash Display**: Shows the current app's commit hash in the user profile dropdown menu
2. **Version Checking**: Automatically checks for app updates every 30 seconds
3. **Update Alert**: Shows a notification when a new version is available
4. **Copy to Clipboard**: Click on the version to copy the full commit hash to clipboard

## How It Works

### Runtime Approach
- The header package fetches the commit hash from the consuming app's `version.json` file
- This ensures each app shows its own commit hash, not the package's commit hash
- The `version.json` file must be generated by the consuming app's build process

### Runtime Behavior
- Displays the short commit hash (7 characters) in the user dropdown menu
- Periodically checks `/version.json` for updates
- Shows an alert when a newer version is detected
- Allows users to reload the page to get the latest version

## Setup Required

**Important**: App developers must set up version generation in their build process for this feature to work.

### For App Developers

When you install this header package in your app, you need to:

1. **Set up version generation** in your app's build process (see `APP_INTEGRATION_GUIDE.md`)
2. **Generate a `version.json` file** in your app's public directory
3. The header will then automatically show your app's commit hash
4. Users can click on the version to copy the full hash
5. The header will check for updates and notify users when available

### Version Checking

The header checks for updates by:
1. Fetching `/version.json` from your app's public directory
2. Comparing the current commit hash with the latest one
3. Showing an update alert if they don't match

**Required**: Your app's build process must generate a `version.json` file in the public directory for this feature to work.

## Files Modified

- `src/types/global.d.ts` - Updated type declarations (no longer uses build-time injection)
- `vite.config.ts` - Removed commit hash injection (now handled by consuming apps)
- `src/components/AIWorkspaceHeader.vue` - Added runtime version loading and checking functionality
- `COMMIT_HASH_FEATURE.md` - Documentation for the new feature
- `APP_INTEGRATION_GUIDE.md` - Complete setup guide for app developers

## Example Output

The user dropdown menu will show:
```
Profile Settings
Switch Workspace
Version: a1b2c3d
Sign Out
```

Clicking on "Version: a1b2c3d" will copy the full commit hash to clipboard and show a success message.

## Quick Setup for App Developers

1. Add the version generation plugin to your build config (see `APP_INTEGRATION_GUIDE.md`)
2. Build your app - this will generate `version.json` in your public directory
3. The header will automatically show your app's commit hash
4. Users will get update notifications when you deploy new versions
